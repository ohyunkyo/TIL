<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Gatsby Starter Blog RSS Feed]]></title><description><![CDATA[Gatsby Starter Blog RSS Feed]]></description><link>https://ohyunkyo.github.io/TIL</link><generator>GatsbyJS</generator><lastBuildDate>Tue, 16 Aug 2022 09:05:19 GMT</lastBuildDate><item><title><![CDATA[개츠비 카테고리 플러그인 사용하기]]></title><description><![CDATA[0. 서론 내가  를 사용해 만든 블로그 와 TIL…]]></description><link>https://ohyunkyo.github.io/TIL/gatsby/gatsby-plugin-categories/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/gatsby/gatsby-plugin-categories/</guid><pubDate>Tue, 02 Aug 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;내가 &lt;code class=&quot;language-text&quot;&gt;gatsby&lt;/code&gt; 를 사용해 만든 &lt;a href=&quot;https://ohyunkyo.github.io&quot;&gt;블로그&lt;/a&gt; 와 &lt;a href=&quot;https://ohyunkyo.github.io/TIL&quot;&gt;TIL&lt;/a&gt; 는 일반적인 블로그 양식과 달리, 게시물들이 분류되어 있지 않고 전체 게시물 목록만을 출력한다.
그래서 원하는 게시글을 찾거나 어떤 주제에 관한 글이 있는지 직관적으로 판단하기 어렵다.&lt;/p&gt;
&lt;p&gt;이 문제를 해결하기 위해 여러 방법을 찾아봤다. 많은 사람들이 다양한 방법으로 구현한 예제가 있었지만 리액트를 전혀 모르는 나에겐 적용하기 어려웠다.&lt;br&gt;
그때 간단히 사용 가능한 &lt;code class=&quot;language-text&quot;&gt;gatsby_plugin_categories&lt;/code&gt; 라는 플러그인을 발견했는데, 이 플러그인을 사용해 게시물을 분류하는 방법을 정리한다.&lt;/p&gt;
&lt;h3&gt;0.1. 카테고리 사용 계획&lt;/h3&gt;
&lt;p&gt;내가 필요한 것은 다음과 같다.&lt;/p&gt;
&lt;h4&gt;0.1.1 각 카테고리 별 목록 페이지&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/category/{category_name}&lt;/code&gt; 페이지가 있어야 한다.&lt;/li&gt;
&lt;li&gt;해당 페이지에서 각 카테고리에 해당하는 게시물 목록을 출력한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;0.1.2 각 카테고리 별 목록 페이지로 이동 가능한 네비게이션 메뉴&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;각 카테고리 별 목록 페이지로 이동 가능한 네비게이션을 만들고 모든 페이지에서 볼수 있도록 한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;0.1.3 각 게시물 페이지에서 해당 카테고리 목록 페이지로 이동&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;게시물 페이지에 해당 카테고리의 목록 페이지로 이동 가능한 링크 출력&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;블로그는 &lt;a href=&quot;https://ohyunkyo.github.io/git/github-page-make-blog/&quot;&gt;github pages 를 사용하여 블로그 만들기&lt;/a&gt; 와 같은 방법으로 만들었다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;1. 마크다운 파일 수정하기&lt;/h2&gt;
&lt;p&gt;가장 먼저 해야할 것은 &lt;code class=&quot;language-text&quot;&gt;*.md&lt;/code&gt; 파일들에 &lt;code class=&quot;language-text&quot;&gt;category&lt;/code&gt; 라는 &lt;code class=&quot;language-text&quot;&gt;front-matter&lt;/code&gt; 를 추가하는것이다.&lt;br&gt;
이 마크다운 문서는 아래와 같은 &lt;code class=&quot;language-text&quot;&gt;front-matter&lt;/code&gt; 를 가지고 있는데, 이것처럼 &lt;code class=&quot;language-text&quot;&gt;category&lt;/code&gt; 를 추가하면 된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;markdown&quot;&gt;&lt;pre class=&quot;language-markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;&lt;span class=&quot;token front-matter-block&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;token front-matter yaml language-yaml&quot;&gt;title: &quot;개츠비 카테고리 플러그인 사용하기&quot;
date: &quot;2022-08-02&quot;
last_modified_at: &quot;2022-08-00&quot;
category: react&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;2. 각 카테고리 별 목록 페이지 생성&lt;/h2&gt;
&lt;p&gt;이제 방금 추가한 &lt;code class=&quot;language-text&quot;&gt;category&lt;/code&gt; 별로 목록 페이지를 생성하고 해당 목록 페이지에서 각 카테고리의 게시물 목록을 출력하도록 할것이다.&lt;br&gt;
이 부분은 &lt;code class=&quot;language-text&quot;&gt;gatsby_plugin_categories&lt;/code&gt; 의 예제 소스를 가져와서 적용하기만 하면 쉽게 구현 가능하다.&lt;/p&gt;
&lt;h3&gt;2.1 설치&lt;/h3&gt;
&lt;p&gt;먼저 해당 플러그인을 설치한다. &lt;code class=&quot;language-text&quot;&gt;README.md&lt;/code&gt; 에서는 &lt;code class=&quot;language-text&quot;&gt;yarn&lt;/code&gt; 을 사용하는 방법을 안내하지만 나는 &lt;code class=&quot;language-text&quot;&gt;npm&lt;/code&gt; 을 사용했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; gatsby-plugin-categories &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;2.2 파일 수정&lt;/h3&gt;
&lt;p&gt;플러그인을 불러오도록 &lt;code class=&quot;language-text&quot;&gt;gatsby-config.js&lt;/code&gt; 파일을 수정한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// gatsby-config.js&lt;/span&gt;

&lt;span class=&quot;token literal-property property&quot;&gt;plugins&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gatsby-plugin-categories&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;templatePath&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;__dirname&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/src/templates/category.js&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;gatsby-plugin-categories&lt;/code&gt; 는 &lt;code class=&quot;language-text&quot;&gt;graphql query&lt;/code&gt; 로 전체 카테고리 목록을 가져온다. 그 뒤 &lt;code class=&quot;language-text&quot;&gt;set&lt;/code&gt; 객체에 담아 중복을 제거하고 &lt;code class=&quot;language-text&quot;&gt;templatePath&lt;/code&gt; 옵션의 템플릿을 사용하여 각 카테고리별 목록 페이지를 생성하게 된다.&lt;/p&gt;
&lt;h3&gt;2.3 파일 추가&lt;/h3&gt;
&lt;p&gt;다음으로는 예제 파일을 참고하여 플러그인 사용을 위한 파일을 추가한다.&lt;/p&gt;
&lt;h4&gt;2.3.1 category&lt;/h4&gt;
&lt;p&gt;가장 먼저 &lt;code class=&quot;language-text&quot;&gt;category&lt;/code&gt; 템플릿 파일을 추가했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// src/templates/category.js&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; graphql &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gatsby&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Container &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-bootstrap&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Layout &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;../components/layout&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SEO&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;../components/seo&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; PostsList &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;../components/PostsList&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;CategoryTemplate&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; location&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pageContext&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; category &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pageContext
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Layout location&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;location&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; title&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Posts in category &quot;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;category&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;category-container&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SEO&lt;/span&gt; title&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Posts in category &quot;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;category&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;

        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Container&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Category&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;category&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;h1&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;PostsList postEdges&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;allMarkdownRemark&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;edges&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Container&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Layout&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageQuery &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphql&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;
  query CategoryPage($category: String) {
    allMarkdownRemark(
      limit: 1000
      filter: { fields: { category: { eq: $category } } }
    ) {
      totalCount
      edges {
        node {
          fields {
            slug
            category
          }
          excerpt
          timeToRead
          frontmatter {
            title
            date
          }
        }
      }
    }
  }
&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; CategoryTemplate&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;2.3.2 PostsList&lt;/h4&gt;
&lt;p&gt;그 다음으로는 &lt;code class=&quot;language-text&quot;&gt;category&lt;/code&gt; 템플릿에서 사용하는 &lt;code class=&quot;language-text&quot;&gt;PostsList&lt;/code&gt; 컴포넌트를 추가한다.&lt;br&gt;
여기에서는 &lt;code class=&quot;language-text&quot;&gt;category&lt;/code&gt; 로부터 해당 카테고리의 게시물 목록을 전달받아 출력한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// src/components/PostsList.js&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; PostsListCard &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./PostsListCard&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;PostsList&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; postEdges &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; postEdges&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; node &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;PostsListCard key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fields&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;slug&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; PostsList&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;2.3.3 PostsListCard&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;PostsList&lt;/code&gt; 가 게시물 목록을 출력할 때에 개별 게시물 정보를 &lt;code class=&quot;language-text&quot;&gt;PostsListCard&lt;/code&gt; 컴포넌트에 전달한다.&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;PostsListCard&lt;/code&gt; 는 하나의 게시물 정보를 받아 목록의 요소로 사용될 수 있도록 가공 후 리턴한다.&lt;br&gt;
나는 &lt;code class=&quot;language-text&quot;&gt;PostsListCard&lt;/code&gt; 에서 리턴하는 데이터가 &lt;code class=&quot;language-text&quot;&gt;index&lt;/code&gt; 페이지에서 출력되는 목록의 요소와 동일하게 보이도록 수정했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// src/components/PostsListCard.js&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Link &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gatsby&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;PostsListCard&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; frontmatter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fields&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; excerpt &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; frontmatter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; fields&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;slug

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ol style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;listStyle&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;none&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;li key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;fields&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;slug&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;article
          className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;post-list-item&quot;&lt;/span&gt;
          itemScope
          itemType&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;http://schema.org/Article&quot;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;header&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;h2&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
              &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Link to&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;fields&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;slug&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; itemProp&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;url&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
                &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;span itemProp&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;headline&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;title&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;span&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
              &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Link&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;h2&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;small&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;frontmatter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;date&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;small&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;header&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;section&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p
              dangerouslySetInnerHTML&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token literal-property property&quot;&gt;__html&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; frontmatter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;description &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; excerpt&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
              &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
              itemProp&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;description&quot;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;section&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;article&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;li&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ol&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; PostsListCard&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;만약 설치되지 않은 npm 패키지가 있다면 따로 설치해준다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;3. 각 카테고리 별 목록 페이지로 이동 가능한 네비게이션 메뉴 생성&lt;/h2&gt;
&lt;p&gt;다음으로는 생성된 카테고리 별 목록 페이지로 이동 가능한 링크가 있는 네비게이션 메뉴를 생성해야 한다.&lt;br&gt;
일단 &lt;code class=&quot;language-text&quot;&gt;components&lt;/code&gt; 디렉토리에 &lt;code class=&quot;language-text&quot;&gt;NavBar&lt;/code&gt; 라는 컴포넌트를 생성했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// src/components/NavBar.js&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Link&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; graphql&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; useStaticQuery&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gatsby&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;NavBar&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; allMarkdownRemark &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useStaticQuery&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    graphql&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;
      query {
        allMarkdownRemark {
          nodes {
            fields {
              category
            }
          }
        }
      }
    &lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; categorySet &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  allMarkdownRemark&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   fields
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fields &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; fields&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;category&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      categorySet&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fields&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;category&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; categoryArr &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;categorySet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;카테고리&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;nbsp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;nbsp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;nbsp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;nbsp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;categoryArr&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;category&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;span&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Link to&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/category/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;category&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;category&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Link&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;nbsp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;nbsp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;nbsp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;nbsp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;span&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; NavBar&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;gatsby-plugin-categories&lt;/code&gt; 가 각 카테고리 별 목록 페이지를 생성하는 부분을 참고하여 카테고리 별 목록 페이지로 이동 가능한 링크를 만들었다.
이후 필요한 페이지에서 컴포넌트를 호출해 사용한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// src/pages/index.js&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Layout location&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;location&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; title&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;siteTitle&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Seo title&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;All posts&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;/* 추가한 부분 */&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;NavBar &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;/*------------*/&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Bio &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ol style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;listStyle&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;none&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;4. 각 게시물 페이지에서 해당 카테고리 목록 페이지로 이동&lt;/h2&gt;
&lt;p&gt;마지막으로 각 게시물 페이지에서 해당 게시물의 카테고리 목록 페이지로 이동 가능한 버튼을 추가한다.&lt;br&gt;
이 기능은 예제의 소스코드 그대로 사용했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// src/templates/blog-post.js&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Container&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Row&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Col&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Card &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-bootstrap&quot;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 적당한 위치에 추가&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Col md&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fields&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;category &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Card className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;my-4&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Card&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Header&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Filed Under&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Card&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Header&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Card&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Body&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Link to&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/category/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fields&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;category&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fields&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;category&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Link&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Card&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Body&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Card&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Col&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageQuery &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphql&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;
  query BlogPostBySlug(
    $id: String!
    $previousPostId: String
    $nextPostId: String
  ) {
    site {
      siteMetadata {
        title
      }
    }
    markdownRemark(id: { eq: $id }) {
      id
      excerpt(pruneLength: 160)
      html
      frontmatter {
        title
        date(formatString: &quot;MMMM DD, YYYY&quot;)
        description
      }
      /* 추가한 부분 */
      fields {
        category
        slug
      }
      /*------------*/
    }
    previous: markdownRemark(id: { eq: $previousPostId }) {
      fields {
        slug
      }
      frontmatter {
        title
      }
    }
    next: markdownRemark(id: { eq: $nextPostId }) {
      fields {
        slug
      }
      frontmatter {
        title
      }
    }
  }
&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;99. 끝나고 나서&lt;/h2&gt;
&lt;p&gt;개인적으로 &lt;code class=&quot;language-text&quot;&gt;gatsby-plugin-categories&lt;/code&gt; 의 &lt;code class=&quot;language-text&quot;&gt;README.md&lt;/code&gt; 파일의 설명이 굉장히 부족하다고 느꼈다.&lt;br&gt;
다른 참조할만한 문서도 없어서 소스코드만을 보고 구현에 성공했는데, 어떤 파일이 필요하고 각 파일이 어떤 역할을 하는지에 대해서는 기본적으로 제공해야 한다고 생각한다.&lt;/p&gt;
&lt;p&gt;내가 앞으로 어떤식으로든 소프트웨어를 만들게 되면 최대한 자세한 설명을 포함하는 문서를 제공해야겠다는 생각을 했다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[2022-08-16] 개츠비의 구조에 대해 조금 알게된 지금 생각해보니 소스코드 만으로도 어느정도 이해 가능하다는 생각이 든다. 하지만 자신이 만든 프로그램에 대한 설명은 자세할수록 좋다는 생각은 변함이 없다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/rmcfadzean/gatsby-pantry/tree/master/packages/gatsby-plugin-categories&quot;&gt;gatsby-plugin-categories&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://github.com/rmcfadzean/gatsby-pantry/tree/master/examples/starter-blog#readme&quot;&gt;예제&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[drf 의 인증]]></title><description><![CDATA[0. 서론 drf 로 구현한 API 서버에서 사용자 인증을 고민하던중 여러 방법이 있다는것을 알게되었다. 그 방법들중 일부를 간단히 정리하고 내가 사용할 것을 정했다. 1. drf Authentication…]]></description><link>https://ohyunkyo.github.io/TIL/django-rest-framework/drf-authentication/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django-rest-framework/drf-authentication/</guid><pubDate>Fri, 29 Jul 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;drf 로 구현한 API 서버에서 사용자 인증을 고민하던중 여러 방법이 있다는것을 알게되었다.&lt;br&gt;
그 방법들중 일부를 간단히 정리하고 내가 사용할 것을 정했다.&lt;/p&gt;
&lt;h2&gt;1. drf Authentication&lt;/h2&gt;
&lt;p&gt;인증이란 &lt;code class=&quot;language-text&quot;&gt;요청&lt;/code&gt;과 &lt;code class=&quot;language-text&quot;&gt;자격 증명&lt;/code&gt;을 연결하는 방법이다.&lt;br&gt;
인증은 항상, 모든 경우에서 가장 먼저 실행된다. 이후 권한 및 제한 정책으로 해당 &lt;code class=&quot;language-text&quot;&gt;자격 증명의 요청&lt;/code&gt; 을 허용해야 하는지 여부를 결정하게 되며, 인증 자체가 들어오는 요청을 허용하거나 허용하지 않는 작업을 하지는 않는다.&lt;/p&gt;
&lt;p&gt;drf 는 이런 인증 체계를 바로 사용할 수 있도록 제공한다.&lt;/p&gt;
&lt;h2&gt;2. drf 에서 사용 가능한 토큰 인증&lt;/h2&gt;
&lt;p&gt;여러 인증 방법중 토큰을 사용한 인증 방법에 대해 정리한다.&lt;/p&gt;
&lt;h2&gt;2.1 drf TokenAuthentication&lt;/h2&gt;
&lt;p&gt;drf 의 기본 토큰 인증이다. 다음과 같은 특징을 가진다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;하나의 토큰으로 모든 세션을 처리한다.&lt;/li&gt;
&lt;li&gt;만료 기한이 없다.&lt;/li&gt;
&lt;li&gt;클라이언트-서버 형태에 적합하다.&lt;/li&gt;
&lt;li&gt;헤더에 토큰이 담겨 올 경우 해당 토큰을 DB에서 검색한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;2.2 JWT&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;토큰 자체에 사용자의 정보가 포함되어있다.&lt;/li&gt;
&lt;li&gt;일정 기간이 지나면 만료된다.&lt;/li&gt;
&lt;li&gt;RESTful 한 환경에서 사용자 데이터를 주고받을 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;3. 선택&lt;/h2&gt;
&lt;p&gt;실 사용경험이 없어서 인지 이런 장단점이 와닿진 않았고, 오히려 요즘 많이 쓴다는 JWT 를 써야겠다는 생각이 들었다.&lt;br&gt;
그러나 써드파티 패키지가 아닌 것을 먼저 사용해보는게 좋겠다는 생각으로 &lt;code class=&quot;language-text&quot;&gt;drf TokenAuthentication&lt;/code&gt; 를 사용하기로 정했다.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.django-rest-framework.org/api-guide/authentication/#authentication&quot;&gt;1. Authentication&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/31600497/django-drf-token-based-authentication-vs-json-web-token&quot;&gt;2. stackoverflow&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://medium.com/chanjongs-programming-diary/django-rest-framework-drf-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C-jwt-%EA%B8%B0%EB%B0%98-authentication-%EC%84%B8%ED%8C%85%ED%95%98%EA%B8%B0-with-simplejwt-%EC%B4%88%EA%B8%B0-%ED%99%98%EA%B2%BD-%EC%84%B8%ED%8C%85-1-e54c3ed2420c&quot;&gt;2. 블로그&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://www.django-rest-framework.org/api-guide/authentication/#tokenauthentication&quot;&gt;2.1 drf TokenAuthentication 1&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://recordingbetter.com/drf/2017/08/02/Session-%EC%9D%B8%EC%A6%9D%EA%B3%BC-Token-%EC%9D%B8%EC%A6%9D&quot;&gt;2.1 drf TokenAuthentication 2&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://pronist.dev/143&quot;&gt;2.2 JWT&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://yceffort.kr/2021/05/drawback-of-jwt&quot;&gt;3. 선택 1&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://velog.io/@wildmental/Django-%EC%A0%91%EC%86%8D-%EC%9D%B8%EC%A6%9D-Built-in-Token-VS-JWTJSON-Web-Token-%EB%B9%84%EA%B5%90-%EB%81%9D&quot;&gt;3. 선택 2&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[깃 커밋 리셋하기]]></title><description><![CDATA[0. 서론 커밋할때 실수로 포함하지 말아야 할 파일을 포함했다. 해당 커밋에서 이 파일을 제거할 방법을 찾아보다가 커밋 전으로되돌리는 방법을 알게되어 정리한다. 1. git reset 위의 명령어는 최근의 커밋…]]></description><link>https://ohyunkyo.github.io/TIL/git/git-commit-reset/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/git/git-commit-reset/</guid><pubDate>Fri, 29 Jul 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;커밋할때 실수로 포함하지 말아야 할 파일을 포함했다. 해당 커밋에서 이 파일을 제거할 방법을 찾아보다가 커밋 전으로되돌리는 방법을 알게되어 정리한다.&lt;/p&gt;
&lt;h2&gt;1. git reset&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; reset --soft HEAD~1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 명령어는 최근의 커밋 1개를 취소하고 해당 커밋의 수정 내역(&lt;code class=&quot;language-text&quot;&gt;changes&lt;/code&gt;)을 다시 &lt;code class=&quot;language-text&quot;&gt;staged&lt;/code&gt; 상태로 만들어준다&lt;/p&gt;
&lt;h2&gt;99. git fork 에서 커맨드 라인 사용법&lt;/h2&gt;
&lt;p&gt;fork 에는 soft reset 기능이 없어서 아래 버튼을 눌러 콘솔창을 띄운 뒤 명령어를 입력했다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 337px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/d46f909436eca45e08e44bfde8b23792/f6b51/999-console-button.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 39.075630252100844%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABJklEQVQoz43R0W6CMBQG4L7/Y3nhNqPEC6cJtNAWKlBAhAJeDPiX1mnMMhebfDltetrT9BBjDB61bXuPVtd1bn30fZg4hkkS6DRFPwwoigKcc1wuFyilkOc5yO3gX+xF1ekEU5aol0ukux2a7RZ9GOLcddB5jrquXdEkSVBVFcjvF97YJJvgU4qTUmiDAF4UQVKKgTFwpXDY711O0zRYrT4Q8QjEVnhGCAGZJMiFQLFYIN5/In1/Q7rZgEoJwTmE4NBaQ8YSxzQFCYIAz1BKr3wf4XqN6Ac7HMDCEMztM5fDGIPnef//4aNm6HHue9TGINPaNcA2pSxL98IsyyClBMGrY76axwnTOGH8Gl2cp9lFaxgGED0VeI2+zwtrvrqt9VzATB2+Ae8mWT+h08FVAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;console-button&quot;
        title=&quot;console-button&quot;
        src=&quot;/TIL/static/d46f909436eca45e08e44bfde8b23792/f6b51/999-console-button.png&quot;
        srcset=&quot;/TIL/static/d46f909436eca45e08e44bfde8b23792/5ea4d/999-console-button.png 238w,
/TIL/static/d46f909436eca45e08e44bfde8b23792/f6b51/999-console-button.png 337w&quot;
        sizes=&quot;(max-width: 337px) 100vw, 337px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://codechacha.com/ko/git-undo-last-commit/&quot;&gt;마지막 커밋 되돌리기&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[drf 사용하여 API 만들기]]></title><description><![CDATA[0. 서론 장고 프로젝트를 생성하는것부터 간단한 API 를 만드는 과정을 정리한다.…]]></description><link>https://ohyunkyo.github.io/TIL/django-rest-framework/django-start-with-drf/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django-rest-framework/django-start-with-drf/</guid><pubDate>Fri, 22 Jul 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;장고 프로젝트를 생성하는것부터 간단한 API 를 만드는 과정을 정리한다.&lt;/p&gt;
&lt;h2&gt;1. 장고 프로젝트 생성&lt;/h2&gt;
&lt;p&gt;프로젝트의 &lt;code class=&quot;language-text&quot;&gt;root&lt;/code&gt; 로 사용될 디렉토리를 먼저 생성하고 그 안에서 프로젝트를 생성 하는 명령어를 실행한다.&lt;br&gt;
나는 프로젝트 이름을 &lt;code class=&quot;language-text&quot;&gt;config&lt;/code&gt; 로 정했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; ingredient-manage
$ &lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; ingredient-manage 
$ django-admin startproject config &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하고 나면 다음과 같은 구조의 디렉토리와 파일을 볼 수 있는데, 모든 프로젝트 관련 파일은 &lt;code class=&quot;language-text&quot;&gt;ingredient-manage&lt;/code&gt; 디렉토리에 위치한다. 이후 여기에서 &lt;code class=&quot;language-text&quot;&gt;app&lt;/code&gt; 을 추가하는 방식으로 개발을 진행할것이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ingredient-manage
├── config
    ├── __init__.py
    ├── asgi.py
    ├── settings.py
    ├── urls.py
    ├── wsgi.py
├── manage.py&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;2. IDE 설정&lt;/h2&gt;
&lt;p&gt;각 IDE 에 맞게 파이썬 인터프리터 및 테스트 환경을 설정해준다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/TIL/IDE/the-pycharm-i-know/&quot;&gt;Pycharm 설정 방법&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;3. django-rest-framework 설치&lt;/h2&gt;
&lt;p&gt;drf 를 사용하기 위해 필요한 패키지를 설치한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;$ &lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; ingredient-manage
$ pip &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; djangorestframework
$ pip &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; django-filter &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;4. app 생성하기&lt;/h2&gt;
&lt;p&gt;다음으로 app 을 하나 생성한다.&lt;br&gt;
각 기능별로 app 을 분리하여 재사용 할 수도 있지만 지금 단계에서는 하나의 app 에 모든 기능을 만들 예정이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;$ django-admin startapp management&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;5. settings.py 파일 설정하기&lt;/h2&gt;
&lt;h3&gt;5.1 INSTALLED_APPS&lt;/h3&gt;
&lt;p&gt;drf 와 방금 생성한 app 을 사용하기 위해 &lt;code class=&quot;language-text&quot;&gt;INSTALLED_APPS&lt;/code&gt; 에 drf 와 새로 생성한 app 을 추가했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;INSTALLED_APPS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;rest_framework&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;django_filters&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;management.apps.ManagementConfig&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;5.2 Internationalization&lt;/h3&gt;
&lt;p&gt;i18n 설정을 다음과 같이변경한다. 언어 코드와 타임존을 변경했고, DB 에 한국 시간(&lt;code class=&quot;language-text&quot;&gt;KST&lt;/code&gt;)을 저장하기 위해 &lt;code class=&quot;language-text&quot;&gt;USE_TZ&lt;/code&gt; 를 &lt;code class=&quot;language-text&quot;&gt;False&lt;/code&gt; 로 변경했다. 만약 &lt;code class=&quot;language-text&quot;&gt;True&lt;/code&gt; 상태라면 &lt;code class=&quot;language-text&quot;&gt;UTC&lt;/code&gt; 시간이 저장된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;LANGUAGE_CODE &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;ko-kr&apos;&lt;/span&gt;

TIME_ZONE &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Asia/Seoul&apos;&lt;/span&gt;

USE_I18N &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;

USE_L10N &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;

USE_TZ &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;5.3 secret 파일&lt;/h3&gt;
&lt;p&gt;나는 이번 장고 프로젝트를 github 의 public repository 에 업로드 할 예정인데, 이렇게 하면 패스워드나 키가 공개되어 문제가 발생할 수 있다.&lt;br&gt;
그래서 이런 중요한 정보는 별도로 다른 파일에 보관하고 &lt;code class=&quot;language-text&quot;&gt;settings.py&lt;/code&gt; 에서 그 파일을 불러오도록 할 것이다.&lt;/p&gt;
&lt;p&gt;먼저 &lt;code class=&quot;language-text&quot;&gt;django-secret.json&lt;/code&gt; 이라는 파일을 프로젝트 루트 디렉토리(&lt;code class=&quot;language-text&quot;&gt;ingredient-manage&lt;/code&gt;)에 생성한다. 그 다음 공개하지 않고 싶은 패스워드나 키를 추가한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;DJANGO_SECRET_KEY&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;DB_DEFAULT_ENGINE&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;DB_DEFAULT_NAME&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;DB_DEFAULT_USER&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;DB_DEFAULT_PASSWORD&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;DB_DEFAULT_HOST&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;DB_DEFAULT_PORT&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;PROD_ALLOWED_HOSTS&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그다음으론 이 파일을 읽은 뒤 적절한 위치에 적절히 호출하면 된다.&lt;br&gt;
나는 &lt;code class=&quot;language-text&quot;&gt;settings.py&lt;/code&gt; 파일의 &lt;code class=&quot;language-text&quot;&gt;BASE_DIR&lt;/code&gt; 옵션 바로 밑에서 &lt;code class=&quot;language-text&quot;&gt;django-secret.json&lt;/code&gt; 파일을 불러왔다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; json
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; pathlib &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Path

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exceptions &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ImproperlyConfigured

&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

BASE_DIR &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;__file__&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;resolve&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;parent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;parent

&lt;span class=&quot;token comment&quot;&gt;# get secret file&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;./django-secret.json&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    django_secret &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; json&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;loads&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;read&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_secret&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;setting&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; secrets&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;django_secret&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; secrets&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;setting&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; KeyError&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        error_msg &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Set the {0} enviroment varialble&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;setting&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; ImproperlyConfigured&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error_msg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 아래처럼 호출했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

SECRET_KEY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; get_secret&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;DJANGO_SECRET_KEY&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;SECRET_KEY&lt;/code&gt; 뿐 아니라 DB 정보도 같은 방식으로 호출하면 중요한 정보를 노출하지 않을 수 있다.&lt;/p&gt;
&lt;h3&gt;5.4 settings 분리하기&lt;/h3&gt;
&lt;p&gt;이제 &lt;code class=&quot;language-text&quot;&gt;settings.py&lt;/code&gt; 파일을 분리한다.  개발과 운영 환경을 다르게 유지하기 위한것인데, &lt;code class=&quot;language-text&quot;&gt;DEBUG&lt;/code&gt; 옵션 처럼 각 운영 환경에서 다른 값을 설정해야 하는 경우 필요한 작업이다.&lt;/p&gt;
&lt;h4&gt;5.4.1 python package 생성&lt;/h4&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 950px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/4b948afc15344ac8646347dd31d80d02/11b93/541-0-new-python-package.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 40.33613445378151%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB0klEQVQoz0WPy04UQQBF5weUtW5MjGyIIDAzPdOP6qrqd1c/pnua7pkJxhhMwISA+AWueWjiyoSfPQYIuri5u3PPHe0qg15+JO42SFNhRRkiL9i1PT64/r/sOR57nub9zOdgPGX/cMLOzg6H4wmO5zOxZswdj9Gbsc+eTBlXJ7xubnm3uuOluWaruGWruHlqc80L85NX8RXzpEKFCZYjmLuCqe0ytmwsx+NgYjGSSiOVQoQ50eqSaDjHMidM8xOm5imW+UIwXOGZDe2qpy4ziiIjTSPiWKOkw6LKUNJl5Pga21c4wmexqCirAq0lWvso7SOVwBMuJg9xs570/A/m8p784p7k7DezT794296wfXTHdv3jAahwpcaRmqxc0G+OyasGU7eYuiEpKjwdEaUZdlgRrL+jhm/o1RWqv8AqT9nPzzgovrKffH4CiiAiqQqCOCHJC4IkRegQW0ieB+PU4EYh8dDQtTWLpqIsDVkWI4SD8GwcZ87IERIRxqRNiQpCFl1Pv97QDatH6APQDyK6foUXRhTrga5fsxzW6CTD0yGuDHBkgO3r/4ahyVBhxHJYUTVL6rZ7tH2wlGFM2XZEgea4Lai7geXRQF7Vj2PPL2au4C+wyiQJQ345ZAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;new-python-package&quot;
        title=&quot;new-python-package&quot;
        src=&quot;/TIL/static/4b948afc15344ac8646347dd31d80d02/906b5/541-0-new-python-package.png&quot;
        srcset=&quot;/TIL/static/4b948afc15344ac8646347dd31d80d02/5ea4d/541-0-new-python-package.png 238w,
/TIL/static/4b948afc15344ac8646347dd31d80d02/466da/541-0-new-python-package.png 475w,
/TIL/static/4b948afc15344ac8646347dd31d80d02/906b5/541-0-new-python-package.png 950w,
/TIL/static/4b948afc15344ac8646347dd31d80d02/11b93/541-0-new-python-package.png 1124w&quot;
        sizes=&quot;(max-width: 950px) 100vw, 950px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;config&lt;/code&gt; 디렉토리에 &lt;code class=&quot;language-text&quot;&gt;settings&lt;/code&gt; 라는 이름의 &lt;code class=&quot;language-text&quot;&gt;Python Package&lt;/code&gt; 를 생성한 뒤 그 내부에 &lt;code class=&quot;language-text&quot;&gt;base.py&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;local.py&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;prod.py&lt;/code&gt; 파일 세개를 추가한다.&lt;br&gt;
이때 파일 구조는 아래 사진과 같다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 494px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/d5c149e18c7b484c6709dafc3560a4f4/d72d4/541-1-directory-tree.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 124.36974789915966%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAABYlAAAWJQFJUiTwAAADRklEQVQ4y5VVSY/bNhjVvT0UObRBs/RQdEHbIAky40X7au2kKGqXvHQ6aRKgaP7/6QWknRknsCeZw7Mlknp63/sWKQ9eOniiJpgVa/xs5fjNLfCLTfBsxfFnUMrrn7RErv/qUHn/RI3x3XMbDy98/HDh4fE8wI+zAI/mAZRvXvj4fplB79/hj6iDP73FZbHFotxBra7wPJvwe9hCb64xL/9GvPsPfyUDvn3h4qme4eEixlM9xWM1wSM1gbIwLKiWi7lhg/ZbkHZEEGdIWYWYlnilGni11PFyoUlcqAYuVQML08ZMtyQuNevmWtEsG4btwnQ8xIQhKyvwpkOSU/CmhRdGsDxf7hu2I8/qtgPNcqCfgKKaDlTTljBdD2FGsX77P8qqRtuPaIcJ26t/4K0iiGgWurk/b90+t8f+XhE/4m3a4YD4X+oGsnZEWFBohgVWt1glmdxPSQHT9XH83DGUz8kEFqqBYjOCTwRBmCAhhbRgFaeouwFOEGJpWHcTfqJQM5BPE+pdi2Fco6xbsKoBYRyXqn5z7pRK5dRbFpoJ2jfgPUFGS+RFKcnCQ9jnyM4qlISbCfWmAOO1zHrBa+nfx1Dv5eF8qSEfhIc1aFFKMgHh4TnvzioUNaY7EeKGgw8pcsoR5wRZwT4hFGXyRcKlYcIKYvTv/4XrGYjTAmXTwvZXSAiVod9PoWHB9EK0Vx0II8hF+2VEJsWPErir6Kx3ZxRaUmH7ZgSvC3TjBmXdIGclLpYaZppxY83XZVko9CPw1zvwmqHuRtnPVdfLpNCyup9CQWj5EZrrESlJkOSFrD3KK4RpLrvli4THB2TIfoz23RaUZSh4IxWKLM9UXQ6Grwr5puUOCrvrCRnJQFglOySjDIbj3anspELV3HtYvW5AihhVN4JVe+8E4eeqTvayWLTcAI6/Qn/1Bs16B1Zy1P2Iqu3lPORth35awwvj23l4pqeV442IMDn6oyyXEOUi+jdKcwkxtsQstLwAuu3ePW3mmg7aDKiGLZpuQNOPEqKwu3GSauvD+rjZyk/Dqa5RbieMgawbQccehDJQXsuiFkkRneIEK0nwUdnZkI9nYNJwVGOEjDCQspKqBKkoavcwpU99Mo4JPwAuN4E789J9zwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;directory-tree&quot;
        title=&quot;directory-tree&quot;
        src=&quot;/TIL/static/d5c149e18c7b484c6709dafc3560a4f4/d72d4/541-1-directory-tree.png&quot;
        srcset=&quot;/TIL/static/d5c149e18c7b484c6709dafc3560a4f4/5ea4d/541-1-directory-tree.png 238w,
/TIL/static/d5c149e18c7b484c6709dafc3560a4f4/466da/541-1-directory-tree.png 475w,
/TIL/static/d5c149e18c7b484c6709dafc3560a4f4/d72d4/541-1-directory-tree.png 494w&quot;
        sizes=&quot;(max-width: 494px) 100vw, 494px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h4&gt;5.4.2 base.py 설정&lt;/h4&gt;
&lt;p&gt;다음으로는 &lt;code class=&quot;language-text&quot;&gt;settings.py&lt;/code&gt; 파일의 내용을 모두 복사해 &lt;code class=&quot;language-text&quot;&gt;base.py&lt;/code&gt; 파일에 붙여넣은 뒤 삭제한다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 496px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/c2c8d1dde2a36c0f5f11e58d71d538bb/bb630/542-directory-tree.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 113.02521008403362%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAADB0lEQVQ4y5WUSY/bRhCFhQA555DlbCAB7CA2HCPRSJS4iSIlcV+abFKURrPIkxg5+v8Dn9Eta6JJNDP2oYAmuvi6XlW9N/j2bcB34xTn+iMvwy2j5o63xQ0j+RcXzR2/pVf8suz5vbzlD/Eeo/vA6/SKb157/DCOdfxoxPxkJHw/ihi8GM742fAZLkuGUc1C7pjGNVYqMVPJu3nCGzdkuMgZLjLcTDJaFbwYurya+LyaHuLXacDLic/Aclxcb47jzpDba9rdLVmeU9UN/WaL4825MCaMpyYT02Y0NTFMC9t1MZ2TsF0U1mBiz5jYLoblYns+fpTQ7z8Q5SVV01LUDVklCMIYw3YxXY+pc/jn8O/DGKgLlaDCns1xgyV521PULVXTEyYZcr1hEcWMTJuxaWNYzgnowxgcD6cJf16MCNs1yVZoKqrKvKo1g6ZbE6YZ48+g/43B8XBaqWE6xLVAXpYkeUmUFURpTpTlLOMUZx48yD8LeBrG1CbpOrp9jaglbb899FM0jKbWA0ZfCGgR1pJqJ8lLQVFL0rLSlT4F9j/AY5KmLCViVxDGqaYdZ4UO45HePdnD0dggXW9o3vcUlaDu1lSy1cCnE/6iCtWerUSHF64oSl/3zV9FLKNEU34K7Aygg+0t6f+5JEp9grCgauQ9mFz3+sGvAHSxZgHl7RWiFQjZkZVC76ACUnS/cigOlreg2fckRURZt8R5oXt3lNyzlE8vD5QXNH9fk4mUQrSUjdRVKsk9B3YG0MXyAuSNqjAmySttDHFeatk9B3ZP+egchmljzgLE3ZqsWlG3G+q205NWcjtW+RR1XaF63fF85G5Pe7WnEgLRtHr/1GSFbGm6XpvCcTCPDWdw3L2p7bJMC+KyIUxzVkmq5aYoK0NQNjYLlliup/MfW5/7KSvRp6JFrC/pNlvqdk23udT7p85KKepbGcVmd60fOCfDwb/6tQgrSdZvSItSD0JNWOlXgQZhpKty5j7WbP682yjLipoGeZNo/SqHUZUqt1YLvowTPZRTdz7Xw0/WBztjMWaERgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;directory-tree&quot;
        title=&quot;directory-tree&quot;
        src=&quot;/TIL/static/c2c8d1dde2a36c0f5f11e58d71d538bb/bb630/542-directory-tree.png&quot;
        srcset=&quot;/TIL/static/c2c8d1dde2a36c0f5f11e58d71d538bb/5ea4d/542-directory-tree.png 238w,
/TIL/static/c2c8d1dde2a36c0f5f11e58d71d538bb/466da/542-directory-tree.png 475w,
/TIL/static/c2c8d1dde2a36c0f5f11e58d71d538bb/bb630/542-directory-tree.png 496w&quot;
        sizes=&quot;(max-width: 496px) 100vw, 496px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;base.py&lt;/code&gt; 파일은 모든 환경에서 공통으로 사용되는 설정을 포함한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;5.4.3 local.py, prod.py 설정&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;local.py&lt;/code&gt; 파일과 &lt;code class=&quot;language-text&quot;&gt;prod.py&lt;/code&gt; 파일은 각각 개발, 운영 환경에서만 필요한 설정을 포함하면 되는데, 나는 아래처럼 설정했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# local.py&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 기본 설정 그대로 사용&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;base &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# prod.py&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 운영서버에서는 DEBUG 를 False 로 설정해야 한다&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;base &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# SECURITY WARNING: don&apos;t run with debug turned on in production!&lt;/span&gt;
DEBUG &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;5.4.4 local.py 를 사용하여 테스트서버 실행하기&lt;/h4&gt;
&lt;p&gt;방금전에 생성한 &lt;code class=&quot;language-text&quot;&gt;local.py&lt;/code&gt; 를 사용하여 테스트 서버를 실행한다.&lt;br&gt;
아래 사진처럼 &lt;code class=&quot;language-text&quot;&gt;Environment variables&lt;/code&gt; 옵션에 &lt;code class=&quot;language-text&quot;&gt;DJANGO_SETTINGS_MODULE=config.settings.local&lt;/code&gt; 를 추가해주면 이 설정파일로 테스트 서버가 실행된다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 950px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/2e43cc180ed7f5f95eee268ae366738e/1e5d2/544-django-server-settings.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABx0lEQVQ4y4VTy3LTQBD0BwEnV1LWWtr3SlqtLMsECEkMX8D/H5vqsWQnEIpD16hmZ3p6Htp8nQu6U0ZKPawPcCHCxgTtI2I/4On8E4/PZ3x/+YGHxyeELsOGBBtbmMVeERI2d2FAO3+DLSdsTcKHnUbjI1xq0ZUR7VCQ8gDtA3a1lkSSutShdh6+7RG6Xny19dh8qiPuQ8bW9ti6Hh+VQ6Ud+nJAm4sQ740TAoLqqYwdrFYQImrrsGmMhaob7BstqLWBaowEUY3SVpQ5UdYjdhmh7WEWwguitCsKWb1qLCq9oDECtuJTJ5ZkjGMC0Tgi3Kz10C6gNm4lNKJELYRKm2V+oySQZC30P/yTMOUipKtvv7wz/g3oW/x8f5eQLVAdN8zFMKYtI8b5hDLNGKYZ+TAJhumI4XCU4tz6+4QuiEKCc6QvlHwZQy7Xs7nOOF1u8tVS3hLygUfNjTKQPp4LE11LkguRv353CH2Wy1gItZyKajSqWgvhpeVRlDCQqkjS+HC7veWbHd0UxoIqTVBxhEpHVK5btnyQGa5t5nESQt4kFf9tDXbcsu8ylPHyd1SrfTWCP7HO+Pj5ixQw3kOFjLuHX7gvZ/wGKvLPSBEHrNoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;django-server-settings&quot;
        title=&quot;django-server-settings&quot;
        src=&quot;/TIL/static/2e43cc180ed7f5f95eee268ae366738e/906b5/544-django-server-settings.png&quot;
        srcset=&quot;/TIL/static/2e43cc180ed7f5f95eee268ae366738e/5ea4d/544-django-server-settings.png 238w,
/TIL/static/2e43cc180ed7f5f95eee268ae366738e/466da/544-django-server-settings.png 475w,
/TIL/static/2e43cc180ed7f5f95eee268ae366738e/906b5/544-django-server-settings.png 950w,
/TIL/static/2e43cc180ed7f5f95eee268ae366738e/010c2/544-django-server-settings.png 1425w,
/TIL/static/2e43cc180ed7f5f95eee268ae366738e/1e5d2/544-django-server-settings.png 1630w&quot;
        sizes=&quot;(max-width: 950px) 100vw, 950px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;운영서버를 실행할 때에는 gunicorn 에 &lt;code class=&quot;language-text&quot;&gt;DJANGO_SETTINGS_MODULE=config.settings.prod&lt;/code&gt; 라는 옵션을 추가하면 된다.&lt;/p&gt;
&lt;h2&gt;6. drf 시작하기&lt;/h2&gt;
&lt;p&gt;커스텀한 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 모델을 api 를 통해 조회하는 예제를 만들어봤다.&lt;/p&gt;
&lt;h3&gt;6.1 /config/urls.py&lt;/h3&gt;
&lt;p&gt;management app 의 &lt;code class=&quot;language-text&quot;&gt;urls.py&lt;/code&gt; 파일을 불러오는 구문을 추가한다&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;
urlpatterns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;admin/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; admin&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;site&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urls&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; include&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;management.urls&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;6.2 /management/urls.py&lt;a id=&apos;6.2-/management/urls.py&apos;&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;rest_framework.routers&lt;/code&gt; 의 &lt;code class=&quot;language-text&quot;&gt;DefaultRouter&lt;/code&gt; 를 사용해 URL 패턴을 정의한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urls &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; include
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;routers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; DefaultRouter

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;views &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; api_views

router &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DefaultRouter&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;register&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;r&apos;user&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; api_views&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;UserModelViewSet&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; basename&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;user&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;


urlpatterns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# api&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;api/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; include&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urls&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;6.3 /management/models.py&lt;/h3&gt;
&lt;p&gt;장고에서 사용될 모델을 정의한다. 나는 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 모델을 커스텀하여 사용하기로 했기 때문에 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 클래스를 작성했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;contrib&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;auth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;base_user &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; AbstractBaseUser
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; models


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;AbstractBaseUser&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    username &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
    email &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;EmailField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    USERNAME_FIELD &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;email&apos;&lt;/span&gt;
    REQUIRED_FIELDS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        db_table &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;auth_user&apos;&lt;/span&gt;
        verbose_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;사용자&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;6.4 /management/filters.py&lt;/h3&gt;
&lt;p&gt;drf 의 &lt;code class=&quot;language-text&quot;&gt;filter&lt;/code&gt; 는 API 가 쿼리셋에서 반환하는 항목을 제한 할 수 있다.&lt;br&gt;
예를들어, 특정 날짜에 가입한 회원만 반환한다던가 몇살 이상 회원만 반환 하도록 할 수 있다.&lt;/p&gt;
&lt;p&gt;지금은 &lt;code class=&quot;language-text&quot;&gt;filter&lt;/code&gt; 의 기능이 필요 없지만 사용가능하도록 간략히 작성했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; django_filters
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django_filters &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; FilterSet

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; User


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserFilter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;FilterSet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
		model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User
		fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;email&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;6.5 /management/serializers.py&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;serializers&lt;/code&gt; 는 쿼리셋이나 모델 인스턴스를 파이썬 데이터 형태로 변경해준다.&lt;br&gt;
또한, 모델 인스턴스의 특정 필드만을 반환하거나 데이터 형식(날짜 등)을 변환하여 반환 하도록 할 수 있다.&lt;/p&gt;
&lt;p&gt;아래 예제는 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 모델에서 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;email&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;password&lt;/code&gt; 필드를 반환하도록 만든 &lt;code class=&quot;language-text&quot;&gt;serializers&lt;/code&gt; 이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; serializers

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; User


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;email&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;password&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;6.6 /management/views/viewsets.py&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;viewset&lt;/code&gt; 는 클래스 형태의 뷰이다. &lt;code class=&quot;language-text&quot;&gt;.get()&lt;/code&gt; 이나 &lt;code class=&quot;language-text&quot;&gt;.post()&lt;/code&gt; 같은 메서드 대신에 &lt;code class=&quot;language-text&quot;&gt;.list()&lt;/code&gt; 나 &lt;code class=&quot;language-text&quot;&gt;.create()&lt;/code&gt; 같은 액션을 지원한다.&lt;/p&gt;
&lt;p&gt;아래 예제는 지금까지 생성한 &lt;code class=&quot;language-text&quot;&gt;UserFilter&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 모델, &lt;code class=&quot;language-text&quot;&gt;UserSerializer&lt;/code&gt; 를 사용하는 &lt;code class=&quot;language-text&quot;&gt;Viewset&lt;/code&gt; 예제이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django_filters&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; DjangoFilterBackend
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;viewsets &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ModelViewSet

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; management&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;filters &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; UserFilter
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; management&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; User
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; management&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; UserSerializer


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserModelViewSet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ModelViewSet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    filter_backends &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;DjangoFilterBackend&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    filterset_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; UserFilter
    serializer_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; UserSerializer&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;7. 결과 확인&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;#6.2-/management/urls.py&quot;&gt;6.2&lt;/a&gt; 에서 등록한 대로 주소창에 입력해보면 아래 사진처럼 API 화면을 확인할 수 있다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ex) example.com/api/user/&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 950px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/c6878efa9bdf2fa3be75858e9984f460/1cc3c/700-drf-page.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50.42016806722689%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABGElEQVQoz53R3UrDMBjG8Vzt3IfWyxI88A48VBA88kAQBuucol1X2tomefNR/pLOHW/z4McTSPLkhajrLCPJsozFYsFkMjnDBbPplMv53tV8hrJtS1fXNE2D0ZoY4+lCoOkt67LjY9ex2fWopm3ZVRVVVVHXNSJCjMPRspA44XVdcvOw4u4p5/ZxhSqKLV/fW3ot9NpijGCNjHmUdXjnIYa9IaLy/J1l/snnthn9dAZrTyw0gv4bJNFGUCIOEY93Ae/DmO5cPqUf76thGPiXGMcMIriuQ2uNtRZljCEpy3L8FO89zrnTiWC1xlmNF4tKzUlRFGNhOpR++hzeCW+bknVRo9KYqTBtHNZp4sNDpwjOcv+y4XlZ8AtVXOYTKdm/VwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;drf-page&quot;
        title=&quot;drf-page&quot;
        src=&quot;/TIL/static/c6878efa9bdf2fa3be75858e9984f460/906b5/700-drf-page.png&quot;
        srcset=&quot;/TIL/static/c6878efa9bdf2fa3be75858e9984f460/5ea4d/700-drf-page.png 238w,
/TIL/static/c6878efa9bdf2fa3be75858e9984f460/466da/700-drf-page.png 475w,
/TIL/static/c6878efa9bdf2fa3be75858e9984f460/906b5/700-drf-page.png 950w,
/TIL/static/c6878efa9bdf2fa3be75858e9984f460/010c2/700-drf-page.png 1425w,
/TIL/static/c6878efa9bdf2fa3be75858e9984f460/a88f6/700-drf-page.png 1900w,
/TIL/static/c6878efa9bdf2fa3be75858e9984f460/1cc3c/700-drf-page.png 2322w&quot;
        sizes=&quot;(max-width: 950px) 100vw, 950px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.djangoproject.com/ko/4.0/intro/tutorial01/&quot;&gt;1. django 튜토리얼&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://forum.djangoproject.com/t/project-naming-conventions/339/12&quot;&gt;1. 프로젝트 이름을 config 로 사용한 이유&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://www.django-rest-framework.org/api-guide/routers/&quot;&gt;6.2 Routers&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://www.django-rest-framework.org/api-guide/filtering/&quot;&gt;6.4 Filtering&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://www.django-rest-framework.org/api-guide/serializers/&quot;&gt;6.5 Serializers&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://www.django-rest-framework.org/api-guide/viewsets/&quot;&gt;6.6 Viewsets&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[장고 user 모델 커스텀하기]]></title><description><![CDATA[https://whatisthenext.tistory.com/128
https://velog.io/@iedcon/AbstractBaseUser%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-Django-%EC%BB%A4%EC%8A…]]></description><link>https://ohyunkyo.github.io/TIL/tmp/custom-user-model/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/tmp/custom-user-model/</guid><pubDate>Tue, 05 Jul 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://whatisthenext.tistory.com/128&quot;&gt;https://whatisthenext.tistory.com/128&lt;/a&gt;
&lt;a href=&quot;https://velog.io/@iedcon/AbstractBaseUser%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-Django-%EC%BB%A4%EC%8A%A4%ED%85%80-%EC%9C%A0%EC%A0%80-%EB%AA%A8%EB%8D%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0&quot;&gt;https://velog.io/@iedcon/AbstractBaseUser%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-Django-%EC%BB%A4%EC%8A%A4%ED%85%80-%EC%9C%A0%EC%A0%80-%EB%AA%A8%EB%8D%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[젠킨스 pipeline 에서 빌드 후 조치 실행하기]]></title><description><![CDATA[0. 서론 현재  의 빌드 후 조치 항목에서  로 알림을 보내고 있다.  이것과 동일한 알림을 파이프라인에서 보내도록 하기 위해 찾아봤다. 1. post 사용하기 아래 예제처럼  블록 뒤  블록을 추가하여 원하는  이 실행되도록 설정해준다…]]></description><link>https://ohyunkyo.github.io/TIL/devops/post-build-in-jenkins-pipeline/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/devops/post-build-in-jenkins-pipeline/</guid><pubDate>Fri, 10 Jun 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;현재 &lt;code class=&quot;language-text&quot;&gt;freestyle project&lt;/code&gt; 의 빌드 후 조치 항목에서 &lt;code class=&quot;language-text&quot;&gt;notify.events&lt;/code&gt; 로 알림을 보내고 있다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 668px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/cb1a2c6e7ffcd1b25af91fa22b813769/74866/000-current-notiry.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 123.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACwklEQVQ4y52Uy27VSBCG/YA8x4gXYDcakmFYQJYjMaBhiWY7rBCJWABC0bzAaESCOLn4+Fzc1d1u293ty8k/qrJPBMlJSGLpU9mt9u/qv6qcHB4c4uTkBJPJEYgITdMghIAQ4o+JUfbGGBGbRmJSFAXy+Rz5bIbCaHQxoA0ebQgD/Nw0m4kRPQC7vw+9+xYtgMQYg3/+/Q8HOSGtPGgFqP5sgO/bHsq6a8mVxnJJKGuPJC9KpL//AfdwG+bRY9DWr6CtR6Dt30A//wJ69gJkS1DpQa7eiC49lPOYzBQSW9Y4fv8J2ZtdTN++Q7Zm9x2yN3vIPu4jyw0yZa9kRhbT3GCmLJKqrJAZgwbYSOTIho+mDwXbTNNEJFwtTSQY0jBEoFzBag3Kc1hjoY0RqrpG1/Vo2xZt213Ch8CCAVxp50qJlrGF3BtrZZ3XCudEcJ1pjM0lRLCqKulDRYTVaoW+78+5+Nx13XD8GM/jRRLvPZZ5DqUUNGmJLM5HzHmdSCCtwS1W1/U3YoO3bAFbIYLBe2it5eV8uRTB5RizLAPxh7SG1oNwWbrBBrHDCSzIV9O2SKRyMYg/fPy6ruDrGpw5s87oJhfvE0FJefRo7dOaOEbe00h1r2KsMgtyRReLBebzucSwweybIkXhvwx7yL6sj3gXRJB9Oz09RZpOpe/W2YW7sD7y2Whqv1pJ+e/KMCnew9qxx7yXr/iRcAcS6yocTqaYpqeywFUeGnWIt/bQVg2OFiWyaSrFccUwx3Lv3JUjdpFzQXIRX7ICXw4/4+vXibQOT8g0TaWFvt18XWbfCR6kViqtFIFICzzXPL+3Fuz6DqWPMGoGUgtMsxSLfI6T9Bi2sOLjdWKXBJ+/3sVPT1/i/s6f+GvvA5qmxpJyuMqCjJI/yq0yfPLqb9x7sCO8eL2Hrg2YLRYoa4eitOM8xxsL/g8xKXheltE3BgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;current-notify&quot;
        title=&quot;current-notify&quot;
        src=&quot;/TIL/static/cb1a2c6e7ffcd1b25af91fa22b813769/74866/000-current-notiry.png&quot;
        srcset=&quot;/TIL/static/cb1a2c6e7ffcd1b25af91fa22b813769/5ea4d/000-current-notiry.png 238w,
/TIL/static/cb1a2c6e7ffcd1b25af91fa22b813769/466da/000-current-notiry.png 475w,
/TIL/static/cb1a2c6e7ffcd1b25af91fa22b813769/74866/000-current-notiry.png 668w&quot;
        sizes=&quot;(max-width: 668px) 100vw, 668px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이것과 동일한 알림을 파이프라인에서 보내도록 하기 위해 찾아봤다.&lt;/p&gt;
&lt;h2&gt;1. post 사용하기&lt;/h2&gt;
&lt;p&gt;아래 예제처럼 &lt;code class=&quot;language-text&quot;&gt;stages&lt;/code&gt; 블록 뒤 &lt;code class=&quot;language-text&quot;&gt;post&lt;/code&gt; 블록을 추가하여 원하는 &lt;code class=&quot;language-text&quot;&gt;step&lt;/code&gt; 이 실행되도록 설정해준다&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jenkinsfile&quot;&gt;&lt;pre class=&quot;language-jenkinsfile&quot;&gt;&lt;code class=&quot;language-jenkinsfile&quot;&gt;pipeline {
    agent any
    tools {
        git &amp;quot;git&amp;quot;
    }
    stages {
        stage(&amp;#39;prepare&amp;#39;) {
            steps {
                git branch: &amp;quot;ci-cd-settings&amp;quot;, url: &amp;#39;https://github.com/ohyunkyo/inventory-manage-back.git&amp;#39;                
            }
        }
        stage(&amp;#39;test&amp;#39;) {
            steps {
                sh &amp;quot;pip install -r requirements.txt&amp;quot;
                sh &amp;quot;python3 manage.py makemigrations --settings=config.settings.prod&amp;quot;
                sh &amp;quot;python3 manage.py migrate --settings=config.settings.prod&amp;quot;
                sh &amp;quot;python3 manage.py test --settings=config.settings.prod&amp;quot;
            }
        }
        stage(&amp;#39;deploy&amp;#39;) {
            steps([$class: &amp;#39;BapSshPromotionPublisherPlugin&amp;#39;]) {
                sshPublisher(
                    continueOnError: false, failOnError: true,
                    publishers: [
                        sshPublisherDesc(
                            configName: &amp;quot;inventory backend&amp;quot;,
                            verbose: true,
                            transfers: [
                                sshTransfer(
                                    sourceFiles: &amp;quot;**&amp;quot;,
                                    removePrefix: &amp;quot;&amp;quot;,
                                    remoteDirectory: &amp;quot;deploys&amp;quot;,
                                    execCommand:&amp;quot;cd /home/ec2-user/deploys/; \
                                    sudo docker-compose up -d; &amp;quot;
                                )
                            ]
                        )
                    ]
                )
            }
        }
    }
    post {
        always {
    	    notifyEvents (
    	        token: &amp;quot;notify.event token&amp;quot;,
    	        message: &amp;quot;&amp;lt;a href=&amp;#39;${env.JOB_URL}&amp;#39;&amp;gt;${env.JOB_NAME}&amp;lt;/a&amp;gt;: #&amp;lt;a href=&amp;#39;${env.BUILD_URL}&amp;#39;&amp;gt;${env.BUILD_NUMBER}&amp;lt;/a&amp;gt; 에 대한 결과: &amp;lt;b&amp;gt;${currentBuild.result}&amp;lt;/b&amp;gt;&amp;lt;br/&amp;gt;&amp;lt;br/&amp;gt;&amp;lt;a href=&amp;#39;${env.BUILD_URL}console&amp;#39;&amp;gt;console log&amp;lt;/a&amp;gt;&amp;quot;
    	    )
        }
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;2. 빌드 실행 후 알림 확인하기&lt;/h2&gt;
&lt;p&gt;이제 빌드를 실행하면 모든 &lt;code class=&quot;language-text&quot;&gt;stage&lt;/code&gt; 의 작업이 끝나고 난 후 결과를 텔레그램으로 받을 수 있다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 281px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/d1bbbafb38add30893f0cdc94d9c3e6b/6b1e2/200-telegram-chat.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 27.3109243697479%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABG0lEQVQY01WQ/U6CcBSGvQGdpCIME1C+YiCkGIQfEDLbyjRdrtb938fT/NVa/fHsvHt39uzsNNqqjeqmXE8KBuEaPVzgJBVGVHAzfyDMNgTphuCuwp2VAm9WEGQ1QVrTH8c0ZZNWz6AlmzTaqsUw3uCV77jrM/5yR1y+4uZ7kuKZ5eOJtHphsT2S1Qey+kj5dKY+fFLtPtDchGbvj1DSXPrjW3pGKOgaEzp6QFcP6FyyEdExI7o/XLorPUQaBkjDEHkcC1Hz90LFwphtcVYnrPyAne+xFwfc9Zt4g2JNUZ1EoNgzBn6GNS0ZRSuMcCn6f0JJc8Si6mVofo7m34s5CFYodkLPnCCPIsEla94cI8wZ+pmQKlb8I/sWfgH58ZULNx3USwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;telegram-chat&quot;
        title=&quot;telegram-chat&quot;
        src=&quot;/TIL/static/d1bbbafb38add30893f0cdc94d9c3e6b/6b1e2/200-telegram-chat.png&quot;
        srcset=&quot;/TIL/static/d1bbbafb38add30893f0cdc94d9c3e6b/5ea4d/200-telegram-chat.png 238w,
/TIL/static/d1bbbafb38add30893f0cdc94d9c3e6b/6b1e2/200-telegram-chat.png 281w&quot;
        sizes=&quot;(max-width: 281px) 100vw, 281px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;99. 끝나고 나서&lt;/h2&gt;
&lt;p&gt;각 위치에서 변수를 사용하는 방법이 모두 달랐다.&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;notifyEvents&lt;/code&gt; 스탭에서 사용하는 변수 명에 대한 정보를 찾을수가 없어서 조금 애를 먹었다.&lt;br&gt;
결국엔 원하는 정보를 얻긴 했지만 전체 변수에 대한 설명이 있는 페이지가 있었으면 좋았을것 같다.(있는데 못찾은걸수도 있음)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;2022-06-14 : &lt;a href=&quot;https://www.jenkins.io/doc/book/pipeline/getting-started/#global-variable-reference&quot;&gt;https://www.jenkins.io/doc/book/pipeline/getting-started/#global-variable-reference&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://medium.com/@gustavo.guss/how-to-do-post-build-in-jenkins-pipeline-d1e7233909b8&quot;&gt;https://medium.com/@gustavo.guss/how-to-do-post-build-in-jenkins-pipeline-d1e7233909b8&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://www.jenkins.io/doc/pipeline/tour/post/&quot;&gt;https://www.jenkins.io/doc/pipeline/tour/post/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[CI/CD 구조 재구축]]></title><description><![CDATA[0. 서론  정리 도중 도커 허브에 이미지를 업로드 할 필요성이 없다고 느껴졌다. 그래서 도커 허브에 이미지를 업로드 하는 과정을 뺀 구조로 변경했다.…]]></description><link>https://ohyunkyo.github.io/TIL/devops/ci-cd-structure-rearchitect/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/devops/ci-cd-structure-rearchitect/</guid><pubDate>Thu, 09 Jun 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;젠킨스를 사용한 장고 배포&lt;/code&gt; 정리 도중 도커 허브에 이미지를 업로드 할 필요성이 없다고 느껴졌다.&lt;br&gt;
그래서 도커 허브에 이미지를 업로드 하는 과정을 뺀 구조로 변경했다.&lt;/p&gt;
&lt;h2&gt;1. 기존 구조&lt;/h2&gt;
&lt;p&gt;기존에는 도커 허브에 이미지를 업로드 하고 배포서버에서 그 이미지를 기반으로 컨테이너를 생성했다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 641px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/8194760cf6bfd24c8591723abef54212/c7dcc/100-previous-strucutre.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 62.60504201680672%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABk0lEQVQ4y42Tx6oDMQxF/f/fM3+QTRYTSGFI7733OkluOAI9hizCMwjL19K1msNyuVS9Xtd0OhX6YrHQeDxWq9UyqdVqajabajQa6nQ6arfbmkwmZrdardTv9+1uv98rl8spPB4PrddrXa9XXS4XHY9HnU4nc+CB2+2m8/lswhnh/nA4GAYRtu/3W3EcKwBiABGEnCHnjA6h635PEOCv10vZVS6XFXa7nTabjbbbre2kDkYZRqOR6aRKel4SHoQ4TVMjej6ftpdKJQVe4QKQ/X6/28tEgaATDTq1m8/ndsbOCT1SI8yGjAHG34uIICR6IoTsJyEF/SYEc/HG0E06T015wFN1/58RuhE7EeLMOBGhlwYce/cxQi69Xi5ZQhYO2EFIc2azmQaDgUXc7XbV6/Vs9IrFogIK3fQukg4EYF4vZo2Uh8OhNcZn1ueQRrGMkBlkNBhUxOuDePFxgoAdcdyHnWixN0L9Y30PcBYnfb4mq1qtKtA1agHIv02SRFkMqVQqf//ZceyQQqGgfD5veBRF+gAybt6+MRW6iwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;previous-strucutre&quot;
        title=&quot;previous-strucutre&quot;
        src=&quot;/TIL/static/8194760cf6bfd24c8591723abef54212/c7dcc/100-previous-strucutre.png&quot;
        srcset=&quot;/TIL/static/8194760cf6bfd24c8591723abef54212/5ea4d/100-previous-strucutre.png 238w,
/TIL/static/8194760cf6bfd24c8591723abef54212/466da/100-previous-strucutre.png 475w,
/TIL/static/8194760cf6bfd24c8591723abef54212/c7dcc/100-previous-strucutre.png 641w&quot;
        sizes=&quot;(max-width: 641px) 100vw, 641px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;2. 현재 구조&lt;/h2&gt;
&lt;p&gt;어차피 deploy 과정에서 파일을 복사하니, 굳이 도커허브에 이미지를 업로드 하지 않고 복사한 파일로 컨테이너를 실행하도록 변경했다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 641px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/dfc4ff5371c2732ec3fccf449ba22e92/c7dcc/200-current-strucutre.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 62.60504201680672%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABi0lEQVQ4y3WTyY7CQAxE8/9/xTUHyJGwEyAEkrAvYa3Rs+RRi2FasuJ2V5fLbSeqqkq9Xk95ngt/vV5rsVhoMBhoOByq2+3aeZqmGo/HGo1GhgUHfjqdqt/v63A4qNVqKbrf76rrWpfLxYyD0+lkF8qyVNM0tj+fz7bHjsej4YjtdjvDvt9vxXGsiCAXMAjZhyT4EOA7FhHEX6+XwpUkiSIybDYbbbdb+y6XS8tKifP53HzKRNlqtbKvV/N8Po3Iv51ORxFZyEjw8XjodrvJYxg+avBns5klZA8OPMuVGmEoGVLAn+t6vRphlmXWMMjA/UvIg7IAOCExNwg5Qx0lO6GX6ve/KuRyCAoJ6SZvjVpIiUPsIozQ383fDD8kZHl5NAmFRVFY+cznZDIxY/Ta7bYiOguQIQXMfEFADEUk2O/3NjLEKBtl3mnO6P6vQoAEfRYx7ziGauaQJCTD9ziEiKD7xP68IWUC/FzfOu/DjTp+UTpthATJRBmoQy0x9m4Md7h3tRjPwr9NHMIfZjDlgbwYmCgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;current-strucutre&quot;
        title=&quot;current-strucutre&quot;
        src=&quot;/TIL/static/dfc4ff5371c2732ec3fccf449ba22e92/c7dcc/200-current-strucutre.png&quot;
        srcset=&quot;/TIL/static/dfc4ff5371c2732ec3fccf449ba22e92/5ea4d/200-current-strucutre.png 238w,
/TIL/static/dfc4ff5371c2732ec3fccf449ba22e92/466da/200-current-strucutre.png 475w,
/TIL/static/dfc4ff5371c2732ec3fccf449ba22e92/c7dcc/200-current-strucutre.png 641w&quot;
        sizes=&quot;(max-width: 641px) 100vw, 641px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[젠킨스 서비스 컨테이너 생성시 쉘 스크립트 실행되도록 하기]]></title><description><![CDATA[0. 서론 도커허브의 젠킨스 이미지를 사용하여 젠킨스 서비스가 포함된 컨테이너를 시작했다. 그리고 해당 컨테이너의  쉘을 실행한 뒤, 각 Job…]]></description><link>https://ohyunkyo.github.io/TIL/devops/overriding-jenkins-sh/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/devops/overriding-jenkins-sh/</guid><pubDate>Mon, 23 May 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;도커허브의 젠킨스 이미지를 사용하여 젠킨스 서비스가 포함된 컨테이너를 시작했다.&lt;br&gt;
그리고 해당 컨테이너의 &lt;code class=&quot;language-text&quot;&gt;bash&lt;/code&gt; 쉘을 실행한 뒤, 각 Job 에서 테스트나 빌드를 위해 필요한 모듈 또는 패키지를 설치하여 사용중이였다.&lt;br&gt;
이때의 변경사항은 컨테이너에 저장되지 않기 때문에 컨테이너를 재시작 하게 된다면 동일한 작업을 다시 반복해서 해야 하는 문제가 있었다.&lt;br&gt;
이것을 자동화 하기 위해 컨테이너 생성시 내가 작성한 쉘 스크립트를 실행하도록 하는 방법을 찾아봤다.&lt;/p&gt;
&lt;h2&gt;1. command 설정 추가&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;jenkins/jenkins:lts&lt;/code&gt; 이미지에 젠킨스 서비스를 실행하는 명령어가 포함되어 있기 때문에 단순하게 &lt;code class=&quot;language-text&quot;&gt;command&lt;/code&gt; 설정을 추가하여 쉘 스크립트를 실행하기만 하면 내가 생각한 대로 될것 같았다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dockerfile&quot;&gt;&lt;pre class=&quot;language-dockerfile&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# docker-compose.yml&lt;/span&gt;

version: &apos;3&apos;

services:
    jenkins:
        image: jenkins/jenkins:lts
        container_name: jenkins_cicd
        volumes:
            - /var/run/docker.sock:/var/run/docker.sock
            - /home/ec2-user/jenkins_home:/var/jenkins_home
            - /home/ec2-user/jenkins_container_config/django_test_module.sh:/var/jenkins_home/scripts/django_test_module.sh
        ports:
            - &quot;80:8080&quot;
        privileged: true
        user: root
        command: sh -c &quot;/var/jenkins_home/scripts/django_test_module.sh&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# django_test_module.sh&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; update -y
&lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -y
&lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; docker.io -y
&lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; python3 pip -y
pip &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;django&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3.2&lt;/span&gt;.6

&lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; python3-dev default-libmysqlclient-dev build-essential -y&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;2. 문제 발생&lt;/h2&gt;
&lt;p&gt;그러나 내가 생각한대로 작동하지 않았다.&lt;br&gt;
로그를 확인해 봤을때 스크립트는 잘 실행 되었지만 그 이후 젠킨스 서비스가 실행되지 않고 컨테이너가 종료되었다.&lt;/p&gt;
&lt;p&gt;수행할 프로세스가 없는 이미지의 경우 컨테이너 실행을 완료하면 바로 종료된다고 한다.&lt;br&gt;
내 예상대로라면 이번에 생성한 컨테이너는 스크립트뿐만 아니라 젠킨스 서비스도 같이 실행하기 때문에 종료되면 안될텐데..&lt;br&gt;
원인이 무엇일까?&lt;/p&gt;
&lt;h2&gt;3. 원인 파악&lt;/h2&gt;
&lt;p&gt;아래 사진은 도커 공식 문서의 &lt;code class=&quot;language-text&quot;&gt;docker compose&lt;/code&gt; 부분이다. &lt;a href=&quot;https://docs.docker.com/compose/extends/#adding-and-overriding-configuration&quot;&gt;링크&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 950px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/4d67820ba7f17bd1296110335fb841d2/1c3a5/300-command-configuration.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 65.54621848739495%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABP0lEQVQ4y52Si27CMAxF8///tyFglMcmbdBmfeRlJw13ckCFSRtSiXQUx3Ki6/iq3f6Al9cFqt0em2qLTVVhuVrjrdpisVhitd7g8P6BnDNijIWU0hTHu1hqVNu1qBuNRjc4nmo0WqMWGo26bnCqG3R9jxAIzjlY6xBCuEEEX/aAlEYoKRoGg+A9iAiOGC4wAjFsYBAxmKlclFhqRMl/S1nv0JsBHBPSmBHHcULOl9zvfEx/I7XKBo9je8LgQ1H0LCYwPEUoignfpitt297AeYLnBM9xHhQhbynvA4R8PiPnK+fnUTY46F7DUYSP6aaO5hNYFHLEsa3RDQPMIBO3MJ6e+kMRpcQeLMZknkjpNuE5jGLsYkqmO3vkh9Z4xGSbT/2F3rrS6oVLC7Pw15Y5juidgTEGztiCJy4fPBexzQ/N3/QmT3dN/QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;command-configuration&quot;
        title=&quot;command-configuration&quot;
        src=&quot;/TIL/static/4d67820ba7f17bd1296110335fb841d2/906b5/300-command-configuration.png&quot;
        srcset=&quot;/TIL/static/4d67820ba7f17bd1296110335fb841d2/5ea4d/300-command-configuration.png 238w,
/TIL/static/4d67820ba7f17bd1296110335fb841d2/466da/300-command-configuration.png 475w,
/TIL/static/4d67820ba7f17bd1296110335fb841d2/906b5/300-command-configuration.png 950w,
/TIL/static/4d67820ba7f17bd1296110335fb841d2/1c3a5/300-command-configuration.png 981w&quot;
        sizes=&quot;(max-width: 950px) 100vw, 950px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;간략히 요약하자면 내가 &lt;code class=&quot;language-text&quot;&gt;command&lt;/code&gt; 옵션을 설정할 경우 원본의 &lt;code class=&quot;language-text&quot;&gt;command&lt;/code&gt; 옵션을 오버라이딩 한다고 한다.&lt;br&gt;
그렇기 때문에 나의 스크립트만 실행되고 젠킨스 서비스를 시작하는 명령어는 실행되지 않아 컨테이너가 바로 종료되었던 것이다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/63883149/docker-compose-command-doesnt-override-dockerfile-cmd&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;4. 문제 해결&lt;/h2&gt;
&lt;p&gt;나는 이 문제를 해결하기 위해 원본 이미지에서 젠킨스 서비스를 시작하는 부분을 가져와 &lt;code class=&quot;language-text&quot;&gt;docker-compose.yml&lt;/code&gt; 파일에 추가하기로 했다.&lt;br&gt;
오버라이딩 되어 사라진 명령어를 수동으로 추가하는것이다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;다른 방법으로 해결할 수도 있을것 같다&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://hub.docker.com/layers/jenkins/jenkins/jenkins/lts/images/sha256-ec98cb8b367b0f9426f71345efe11e001c901704cea0e61fd91beb37af34ef98?context=explore&quot;&gt;도커허브의 이미지&lt;/a&gt; (&lt;code class=&quot;language-text&quot;&gt;jenkins/jenkins:lts&lt;/code&gt;) 레이어에서 아래 사진처럼 원하는 부분을 찾아냈다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 544px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/b4cb9a9cb4a39f500073be3420874137/b3e51/400-0-image-layer-detail.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.46218487394958%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABXUlEQVQoz21SCW7CQAzk/2/rK4qqEkKgyV7eI5lq7GwobZEsfMSz47FPKQlKqWitYV1X/afVWo+Yfs8/4xXbuh19pRTEmHAioEhGEoHzHsviEEIE8yEELM4fee+91pzzeDxmtFoVxIegpF4Ac86IKSHEiBgJmCzewdnEhtZZt4Zt27SvT3kAJskKSgAyZUFZ74CSM0IMWvv960T+ZcgGmn4UE3IpqlevCR9LUWvG6lnv4x+AxsL0Iat5XjRmnR+6XUvvA5wP+xQGGpPg7m0iBWSCAO/nD1yGUf3hOmK43mxkyZjuXxhvE4ZxwnWc8HkZNOYD48Ph7RxQRAww56Imu5bdmCMDsj9Mnn6tTetJCm7uB0PJ1tS3yVHnZdl163mveTK2ulP9CEJ70bBveXF2g9TKNAv6ACXwIarvvLPb403GdCyF0/xZSt8ez8B8i/ty+m3qNSQ7LY6cdykI+A11W1egCJk83QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;image-layer-detail&quot;
        title=&quot;image-layer-detail&quot;
        src=&quot;/TIL/static/b4cb9a9cb4a39f500073be3420874137/b3e51/400-0-image-layer-detail.png&quot;
        srcset=&quot;/TIL/static/b4cb9a9cb4a39f500073be3420874137/5ea4d/400-0-image-layer-detail.png 238w,
/TIL/static/b4cb9a9cb4a39f500073be3420874137/466da/400-0-image-layer-detail.png 475w,
/TIL/static/b4cb9a9cb4a39f500073be3420874137/b3e51/400-0-image-layer-detail.png 544w&quot;
        sizes=&quot;(max-width: 544px) 100vw, 544px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 950px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/0eb1a2eadb16a21ebf9157c9ac9aa2f7/21b4d/400-1-jenkins-sh.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 34.45378151260504%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABH0lEQVQoz3WRS0sDMRSF58e69oe4aMFHsWKrUCl2LbrRXZ2OWB9LFTelgqCb6Uw7ec0kn2SGaVXaCx85SS4nOUnwmVm+hEMrySxNSdI52hiccyXWWqx1wIp6bx3B1vU32xevYCRxkrLIBEprMiFIkrTUiywr13PL0nyj4SSWTOPMd6K1pq7CWvI8r3RRoLTB5CtD3BpwBC43FEajlMYYU44e7Q38XP9GI9VmfE+QJHPiWYqUqjRZoZFCUggBSoG//X+M+UORCYLyVCmX8eqyPoIxXF7d0Gj3aJ0M2D3uc9A9p3U6YK/Tp3HYo9nu0Tw6Y2e/y/P9E0EVr4rozf2v1m9Y5Ia3l3duwzFR9Mho9EAUVXgdhmPCUcVweMfHZMoP6fARPjBCXmcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;jenkins-sh&quot;
        title=&quot;jenkins-sh&quot;
        src=&quot;/TIL/static/0eb1a2eadb16a21ebf9157c9ac9aa2f7/906b5/400-1-jenkins-sh.png&quot;
        srcset=&quot;/TIL/static/0eb1a2eadb16a21ebf9157c9ac9aa2f7/5ea4d/400-1-jenkins-sh.png 238w,
/TIL/static/0eb1a2eadb16a21ebf9157c9ac9aa2f7/466da/400-1-jenkins-sh.png 475w,
/TIL/static/0eb1a2eadb16a21ebf9157c9ac9aa2f7/906b5/400-1-jenkins-sh.png 950w,
/TIL/static/0eb1a2eadb16a21ebf9157c9ac9aa2f7/21b4d/400-1-jenkins-sh.png 1280w&quot;
        sizes=&quot;(max-width: 950px) 100vw, 950px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;그리고 &lt;code class=&quot;language-text&quot;&gt;django_test_module.sh&lt;/code&gt; 와 위의 명령어 모두 실행되도록 변경했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dockerfile&quot;&gt;&lt;pre class=&quot;language-dockerfile&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# docker-compose.yml&lt;/span&gt;

version: &apos;3&apos;

services:
    jenkins:
        image: jenkins/jenkins:lts
        container_name: jenkins_cicd
        volumes:
            - /var/run/docker.sock:/var/run/docker.sock
            - /home/ec2-user/jenkins_home:/var/jenkins_home
            - /home/ec2-user/jenkins_container_config/django_test_module.sh:/var/jenkins_home/scripts/django_test_module.sh
        ports:
            - &quot;80:8080&quot;
        privileged: true
        user: root
        command: sh -c &quot;/var/jenkins_home/scripts/django_test_module.sh &amp;amp;&amp;amp; /sbin/tini -- /usr/local/bin/jenkins.sh&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://binux.tistory.com/76&quot;&gt;command 설정에서 여러개의 명령어가 실행되도록 하기&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[젠킨스에서 비공개 저장소 사용하기]]></title><description><![CDATA[0. 서론 프론트엔드 배포를 위해 새로운 Item 을 생성하고 깃허브에서 소스코드를 받아오게 설정할 예정이다. 그러나 백엔드 저장소와는 달리 vue.js 소스는 비공개이기 때문에 다른 방법을 알아봤다. 젠킨스 설정에 대한 부분은 생략한다. 1. SSH…]]></description><link>https://ohyunkyo.github.io/TIL/devops/private-repo-on-jenkins/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/devops/private-repo-on-jenkins/</guid><pubDate>Mon, 16 May 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;프론트엔드 배포를 위해 새로운 Item 을 생성하고 깃허브에서 소스코드를 받아오게 설정할 예정이다.&lt;br&gt;
그러나 백엔드 저장소와는 달리 vue.js 소스는 비공개이기 때문에 다른 방법을 알아봤다.&lt;/p&gt;
&lt;p&gt;젠킨스 설정에 대한 부분은 생략한다.&lt;/p&gt;
&lt;h2&gt;1. SSH Key 생성&lt;/h2&gt;
&lt;p&gt;젠킨스 서버의 젠킨스 컨테이너 터미널을 실행한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;exec&lt;/span&gt; -it jenkins_cicd /bin/bash&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이후 젠킨스 홈 디렉토리에 새로운 SSH Key 를 생성해준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# ssh-keygen -t rsa -f /var/jenkins_home/.ssh/front-end&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 &lt;code class=&quot;language-text&quot;&gt;/var/jenkins_home/.ssh/front-end&lt;/code&gt; 파일(개인키)은 젠킨스에, &lt;code class=&quot;language-text&quot;&gt;/var/jenkins_home/.ssh/front-end.pub&lt;/code&gt; 파일(공개키)은 깃허브 저장소에 등록한다.&lt;/p&gt;
&lt;h2&gt;2. 개인키 등록&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;[젠킨스 서버 IP]:8080/credentials/store/system/domain/_/newCredentials&lt;/code&gt; 경로로 들어가서 다음 사진과 같이 선택하고 개인 키를 붙여넣는다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 911px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/76240dce12c0dec1d4c0cd0481167202/636c2/200-private-key.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 89.91596638655463%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABkklEQVQ4y52U2U4CMRSG+1BceYvh/fRGuTAaSHgheQONMS4wM93X35xTZjCIAabJl2am7el/toqmaRFCQIwRIUTEmJBzHkUpBcJ7DykltDZQSsFaywtEzuVMYwUxVSHCGIPNZoMQq7qqNMCHgMSbykUqBR2WSrE6pTUr1VrzN6m/xCCJEnSYDh4b7PYFDDFMqd5ALo5np5Bi+PH5ibbtOIb0cyyJYqiNRac0lLEwzsM6P8zn0u8nG8Jah06qWoMp1Uyn8bDLX1/fnJhSMGQ17TKXzqTPAZeNNgbGWDjn4Zyr8UjjkiRiDNwdVD6GDRte6MsGOMFuT90LiFZZvLy+oWvbwyI8zokhrAugB8JZi8SuVun5X/4+CPvep9bzHiFnUK8Q7hQx8uUUawrPdrtF0zQ8O+8hyEhYLBAnE8TZDGk6HcjX13tmM+SrK6TVChFA8p4fEqoOgi7opITg8K/X0Le3aG5uoO7uoeZzxMcnlMViz3KJ8vCA8vxc09G7+6vv6UERWkq8Nw1sv3AOB7HroaT8AF4xcoIhu1s1AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;private-key&quot;
        title=&quot;private-key&quot;
        src=&quot;/TIL/static/76240dce12c0dec1d4c0cd0481167202/636c2/200-private-key.png&quot;
        srcset=&quot;/TIL/static/76240dce12c0dec1d4c0cd0481167202/5ea4d/200-private-key.png 238w,
/TIL/static/76240dce12c0dec1d4c0cd0481167202/466da/200-private-key.png 475w,
/TIL/static/76240dce12c0dec1d4c0cd0481167202/636c2/200-private-key.png 911w&quot;
        sizes=&quot;(max-width: 911px) 100vw, 911px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;username&lt;/code&gt; 이 개인키를 식별하기 위한 구분자 라고 생각하면 된다. 나머지 항목은 공백이여도 무관하다.&lt;/p&gt;
&lt;h2&gt;3. 공개키 등록&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;https://github.com/[username]/[reponame]/settings/keys/new&lt;/code&gt; 경로에서 공개 키를 등록한다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 950px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/95d747cccac0cd80795ca9420af323f1/54bf4/300-public-key.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 82.77310924369748%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACxklEQVQ4y5WTzW7rRBiGndPS0yZOYo/HM7bHf3Ec56dJ2yMicnKoihAglmy4GraVoBKCLTfAHXBnILF90EwalEoFweLR2J5vXr8z3zvezcd7tKnJ6w6ZFIRx5igmC5r5De3yjvl6y2z1jqJZInRJnNbEWY1Ma3QxJas62nc79vef4cliiTBz7BgVK8JsTlSsifI5ykwIY0MY5wQyI6/nVNMVSdGiTUNSTDF1Rz1bo/KGD1ZQJA0inSJSO7bIvCMyHSKZIFTuBEcicYLWVVbNkGmFzqfu3dbY0Q80u/09nnAOsufFGXFaumeZlAhdoM2ESBfuPYiNm4uUYVK36KSgP5L4geLSj3hvBe15WBeDcewm7BiYBWG5ITBLTNVRTpeuxs4PQ+3wn+vts93B1TA6OFSZdVC6j8dinU2IVY6QhlGg8EeSoXVywjhQjEPtCISmfypoqtlLByrnbZzxVmb0RhLPD/F88YKzQHEeas5CzblIeDN83nJaTEny5uAwUPRDzV2z5iGp2QrDThbs4leQBZ/I3LGXOZ3I2d1/jpeVrTtod3aBwosyfhxJ8Dx+7/X407N4r3CY+6PXc7W/XvS5ffgSr2pXbsvW3VHwF1+4ov/Db+eXbB6+wLOZstu17R+OYy7ChG90xc9RzKNQPMWJ44dI8xSnfB8pniLNT3HK4yjkuyufxyufbweCrRVMixbbmDitXNZGtnNZh19uGLU3XOQdH5nZCy7MjEvTcp429PSEN0nDmSzZf/qAt7jdsbrZkk86sqp13a62S66/2mLKBqUKYmVcjE6JZMY4OJx7GGr6vjjExl6bcZQyGMtDZAJNup9Rfn3NIIzxxwo/VC5SpwxPQm6xwX7/4R7PXm7baSt6zOFgIOlfSSd+uujfsD243tzhpWVL0Szcnf3770I7XnP2GkfBxWqDZ/N3vOD/1c0/OVytb/kLSMXNJXKicR8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;public-key&quot;
        title=&quot;public-key&quot;
        src=&quot;/TIL/static/95d747cccac0cd80795ca9420af323f1/906b5/300-public-key.png&quot;
        srcset=&quot;/TIL/static/95d747cccac0cd80795ca9420af323f1/5ea4d/300-public-key.png 238w,
/TIL/static/95d747cccac0cd80795ca9420af323f1/466da/300-public-key.png 475w,
/TIL/static/95d747cccac0cd80795ca9420af323f1/906b5/300-public-key.png 950w,
/TIL/static/95d747cccac0cd80795ca9420af323f1/54bf4/300-public-key.png 1007w&quot;
        sizes=&quot;(max-width: 950px) 100vw, 950px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;4. 저장소 주소 입력하기&lt;/h2&gt;
&lt;p&gt;젠킨스에서 Job 을 생성하고 해당 저장소의 정보를 입력하기만 하면 끝이다.&lt;br&gt;
단, 저장소의 주소를 복사할 때 HTTPS 가 아닌 SSH 를 선택해야 한다는것이다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 413px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/6d7fe924d0e927f566c863862e414b0e/6c1e7/400-0-copy-repository-url.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 111.34453781512606%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADfElEQVQ4y4WVy3biRhRFmbbdGDAgQO8nAiQki4d4gw02drd70hnlC5KVv8s00/zYzqoCud2x4wz2ulcl6eioqu6tUrnW4jWfqwqVeodaU6fW1F6oNtRzPI+J6Og0Mpt6YtFIHa5aHUpCoEAIXlaaNFWHxfbIev+Fw9fvhPGYjhmwPTxz/PYLm/snLGOA98eE73//xq9//c7sz28oC4/S1XUbgXR3dlhvmbR174ThoagOjbYl84Jm20aJXfTDAG3XR7vtU9U1SteKgeH2ccMEf5DhRyOamitdvsWm0bFpds7XLYd6zaTT9tHUkHKlRana1KVYbzhhkExJhhNaHYt625KuhICiue+juzQ0GyuIcHqJ/LuSmHzxa1aYkGoOUydkafp4QYzdjaV7RXM+wJXOhWMxdSWxCKoZEKRzpnaPJJ0xc/r04wlhOsMJb2h0XBqqR0N1X3G6rndOiGmSgpWGSluzUQ2dVFc5OgY7Q0XXNXRDl5iW+ROWiKaBZVs4roPj2mimQ7nWplRTxEMWi3GX5SxiPotYzGNW+YB13mO3iNnOI3aLSF6vpj2WeZ/dMiHPfOJuh3Gs4/s2l9WzoG4YrOdDno5bjvslTw8bHh+2bA8PbPd7Nvs9u+MTm/09t3cbef/5y14+v12PybMA17X4LBwqui8FV3nE18cdD/sF97czjocVd3crktgnGQakSShjlgRMUp9x4pGPuuSjHuPExvNsLoXgRUXBMC1uYptR4pMNXclN7JDFNsOezjDUXoj/RdTVSHoarmufHF5Wm3L5VdNHs7uSjumhWgGawO6i2+EpOud4HlPP902vT9vwZbWVin3UjcdMV3uG4yXdaEw/zeknOcPRgsHNTG78KJsTDifE2YLRfIfhDggGI7J8i2qHJ0G5sQ0fy48wBd5A5pYfYwcFQ3S5wX9USUv3ZBTvylx3KRcbWwyIF4SYEBVfNkTuDeS4yEXFiGooBIu8qHOl2NjCphAU7UncEDUsYuGgeOnDmj4jBT9d1fF6qZy/5e5Ivj6w2D4w3zzIfjhZ3rG8fWR3/yzdiw8q73QjMVYuHBZtSTxccN0yX5y2ZF/0f3L9tvN4P5qD7vYIBhndaCRXU+RilXWnd/rVd3vjfzi8qDTkqsbZnHi0IJ2sScZL0un6zUJ8RKtw+PosubhqvPCpXJcNszgi/g9xsIkj5B+x8WcNIVyYRgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;copy-repository-url&quot;
        title=&quot;copy-repository-url&quot;
        src=&quot;/TIL/static/6d7fe924d0e927f566c863862e414b0e/6c1e7/400-0-copy-repository-url.png&quot;
        srcset=&quot;/TIL/static/6d7fe924d0e927f566c863862e414b0e/5ea4d/400-0-copy-repository-url.png 238w,
/TIL/static/6d7fe924d0e927f566c863862e414b0e/6c1e7/400-0-copy-repository-url.png 413w&quot;
        sizes=&quot;(max-width: 413px) 100vw, 413px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 898px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/TIL/static/acdca5e98b632337b5f4401932955484/84cc5/400-1-source-code-manage.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50.42016806722689%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA8ElEQVQoz52SyYrDMBBE9f+/GAL2WLGsyFqsvXWpQU7IQMBM4sNDG11Ut4o5ayGEAOcczjkQEWqtp+i1TJqAcZwQYzgUo3+hP8GYEibOd5eb9/vlOx+7pAZWUoK6XjFfLlDDAC8E/LIgLMu+72vVGtUYVH1Af1tXVGvBSoyItxuClMhK7QKduMiXIBmDZi2aOcBaUBfUGiznjPs0QQwDojEotbzm0Vr7smV6OPTjD7Z5hps4pFrR5/r+e59QK4HlUkApocWI1oufrr4hhAhjHbrW3nJ3lEpByvlU/kopyM9a1g93tWIWEm7zp4NN9MjhL1MUBPJxOMPgAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;source-code-manage&quot;
        title=&quot;source-code-manage&quot;
        src=&quot;/TIL/static/acdca5e98b632337b5f4401932955484/84cc5/400-1-source-code-manage.png&quot;
        srcset=&quot;/TIL/static/acdca5e98b632337b5f4401932955484/5ea4d/400-1-source-code-manage.png 238w,
/TIL/static/acdca5e98b632337b5f4401932955484/466da/400-1-source-code-manage.png 475w,
/TIL/static/acdca5e98b632337b5f4401932955484/84cc5/400-1-source-code-manage.png 898w&quot;
        sizes=&quot;(max-width: 898px) 100vw, 898px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;SSH URL 사용 : &lt;a href=&quot;https://mingzz1.github.io/development/basic/2021/04/19/jenkins_with_private_repo.html/&quot;&gt;https://mingzz1.github.io/development/basic/2021/04/19/jenkins_with_private_repo.html/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[개츠비 이미지 플러그인 적용]]></title><description><![CDATA[0. 서론  을 사용중임에도 불구하고 이미지 리사이즈, 블러 등의 기능이 작동하지 않아 플러그인 사용법에 대해 알아보게 되었다.…]]></description><link>https://ohyunkyo.github.io/TIL/gatsby/gatsby-plugin-image/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/gatsby/gatsby-plugin-image/</guid><pubDate>Fri, 06 May 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;gatsby-plugin-image&lt;/code&gt; 을 사용중임에도 불구하고 이미지 리사이즈, 블러 등의 기능이 작동하지 않아 플러그인 사용법에 대해 알아보게 되었다.&lt;/p&gt;
&lt;h2&gt;1. 해결 방법&lt;/h2&gt;
&lt;p&gt;이미지 확장자를 대문자에서 소문자로 변경하면 된다. &lt;code class=&quot;language-text&quot;&gt;PNG&lt;/code&gt; 를 사용해도 이미지는 출력 되니 확장자의 문제라고는 전혀 생각도 못했지만 어쨌든 &lt;code class=&quot;language-text&quot;&gt;png&lt;/code&gt; 로 변경하니 잘된다.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/gatsbyjs/gatsby/issues/6698#issuecomment-986158429&quot;&gt;https://github.com/gatsbyjs/gatsby/issues/6698#issuecomment-986158429&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[http response 의 파일을 다운로드 하기]]></title><description><![CDATA[0. 서론 엑셀 파일이 포함된 HTTP Response 를 리턴하도록 만든 뷰가 있다. 브라우저로 API…]]></description><link>https://ohyunkyo.github.io/TIL/vue-js/file-download-from-response/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/vue-js/file-download-from-response/</guid><pubDate>Wed, 27 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;엑셀 파일이 포함된 HTTP Response 를 리턴하도록 만든 뷰가 있다.&lt;br&gt;
브라우저로 API 엔드포인트에 접속하여 테스트 했을때 엑셀 파일이 정상적으로 다운로드 되었다.&lt;br&gt;
이제 프론트엔드에서 이 엔드포인트로 요청을 전달하여 엑셀 파일을 받아오기만 하면 된다.&lt;br&gt;
그러나 응답 결과는 엑셀 파일이 아니라 JSON 이였다.&lt;/p&gt;
&lt;p&gt;원인 파악을 위해 여러 자료를 찾아보다 주변의 도움을 받고 문제를 해결했다.&lt;/p&gt;
&lt;h2&gt;1. 기존 소스코드&lt;/h2&gt;
&lt;p&gt;엑셀이 포함된 HTTP Response 를 리턴하는 뷰&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# purchase_order_api.view&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PurchaseOrderDownloadAPI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;APIView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
        response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; HttpResponse&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;headers&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&apos;Content-Type&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;application/vnd.ms-excel&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&apos;Content-Disposition&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;attachment; filename*=UTF-8\&apos;\&apos;purchase_order_&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; date_string &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.xls&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        df&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;to_excel&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; index&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; engine&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;xlwt&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; response&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;해당 뷰의 엔드포인트에 요청 후 응답을 받아 리턴하는 소스&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;# purchase_order&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;js

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;downloadPurchaseOrder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;dateString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;api/purchase_order_download/&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; dateString &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;발주서 다운로드가 완료되었습니다.&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;에러 발생&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;2. 해결하기&lt;/h2&gt;
&lt;p&gt;아래의 소스를 받고 나의 프로젝트에 적용하여 일단 기능을 구현했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;# purchase_order&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;js

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;downloadPurchaseOrder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;dateString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;api/purchase_order_download/&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; dateString &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;get&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;responseType&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;blob&apos;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createObjectURL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; link &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        link&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;href &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; url&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        link&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setAttribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;download&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&apos;발주서_&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;dateString
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;link&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        link&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        link&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;발주서 다운로드가 완료되었습니다.&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;$router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;go&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;$router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentRoute&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;에러 발생&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;3. 항목별 설명&lt;/h2&gt;
&lt;h3&gt;3.1 responseType 설정&lt;/h3&gt;
&lt;p&gt;axios 응답으로 받아오는 데이터 형식의 default 값은 &lt;code class=&quot;language-text&quot;&gt;json&lt;/code&gt; 이다.&lt;br&gt;
그러나 자바스크립트에서 텍스트가 아닌 대용량 데이터를 주고받을때에는 &lt;code class=&quot;language-text&quot;&gt;blob&lt;/code&gt; 이라는 객체를 사용해야 한다고 한다.&lt;br&gt;
그렇기 때문에 일단 응답 형식을 &lt;code class=&quot;language-text&quot;&gt;blob&lt;/code&gt; 으로 설정한다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://sambalim.tistory.com/94&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;3.2 blob 객체의 엑셀 데이터를 다운로드 하기&lt;/h3&gt;
&lt;p&gt;axios 가 받아온 &lt;code class=&quot;language-text&quot;&gt;blob&lt;/code&gt; 형태의 response 에는 http header, footer 등 필요하지 않는 데이터가 있기 때문에 바이너리 데이터만을 사용한다.&lt;/p&gt;
&lt;p&gt;이 바이너리 데이터로 URL 을 만들고 브라우저의 클릭 이벤트를 발생시켜 해당 URL 을 클릭하게 되면 파일이 다운로드 된다.&lt;br&gt;
이렇게 하지 않으면 보안상 이슈로 브라우저가 다운로드를 막는다고 한다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[env 파일 사용하기]]></title><description><![CDATA[0. 서론 기존에 API 엔드포인트의 주소를 각 컴포넌트(vue파일)에 명시했었는데, axios 를 모듈화 하기위해선 해당 URL 을 개별적으로 관리할 필요가 있다고 느꼈다. 1. .env 파일이란? vue…]]></description><link>https://ohyunkyo.github.io/TIL/vue-js/env-file/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/vue-js/env-file/</guid><pubDate>Fri, 22 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;기존에 API 엔드포인트의 주소를 각 컴포넌트(vue파일)에 명시했었는데, axios 를 모듈화 하기위해선 해당 URL 을 개별적으로 관리할 필요가 있다고 느꼈다.&lt;/p&gt;
&lt;h2&gt;1. .env 파일이란?&lt;/h2&gt;
&lt;p&gt;vue 의 환경변수 파일은 여러개로 나뉠 수 있다.&lt;/p&gt;
&lt;p&gt;개발환경(&lt;code class=&quot;language-text&quot;&gt;npm run serve&lt;/code&gt;)에서는 &lt;code class=&quot;language-text&quot;&gt;.env.development&lt;/code&gt; 파일을 자동으로 인식한다.&lt;br&gt;
그렇기 때문에 개발환경에서 필요한 변수를 선언해주면 된다.&lt;br&gt;
또한 &lt;code class=&quot;language-text&quot;&gt;.gitignore&lt;/code&gt; 파일에 등록하여 깃에 같이 업로드 되지 않도록 해야한다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;.env.production&lt;/code&gt; 파일은 배포버전에서 자동으로 인식한다.(어떻게 인식하는지 잘 모르겠음)&lt;br&gt;
실제 운영시 필요한 변수를 선언 하면 될것같다.&lt;/p&gt;
&lt;p&gt;그리고 그냥 &lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt; 파일은 &lt;code class=&quot;language-text&quot;&gt;.env.development&lt;/code&gt; 과 &lt;code class=&quot;language-text&quot;&gt;.env.production&lt;/code&gt; 모두에서 인식하기 때문에 공통적으로 필요한 변수를 선언하면 된다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://hjcode.tistory.com/96&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;2. .env 파일 생성하기&lt;/h2&gt;
&lt;p&gt;위의 환경변수 파일들은 모두 루트 디렉토리에 생성해야 한다.&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;.gitignore&lt;/code&gt; 파일이나 &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; 파일이 있는 그 위치에.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://crispypotato.tistory.com/52&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;3. 변수 선언하기&lt;/h2&gt;
&lt;p&gt;다음과 같이 &lt;code class=&quot;language-text&quot;&gt;VUE_APP_&lt;/code&gt; 라는 접두어가 붙은 변수들은 자동으로 로딩된다.&lt;br&gt;
vue2 에선 따로 로딩해줬어야 한다고 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;VUE_APP_NUM=10
VUE_APP_STR=hi&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;나는 다음과 같이 개발서버 URL 을 설정했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# .env.development

VUE_APP_API_URL = http://localhost:8000/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://kang-ji.tistory.com/241&quot;&gt;출처1&lt;/a&gt;
&lt;a href=&quot;https://joshua1988.github.io/vue-camp/deploy/env-setup.html#env-%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF&quot;&gt;출처2&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;4. 환경변수 사용하기&lt;/h2&gt;
&lt;p&gt;다음과 같은 방법으로 사용할 수 있다.&lt;br&gt;
위에서도 다뤘듯 별도의 로딩 과정 없이 바로 사용할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;# src&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;api&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;index&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;js

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; axios &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;axios&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; axios&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;baseURL&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;VUE_APP_API_URL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[axios 모듈화 하기]]></title><description><![CDATA[0. 서론 코드의 재사용성을 높이기 위해 현재 뷰 컴포넌트에서 각자 axios 객체를 생성하고 요청하던것을 모듈화 하기로 했다., 1. 모듈화의 장점 쉽고 효율적이다. 간단하면서도 강력한 장점이다. 사용할 API…]]></description><link>https://ohyunkyo.github.io/TIL/vue-js/axios-modularization/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/vue-js/axios-modularization/</guid><pubDate>Fri, 22 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;코드의 재사용성을 높이기 위해 현재 뷰 컴포넌트에서 각자 axios 객체를 생성하고 요청하던것을 모듈화 하기로 했다.,&lt;/p&gt;
&lt;h2&gt;1. 모듈화의 장점&lt;/h2&gt;
&lt;p&gt;쉽고 효율적이다.&lt;/p&gt;
&lt;p&gt;간단하면서도 강력한 장점이다. 사용할 API 가 많아지면 많아질수록 더욱 효율적으로 사용 가능하고 관리하기도 쉽다.&lt;/p&gt;
&lt;h2&gt;2. 모듈화 하기&lt;/h2&gt;
&lt;p&gt;우선 axios 인스턴스를 생성하여 리턴하는 파일을 만들어준다.&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt; 파일에 정의된 URL 을 사용한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;# src&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;api&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;index&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;js

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; axios &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;axios&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; axios&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;baseURL&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;VUE_APP_API_URL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이번엔 인스턴스를 활용해 실제로 요청을 보내는 함수를 생성한다.&lt;br&gt;
위에서 만든 인스턴스를 &lt;code class=&quot;language-text&quot;&gt;import&lt;/code&gt; 하고 &lt;code class=&quot;language-text&quot;&gt;get&lt;/code&gt; 메서드를 사용해 요청을 보낸다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;# src&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;api&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;inventory&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;js

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./index&apos;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 품목별 재고 가져오기&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchInventoryBusiness&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;business_id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;api/inventory/business/&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; business_id
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 월별 재고 가져오기&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchInventoryMonthly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;product_id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;api/inventory/monthly/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token literal-property property&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token literal-property property&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;monthly&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token literal-property property&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;product&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token literal-property property&quot;&gt;year&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2022&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token literal-property property&quot;&gt;model_pk&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; product_id
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    fetchInventoryBusiness&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    fetchInventoryMonthly
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;실제로 뷰 컴포넌트에서 사용하는 부분이다.&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;then, catch&lt;/code&gt; 를 &lt;code class=&quot;language-text&quot;&gt;inventory.js&lt;/code&gt; 에서 해줘도 되겠지만 각 컴포넌트에서 정의해주는 편이 더 활용하기 편하다고 생각했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;# src/views/business/Business.vue

...
&amp;lt;script&amp;gt;
import {getInventoryBusiness} from &amp;#39;/src/api/inventory&amp;#39;

export default {
  data () {
    return {
      inventory_business: []
    }
  },
  mounted() {
    const result = getInventoryBusiness(this.$route.query.pk)
    result.then(response =&amp;gt; {
      this.inventory_business = response.data
    }).catch(err =&amp;gt; {
      console.log(&amp;quot;에러 발생&amp;quot;, err)
    });
  }
}
&amp;lt;/script&amp;gt;
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://heewon26.tistory.com/158&quot;&gt;출처1&lt;/a&gt;
&lt;a href=&quot;https://yamoo9.github.io/axios/guide/&quot;&gt;출처2&lt;/a&gt;
&lt;a href=&quot;https://greedysiru.tistory.com/804&quot;&gt;출처3&lt;/a&gt;
&lt;a href=&quot;https://dev-jsk.tistory.com/109&quot;&gt;출처4&lt;/a&gt;
&lt;a href=&quot;https://veneas.tistory.com/entry/axiosjs-GET-POST-%EB%B0%A9%EC%8B%9D%EC%9C%BC%EB%A1%9C-%EC%84%9C%EB%B2%84%EC%99%80-%ED%86%B5%EC%8B%A0%ED%95%98%EA%B8%B0&quot;&gt;출처5&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[django orm 에서 column name 변경하여 리턴하기]]></title><description><![CDATA[…]]></description><link>https://ohyunkyo.github.io/TIL/django/rename-column-name/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django/rename-column-name/</guid><pubDate>Thu, 21 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# model.py&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 상품 정의&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Product&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TextField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  business &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Business&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PROTECT&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  maximum_quantity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SmallIntegerField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      verbose_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;상품 정의&apos;&lt;/span&gt;


&lt;span class=&quot;token comment&quot;&gt;# 부자재&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Supplement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TextField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  business &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Business&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PROTECT&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  maximum_quantity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SmallIntegerField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      verbose_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;부자재&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# model.py&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 상품 재고 처리 기록&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductHistory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  business &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Business&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PROTECT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  product &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Product&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PROTECT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  status &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;pending&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; choices&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;common_const&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;COMMON_STATUS&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  quantity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IntegerField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  inventory_process &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;InventoryProcess&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PROTECT&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  expiry_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  created_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateTimeField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auto_now_add&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  updated_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateTimeField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auto_now&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  reserved_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateTimeField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  admin &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PROTECT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      verbose_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;상품 재고 처리 기록&apos;&lt;/span&gt;
      indexes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Index&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fields&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;status&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;created_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;updated_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;reserved_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;product_history_common&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;


&lt;span class=&quot;token comment&quot;&gt;# 부자재 재고 처리 기록&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SupplementHistory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  business &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Business&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PROTECT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  supplement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Supplement&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PROTECT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  status &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;pending&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; choices&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;common_const&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;COMMON_STATUS&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  quantity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IntegerField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  inventory_process &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;InventoryProcess&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PROTECT&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  expiry_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  created_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateTimeField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auto_now_add&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  updated_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateTimeField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auto_now&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  reserved_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateTimeField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  admin &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PROTECT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      verbose_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;부자재 재고 처리 기록&apos;&lt;/span&gt;
      indexes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Index&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fields&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;status&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;created_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;updated_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;reserved_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;supplement_history_common&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductInventory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;# noinspection PyMethodMayBeStatic&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_list&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; business_id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
		product_history_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ProductHistory&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;business_id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;business_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;complete&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; \
			values&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;product_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;created_at__date&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;inventory_process__effect&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;order_by&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;product_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;quantity&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;Sum&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;quantity&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; \
			values&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;product_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;product__name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;quantity&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;created_at__date&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;inventory_process__effect&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

		&lt;span class=&quot;token comment&quot;&gt;# template 에 전달될 상품 재고처리 기록 변수 초기화&lt;/span&gt;
		product_inventory_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; defaultdict&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

		&lt;span class=&quot;token comment&quot;&gt;# 개별 상품의 재고처리 기록을 가공한다&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; product_history &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; product_history_list&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
			&lt;span class=&quot;token comment&quot;&gt;# 재고처리 기록의 column 을 변수에 set&lt;/span&gt;
			product_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;product_history&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;product_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; product_history&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;product__name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
			expiry_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;product_history&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			quantity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;product_history&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;quantity&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			effect &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; product_history&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;inventory_process__effect&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

			&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;product_inventory_list&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SupplementInventory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;# noinspection PyMethodMayBeStatic&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_list&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; business_id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
		supplement_history_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; SupplementHistory&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;business_id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;business_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;complete&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; \
			values&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;supplement_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;created_at__date&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;inventory_process__effect&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;order_by&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;supplement_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;quantity&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;Sum&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;quantity&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; \
			values&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;supplement_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;supplement__name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;quantity&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;created_at__date&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;inventory_process__effect&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

		&lt;span class=&quot;token comment&quot;&gt;# template 에 전달될 부자재 재고처리 기록 변수 초기화&lt;/span&gt;
		supplement_inventory_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; defaultdict&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

		&lt;span class=&quot;token comment&quot;&gt;# 개별 부자재의 재고처리 기록을 가공한다&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; supplement_history &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; supplement_history_list&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
			&lt;span class=&quot;token comment&quot;&gt;# 재고처리 기록의 column 을 변수에 set&lt;/span&gt;
			supplement_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;supplement_history&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;supplement_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; supplement_history&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;supplement__name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
			expiry_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;supplement_history&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			quantity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;supplement_history&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;quantity&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			effect &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; supplement_history&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;inventory_process__effect&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
			
			&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
			
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;supplement_inventory_list&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;테이블 명만 다르고 컬럼명은 모두 일치하는 서로 다른 두개의 모델이 같은 과정을 거쳐 같은 형태의 데이터를 리턴하길 원했다.&lt;br&gt;
처음에는 다른 방법이 생각나지 않아 일단 각 모델별 메서드에서 똑같은 코드를 반복해서 사용했다.&lt;br&gt;
이후 코드를 재사용할 수 있도록 하나의 메서드에서 컨트롤 가능하도록 만드려고 했는데,&lt;br&gt;
그러기 위해선 각 쿼리셋이 동일한 key 를 가진 dict 를 반환하도록 하는게 좋을것 같았다.&lt;/p&gt;
&lt;h2&gt;1. annotate 사용하기&lt;/h2&gt;
&lt;p&gt;django 의 기능인 annotation 을 사용하여 컬럼 이름을 바꾼채로 리턴하도록 할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 예제&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; F

MyModel&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;renamed_value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;F&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;cryptic_value_name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;values&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;renamed_value&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 적용&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; F

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;InventoryBusiness&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; business_id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;business_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; business_id

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_product_inventory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ProductHistory&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;business_id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;business_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;complete&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; \
            values&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;product_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;created_at__date&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;inventory_process__effect&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;order_by&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;product_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;\
            annotate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;quantity&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;Sum&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;quantity&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; model_pk&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;F&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;product_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; model_name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;F&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;product__name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; \
            values&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;model_pk&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;model_name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;quantity&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;created_at__date&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;inventory_process__effect&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_inventory&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;queryset&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_supplement_inventory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; SupplementHistory&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;business_id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;business_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;complete&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; \
            values&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;supplement_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;created_at__date&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;inventory_process__effect&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;order_by&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;supplement_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;\
            annotate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;quantity&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;Sum&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;quantity&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; model_pk&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;F&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;supplement_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; model_name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;F&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;supplement__name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; \
            values&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;model_pk&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;model_name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;expiry_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;quantity&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;created_at__date&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;inventory_process__effect&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_inventory&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;queryset&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_inventory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; queryset&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; model_history &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; queryset&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            model_pk &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; model_history&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;model_pk&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;99. 끝나고 나서&lt;/h2&gt;
&lt;h3&gt;테이블을 구분한 이유&lt;/h3&gt;
&lt;p&gt;지금보니 상품, 부자재 테이블을 나눌 필요가 전혀 없었던것 같다.&lt;br&gt;
하나의 테이블에서 상품인지 부자재인지만 구분하면 됐을텐데 괜히 테이블도 두개로 나누고 재고 테이블도 둘로 분리되어 관리가 어렵게 된것 같아 보인다.&lt;br&gt;
시간이 된다면 마이그레이션을 진행해서 하나로 통합하고 싶다.&lt;/p&gt;
&lt;h3&gt;annotate 사용하기&lt;/h3&gt;
&lt;p&gt;어노테이션은 새로운 컬럼을 추가하는것과 같다고 한다.&lt;br&gt;
현재 품목별 재고보기에서 파이썬으로 처리하는 부분을 어노테이션을 사용하여 추가 작업 없이 쿼리만으로 해결 가능할것 같다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://raccoonyy.github.io/django-annotate-and-aggregate-like-as-excel/&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[django 에서 트랜잭션 적용하기]]></title><description><![CDATA[…]]></description><link>https://ohyunkyo.github.io/TIL/django/django-db-transaction/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django/django-db-transaction/</guid><pubDate>Wed, 20 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;어플리케이션 외부의 데이터 혹은 업로드 한 엑셀 데이터를 가공하여 발주서 테이블에 등록하는 기능을 만들었다.&lt;br&gt;
이때 특정 데이터로 패키지를 검색해서 발주서 객체에 추가하는데, 패키지를 검색하지 못해서 예외가 발생할 경우 해당 작업 전체가 취소되어야 한다.&lt;/p&gt;
&lt;p&gt;django 에 대해 잘 알지 못했기 때문에 트랜잭션은 나중에 적용하기로 하고 일단 하드코딩으로 기능을 구현했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;current_time &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; timezone&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;now&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
created_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; current_time&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;strftime&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;%Y%m%d%H%M%S&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; loop
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        package &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Package&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;product_code&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;product_code&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; Package&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DoesNotExist&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# 패키지가 없을경우 이번에 넣은 데이터 모두 삭제&lt;/span&gt;
        purchase_order_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PurchaseOrder&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;created_at&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;current_time&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;pending&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        purchase_order_list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;delete&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        
        data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&apos;message&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Package MultipleObjectsReturned&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&apos;product_code&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; product_code
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; JsonResponse&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    purchase_order &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PurchaseOrder&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    purchase_order&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;package &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; package
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    purchase_order&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;created_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; current_time
    purchase_order&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;패키지가 존재하지 않을경우 현재 작업에서 지금까지 등록된 데이터를 모두 삭제하고 오류가 발생했다고 알려준다.&lt;/p&gt;
&lt;h2&gt;1. 트랜잭션이란?&lt;/h2&gt;
&lt;p&gt;트랜잭션은 데이터 조작을 위한 단위라고 한다.&lt;br&gt;
쉽게 말해서 한개 이상의 쿼리(DML)가 포함된 쿼리 집합이라고 생각하면 될것 같은데 쿼리와 마찬가지로 commit 이나 rollback 할 수 있다.&lt;/p&gt;
&lt;p&gt;영화관처럼 반드시 결제와 예약이 같이 이뤄져야 할 때, 결제후 예약이 누락되는 문제가 발생해선 안되기 때문에
결제와 예약을 하나의 트랜잭션으로 묶고 commit 과 rollback 을 정하도록 한다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://wonit.tistory.com/462&quot;&gt;트랜잭션에 대해서&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;2. django 의 트랜잭션&lt;/h2&gt;
&lt;p&gt;데이터베이스 설정을 변경하는것으로 하나의 request 전체를 트랜잭션으로 지정 할 수도 있다. 이후 일부 View 에서는 적용되지 않도록 할 수 있다.&lt;br&gt;
아니면 아예 처음부터 일부 View 에만 적용되도록 할 수도 있다.&lt;/p&gt;
&lt;h2&gt;3. django 의 쿼리 커밋&lt;/h2&gt;
&lt;p&gt;django 에서는 기본적으로 autocommit 옵션이 true 로 설정되어 자동으로 커밋 된다고 한다.&lt;br&gt;
‘개발자가 따로 커밋하지 않으니 당연히 자동으로 커밋해주겠지’ 라고 생각할 수 있지만 이번에 트랜잭션에 대해 공부하기 전에는 커밋에 관해 전혀 생각도 하지 못했다.&lt;/p&gt;
&lt;h2&gt;4. 트랜잭션 적용해보기&lt;/h2&gt;
&lt;p&gt;발주서 추가 하는 부분에 &lt;code class=&quot;language-text&quot;&gt;transaction.atomic()&lt;/code&gt; 라는 context manager 를 사용하면 기존처럼 데이터를 추가한 뒤 삭제하지 않아도 된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Importer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
		self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request
		self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;created_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; timezone&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;now&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;date_string &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;created_at&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;strftime&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;%Y%m%d%H%M%S&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;find_package&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
		keyword &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
		mode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; kwargs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;mode&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

		&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
			&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; mode &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;serial_code&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
				keyword &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; kwargs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;serial_code&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
				package &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Package&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serial_code&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;keyword&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			&lt;span class=&quot;token keyword&quot;&gt;elif&lt;/span&gt; mode &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;product_code&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
				keyword &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; kwargs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;product_code&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
				package &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Package&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;product_code&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;keyword&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
				package &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; Package&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DoesNotExist&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
			&lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; Exception&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;등록 되지 않은 패키지 입니다(&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; mode&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; keyword &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;)&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; Package&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MultipleObjectsReturned&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
			&lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; Exception&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;중복 등록된 패키지 입니다.(&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; mode&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; keyword &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;)&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; package

	&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;import_json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
		json_data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; json&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;loads&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

		&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
			&lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; transaction&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;atomic&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
				&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; purchase_order_object &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; json_data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;purchase_order&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
					serial_code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; purchase_order_object&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;serial_code&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

					package &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_package&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mode&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;serial_code&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; serial_code&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;serial_code&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

					&lt;span class=&quot;token comment&quot;&gt;# 모델 객체에 데이터 저장&lt;/span&gt;
					purchase_order &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PurchaseOrder&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
					purchase_order&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;order_number &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dateformat&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;created_at&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Ymd&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
					&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
					purchase_order&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;created_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;created_at

					&lt;span class=&quot;token comment&quot;&gt;# 모델 객체 DB insert&lt;/span&gt;
					purchase_order&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

			data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
				&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
			&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

		&lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; Exception &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
			data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
				&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
			&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; data&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://myjorney.tistory.com/142&quot;&gt;출처1&lt;/a&gt;
&lt;a href=&quot;https://blog.doosikbae.com/146&quot;&gt;출처2&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;5. 예외 발생시 처리하기&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;try&lt;/code&gt; 블록이 &lt;code class=&quot;language-text&quot;&gt;transaction.atomic()&lt;/code&gt; 블록을 감싸도록 한 후 예외를 처리하면 된다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://lee-seul.github.io/django/2019/02/02/django-transactionmanagementerror.html&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[엑셀 파일 HttpResponse 에 담아 전달하기]]></title><description><![CDATA[0. 서론 엑셀 파일 생성에 필요한 dataframe 을 완성했다. 그리고  메서드를 사용해 프로젝트 내부에 엑셀도 생성해 봤다. 이제 프로젝트 내부가 아닌 Http response 에 엑셀 파일을 담아 리턴해주기만 하면 된다.…]]></description><link>https://ohyunkyo.github.io/TIL/django-rest-framework/create-xls-file-and-return-it/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django-rest-framework/create-xls-file-and-return-it/</guid><pubDate>Wed, 13 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;엑셀 파일 생성에 필요한 dataframe 을 완성했다. 그리고 &lt;code class=&quot;language-text&quot;&gt;to_excel()&lt;/code&gt; 메서드를 사용해 프로젝트 내부에 엑셀도 생성해 봤다.&lt;br&gt;
이제 프로젝트 내부가 아닌 Http response 에 엑셀 파일을 담아 리턴해주기만 하면 된다.&lt;/p&gt;
&lt;h2&gt;1. 엑셀 파일이 포함된 response 생성하기&lt;/h2&gt;
&lt;p&gt;어떤 원리인지는 잘 모르겠다. 일단 &lt;code class=&quot;language-text&quot;&gt;to_excel()&lt;/code&gt; 메서드의 &lt;code class=&quot;language-text&quot;&gt;excel_writer&lt;/code&gt; 인자는 엑셀이 생성될 위치를 포함한 여러 정보를 전달받게 되는것 같은데,
여기에 HttpResponse 객체를 넣어주게 되면 해당 응답객체에 엑셀 파일이 삽입되는것 같다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; HttpResponse&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;headers&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;Content-Type&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;application/vnd.ms-excel&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;Content-Disposition&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;attachment; filename*=UTF-8\&apos;\&apos;purchase_order_&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; date_string &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.xls&apos;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

df&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;to_excel&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; index&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; engine&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;xlwt&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; response&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/35267585/django-pandas-to-http-response-download-file&quot;&gt;출처1&lt;/a&gt;
&lt;a href=&quot;https://gist.github.com/jonperron/733c3ead188f72f0a8a6f39e3d89295d&quot;&gt;출처2&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[내가 사용해본 django-pandas]]></title><description><![CDATA[pandas 란? pandas 는 데이터 조작 및 분석을 위해 python 으로 작성된 소프트웨어 라이브러리이다. 또한 R, SQL, spreadsheet 등 에서 가능하던 작업을 pandas…]]></description><link>https://ohyunkyo.github.io/TIL/django/tht-django-pandas-i-know/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django/tht-django-pandas-i-know/</guid><pubDate>Wed, 13 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;pandas 란?&lt;/h2&gt;
&lt;p&gt;pandas 는 데이터 조작 및 분석을 위해 python 으로 작성된 소프트웨어 라이브러리이다.&lt;br&gt;
또한 R, SQL, spreadsheet 등 에서 가능하던 작업을 pandas 에서 수행 가능하도록 하는 메서드를 가지고 있다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://pandas.pydata.org/docs/getting_started/comparison/index.html&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;django-pandas 사용하기&lt;/h2&gt;
&lt;p&gt;이런 pandas 를 django 프로젝트에서 사용 가능하도록 도와주는 도구가 django-pandas 이다.&lt;/p&gt;
&lt;h3&gt;설치하기&lt;/h3&gt;
&lt;p&gt;django-pandas 를 사용하기 전에 pandas 를 설치해야 한다&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;pip &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; numpy
pip &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; pandas&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 django-pandas 를 설치한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;pip &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; django-pandas&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;queryset 으로 dataframe 생성하기&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;read_frame()&lt;/code&gt; 메서드를 사용하면 간단하게 생성할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django_pandas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;io &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; read_frame
qs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; InventoryProcess&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
df &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; read_frame&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;qs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 결과 &lt;/span&gt;

   &lt;span class=&quot;token function&quot;&gt;id&lt;/span&gt;     name  effect
&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;  초기재고    True
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;    반품    True
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;    출고   False
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;    입고    True&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 이 데이터 프레임의 양식을 변경해보자&lt;/p&gt;
&lt;h3&gt;column 순서 변경하기&lt;/h3&gt;
&lt;p&gt;dataframe 에 원하는 순서대로 컬럼 명을 나열한 리스트를 전달하면 해당 순서대로 컬럼의 위치가 변경된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django_pandas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;io &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; read_frame
qs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; InventoryProcess&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
df &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; read_frame&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;qs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

df &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; df&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;effect&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 추가한 코드&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 결과 &lt;/span&gt;

     name  effect  &lt;span class=&quot;token function&quot;&gt;id&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  초기재고    True   &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;    반품    True   &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;    출고   False   &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;    입고    True   &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;컬럼 명 변경하기 - 전체&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;columns&lt;/code&gt; 속성을 사용하여 사용하여 dataframe 의 컬럼 이름을 변경한다.&lt;br&gt;
아래의 방법으로는 모든 컬럼의 이름을 변경하기 때문에 실제 컬럼 갯수와 리스트의 요소 갯수가 일치해야 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django_pandas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;io &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; read_frame
qs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; InventoryProcess&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
df &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; read_frame&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;qs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

df &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; df&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;effect&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
df&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;columns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;이름&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;처리방법&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 추가한 코드&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 결과 &lt;/span&gt;

     이름   처리방법  &lt;span class=&quot;token function&quot;&gt;id&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  초기재고   True   &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;    반품   True   &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;    출고  False   &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;    입고   True   &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;컬럼명 변경하기 - 개별&lt;/h3&gt;
&lt;p&gt;전체 컬럼명이 아닌 일부만 변경하고 싶을 경우 &lt;code class=&quot;language-text&quot;&gt;rename()&lt;/code&gt; 메서드에 기존컬럼 이름과 변경할 컬럼 이름을 전달한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django_pandas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;io &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; read_frame
qs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; InventoryProcess&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
df &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; read_frame&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;qs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

df &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; df&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;effect&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
df&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;columns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;이름&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;처리방법&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
df&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rename&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;columns&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;pk&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; inplace&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 추가한 코드&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 결과 &lt;/span&gt;

     이름   처리방법  pk
&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  초기재고   True   &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;    반품   True   &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;    출고  False   &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;    입고   True   &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;인덱스 제거하여 출력하기&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;to_string()&lt;/code&gt; 메서드의 인수에 &lt;code class=&quot;language-text&quot;&gt;index=False&lt;/code&gt; 를 전달하여 인덱스가 표시되지 않도록 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django_pandas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;io &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; read_frame
qs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; InventoryProcess&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
df &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; read_frame&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;qs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

df &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; df&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;effect&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
df&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;columns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;이름&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;처리방법&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
df&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rename&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;columns&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;pk&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; inplace&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 

&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;to_string&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;index&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 변경한 코드&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 결과 &lt;/span&gt;

이름  처리방법  pk
초기재고  True   &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;
반품  True   &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;
출고 False   &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;
입고  True   &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://seong6496.tistory.com/133&quot;&gt;출처1&lt;/a&gt;
&lt;a href=&quot;https://hogni.tistory.com/51&quot;&gt;출처2&lt;/a&gt;
&lt;a href=&quot;https://github.com/chrisdev/django-pandas&quot;&gt;django-pandas github&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[json 데이터를 dataframe 으로 변환하기]]></title><description><![CDATA[0. 서론 모델의 데이터를 가공하여 엑셀 파일을 리턴하는 기능을 만들어 사용중이였다. 원하는대로 작동하긴 했지만 가독성도 떨어지고 복잡한 소스코드를 계속 사용할 생각은 없었다. 그래서 drf…]]></description><link>https://ohyunkyo.github.io/TIL/django-rest-framework/json-to-dataframe/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django-rest-framework/json-to-dataframe/</guid><pubDate>Tue, 12 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;모델의 데이터를 가공하여 엑셀 파일을 리턴하는 기능을 만들어 사용중이였다.&lt;br&gt;
원하는대로 작동하긴 했지만 가독성도 떨어지고 복잡한 소스코드를 계속 사용할 생각은 없었다.&lt;br&gt;
그래서 drf 로 리팩토링 하는 과정에서 다른 방법을 사용하여 더 좋은 소스코드를 작성하고자 했다.&lt;/p&gt;
&lt;p&gt;엑셀파일을 어디에서 생성할것인지가 첫번째 고민이였다.&lt;br&gt;
vue.js 에서 json 데이터로 엑셀 파일을 생성하는 라이브러리가 있다는것을 알게됐기 때문인데,&lt;br&gt;
관련 지식이나 경험이 없어서 친구의 조언대로 기존 방식(백엔드에서 생성 후 전달)을 사용하기로 했다.&lt;/p&gt;
&lt;p&gt;엑셀파일을 생성할 때에는 하드코딩에 가까운 기존 방식보다는 pandas 라이브러리를 사용하는것이 더 적합하다고 생각했다.&lt;br&gt;
간단한 메서드로 엑셀파일을 생성 할 수 있는것처럼 보였고, dataframe 형식을 배워두면 유용하게 사용할 수 있을것 같았다.&lt;/p&gt;
&lt;h2&gt;1. 기본 예제 실습하기&lt;/h2&gt;
&lt;p&gt;pandas 예제에서는 queryset 으로 쉽게 dataframe 을 생성했다.&lt;br&gt;
그래서 비슷한 방식으로 &lt;code class=&quot;language-text&quot;&gt;serializer.data&lt;/code&gt; 를 넘기면 똑같이 dataframe 이 생성될것이라 기대했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 처음 실습한 기본 예제&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django_pandas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;io &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; read_frame

qs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PurchaseOrder&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
df &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; read_frame&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;qs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# serializer 를 사용하기위해 변형한 예제&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
qs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PurchaseOrder&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
serializer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PurchaseOrderSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;qs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
df &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; read_frame&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그러나 당연히 실패했다.&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;read_frame&lt;/code&gt; 은 쿼리셋을 dataframe 으로 변환하는 메서드이기 때문이다.&lt;/p&gt;
&lt;h2&gt;2. 구글링하기&lt;/h2&gt;
&lt;p&gt;당연히 serializer 를 dataframe 으로 바꿀 수 있는 방법이 있을것이라 생각했다.&lt;br&gt;
하지만 그중에 django-rest-pandas 는 업데이트된지도 너무 오래됐고 다른곳에서 활용하기 힘들것 같아서 제외하고 다른 방법을 찾아봤다.&lt;/p&gt;
&lt;p&gt;serializer to dataframe 같은 검색어로 시간을 허비하던 중 serializer 가 JSON 데이터를 리턴한다는 사실이 떠올랐다.&lt;/p&gt;
&lt;h2&gt;3. json 데이터를 dataframe 으로 변환하기&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;json_normalize()&lt;/code&gt; 메서드를 사용하여 json 데이터를 dataframe 으로 변환 할 수 있었다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# purchase_order_api.py&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; pandas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;json &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; json_normalize

queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PurchaseOrder&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;created_at__icontains&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;created_at&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;values&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
serializer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PurchaseOrderDownloadSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;queryset&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
df &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; json_normalize&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://www.delftstack.com/ko/howto/python-pandas/json-to-pandas-dataframe/&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[axios 에서 form 전송하기]]></title><description><![CDATA[0. 서론 validation 을 사용하지 않는 form 은 처음이였는데 데이터가 제대로 전송되지 않아서 찾아봤다. 1. 문제점 기본적으로 axios 에서 데이터를 전송할 때에는 json 형태의 데이터가 전송된다. 그렇기 때문에 form…]]></description><link>https://ohyunkyo.github.io/TIL/vue-js/axios-send-form/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/vue-js/axios-send-form/</guid><pubDate>Fri, 08 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;validation 을 사용하지 않는 form 은 처음이였는데 데이터가 제대로 전송되지 않아서 찾아봤다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;open_market&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;purchase_order_file&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    
    &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
    
&lt;span class=&quot;token literal-property property&quot;&gt;methods&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;onSubmit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;axios&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token literal-property property&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token literal-property property&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; url&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token literal-property property&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;form
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;1. 문제점&lt;/h2&gt;
&lt;p&gt;기본적으로 axios 에서 데이터를 전송할 때에는 json 형태의 데이터가 전송된다.&lt;br&gt;
그렇기 때문에 form 을 사용해야 하는 경우(file 전송 등)에는 별도의 설정이 필요하다.&lt;/p&gt;
&lt;h2&gt;2. 해결방법&lt;/h2&gt;
&lt;p&gt;input 의 데이터를 FormData 형식으로 변경 후 전송한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;onSubmit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; form &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FormData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    form&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;open_market&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;form&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;open_market&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    form&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;purchase_order_file&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;form&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;purchase_order_file&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;axios&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; url&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; form&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token string-property property&quot;&gt;&apos;Content-Type&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;multipart/form-data&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;$router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;purchase order queue&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token literal-property property&quot;&gt;date_string&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;result_data&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;등록에 실패했습니다&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://yamoo9.github.io/axios/guide/form-format.html#%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80&quot;&gt;출처1&lt;/a&gt;
&lt;a href=&quot;https://solbel.tistory.com/886&quot;&gt;출처2&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Vue Router 사용한 페이지 이동]]></title><description><![CDATA[0. 서론 API 에서 받아온 날짜 형식을 변경해서 사용하고 싶었다. 그리고 그 변경된 형식을  태그의  속성에 사용하여 페이지 이동하는데 사용할 생각이였다. 1. router-link 로 페이지 이동하기 vue…]]></description><link>https://ohyunkyo.github.io/TIL/vue-js/how-to-redirect-by-vue-router/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/vue-js/how-to-redirect-by-vue-router/</guid><pubDate>Wed, 06 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;API 에서 받아온 날짜 형식을 변경해서 사용하고 싶었다.&lt;br&gt;
그리고 그 변경된 형식을 &lt;code class=&quot;language-text&quot;&gt;router-link&lt;/code&gt; 태그의 &lt;code class=&quot;language-text&quot;&gt;params&lt;/code&gt; 속성에 사용하여 페이지 이동하는데 사용할 생각이였다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Y:M:D H-m-s -&gt; YMDHms&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;1. router-link 로 페이지 이동하기&lt;/h2&gt;
&lt;p&gt;vue 에 대해서 자세히 공부하고 시작한것이 아니라 템플릿을 구매하고 필요한부분만 찾아서 사용했기 때문에 이 방식밖에 알지 못했다.&lt;br&gt;
그래서 filter 기능을 params 에 적용하면 원하는 기능을 구현할 수 있다고 생각했다.&lt;br&gt;
그러나 아래와 같은 형식으로는 에러가 출력됐다. 해당 위치에서 filter 를 사용하기 위해 다른 형식으로도 시도해봤지만 결국 되지 않았다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;...
&amp;lt;router-link :to=&amp;quot;{name: &amp;#39;purchase order queue&amp;#39;, params: {created_at: purchase_order.created_at | dateToString }}&amp;quot;&amp;gt;{{ purchase_order.created_at }}&amp;lt;/router-link&amp;gt;
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;2. 메서드를 사용하여 페이지 이동하기&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;router-link&lt;/code&gt; 를 사용하여 문제를 해결하기위해 구글링 하던 중 다른 방법으로도 페이지를 이동할 수 있다는것을 알게 되었다.&lt;br&gt;
vue 컴포넌트 내에 메서드를 생성하고 클릭시 메서드가 실행되도록 하는 방식이다.&lt;br&gt;
이런 방식을 사용하면 코드가 조금 복잡해지지만 커스텀 할 수 있다는 장점이 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;...
&amp;lt;b-link @click=&amp;quot;purchaseOrderQueue(purchase_order.created_at)&amp;quot;&amp;gt;{{ purchase_order.created_at }}&amp;lt;/b-link&amp;gt;
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;...
methods: {
    purchaseOrderQueue(dateValue) {
        let dateFormat = &amp;quot;YYYYMMDDHHmmss&amp;quot;
        let dataString = moment(new Date(dateValue)).format(dateFormat)
        this.$router.push({
            name: &amp;quot;purchase order queue&amp;quot;,
            params: { created_at: dataString}
        })
    }
}
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[ViewSet 과 APIView 를 사용해야 할 때]]></title><description><![CDATA[ViewSet 을 사용해야 할 때 API가 기본 CRUD 작업을 수행할 일이 많을 경우. 장점 모든 코드를 쓸 필요 없이 적은 양의 코드로도 CRUD 를 구현할 수 있다. APIView…]]></description><link>https://ohyunkyo.github.io/TIL/django-rest-framework/when-use-viewset-or-apiview/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django-rest-framework/when-use-viewset-or-apiview/</guid><pubDate>Tue, 05 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;ViewSet 을 사용해야 할 때&lt;/h2&gt;
&lt;p&gt;API가 기본 CRUD 작업을 수행할 일이 많을 경우.&lt;/p&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;p&gt;모든 코드를 쓸 필요 없이 적은 양의 코드로도 CRUD 를 구현할 수 있다.&lt;/p&gt;
&lt;h2&gt;APIView 를 사용해야 할 때&lt;/h2&gt;
&lt;p&gt;많은 커스텀 작업이 필요한 경우.&lt;/p&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;p&gt;익숙하지 않은 사람들이 코드를 이해하기 쉽다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.reddit.com/r/django/comments/sm07s2/drf_when_to_use_viewsets_vs_generic_views_vs/&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[foreign key 가 동일한 다른 모델의 데이터 가져오기]]></title><description><![CDATA[0. 서론 다음과 같은 구조에서  가 해당 Product 인스턴스와 같은 Business 모델을 Foreign Key 로 가지는 Package 를 가져오고 싶었다. 1. SerializerMethodField…]]></description><link>https://ohyunkyo.github.io/TIL/django-rest-framework/get-another-models-data-which-has-same-foreign-key/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django-rest-framework/get-another-models-data-which-has-same-foreign-key/</guid><pubDate>Thu, 31 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;다음과 같은 구조에서 &lt;code class=&quot;language-text&quot;&gt;ProductDetailSerializer&lt;/code&gt; 가 해당 Product 인스턴스와 같은 Business 모델을 Foreign Key 로 가지는 Package 를 가져오고 싶었다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 품목 정의&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Business&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TextField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        verbose_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;품목 정의&apos;&lt;/span&gt;
    
    
&lt;span class=&quot;token comment&quot;&gt;# 상품 정의&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Product&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TextField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    business &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Business&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PROTECT&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    maximum_quantity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SmallIntegerField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        verbose_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;상품 정의&apos;&lt;/span&gt;
    
    
&lt;span class=&quot;token comment&quot;&gt;# 부자재&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
생략
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    
    
&lt;span class=&quot;token comment&quot;&gt;# 패키지&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Package&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TextField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    serial_code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    product_code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    is_split &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BooleanField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    memo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TextField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    business &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Business&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PROTECT&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    product &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ManyToManyField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Product&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; through&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;PackageProduct&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    supplement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ManyToManyField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Supplement&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; through&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;PackageSupplement&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;1. SerializerMethodField 사용하여 가져오기&lt;/h2&gt;
&lt;p&gt;처음엔 필터가 적용된 PackageSerializer 를 사용해야 한다고 생각했다.&lt;br&gt;
그래서 아래처럼 &lt;code class=&quot;language-text&quot;&gt;SerializerMethodField()&lt;/code&gt; 에 필터링된 쿼리셋을 리턴하는 방법으로 구현했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductDetailSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    business_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReadOnlyField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;business.id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    business_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReadOnlyField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;business.name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    package_product_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PackageProductSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;packageproduct_set&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    package_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SerializerMethodField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Product
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;description&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;maximum_quantity&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;business_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;business_name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;package_product_list&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;package_list&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_package_list&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; product&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        qs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Package&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;business_id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;product&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;business&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        serializer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PackageSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;instance&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;qs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/28309507/django-rest-framework-filtering-for-serializer-field&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;2. SerializerMethodField 사용하지 않기&lt;/h2&gt;
&lt;p&gt;이후 TIL 에 ‘다대다 관계 모델 직렬화(serialize) 하기’ 라는 글을 쓰기 위해 공부하던 중 더 낫다고 생각되는 방법을 찾아서 수정했다&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductDetailSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    business_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReadOnlyField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;business.id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    business_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReadOnlyField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;business.name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    package_product_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PackageProductSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;packageproduct_set&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    package_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PackageSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;business.package_set&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Product
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;description&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;maximum_quantity&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;business_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;business_name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;package_product_list&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;package_list&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 기존 방법과 같은 기능을 하지만 더욱 간결하고 가독성도 좋아진 소스라고 생각한다.&lt;/p&gt;
&lt;h2&gt;99. 끝나고 나서&lt;/h2&gt;
&lt;p&gt;내가 원했던것이 무엇인지 직관적으로 볼 수 있도록 각 마크다운 파일들을 수정해야 할것같다.&lt;br&gt;
‘대충 이런 형태의 데이터를 원한다’ 라는 생각으로는 질문을 하기도 힘들고 성공적으로 구현했다고 하더라도 정리하는데 힘들고 오래걸리기 때문.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[다대다 관계 모델 직렬화(serialize) 하기]]></title><description><![CDATA[0. 서론 기본적으로  를 가진 모델(Package)을 직렬화할 경우 연관된 모델(Product)의 pk 만을 가지고 오게 된다. 기본 serializer 가 반환하는 데이터 before-customize 나는 Package…]]></description><link>https://ohyunkyo.github.io/TIL/django-rest-framework/serialize-many-to-many-relationships/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django-rest-framework/serialize-many-to-many-relationships/</guid><pubDate>Thu, 31 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;기본적으로 &lt;code class=&quot;language-text&quot;&gt;manytomanyfield&lt;/code&gt; 를 가진 모델(Package)을 직렬화할 경우 연관된 모델(Product)의 pk 만을 가지고 오게 된다.&lt;/p&gt;
&lt;p&gt;기본 serializer 가 반환하는 데이터&lt;br&gt;
&lt;img src=&quot;/TIL/images/serialize-many-to-many-relationships/before-customize.png&quot; alt=&quot;before-customize&quot;&gt;&lt;/p&gt;
&lt;p&gt;나는 Package 를 직렬화 할때 Product 의 pk 이외에 다른 컬럼을 가져와야 했다.&lt;br&gt;
그리고 package_product 테이블에 생성한 custom field 인 quantity 도 가져와야 했기 때문에 &lt;code class=&quot;language-text&quot;&gt;serializer&lt;/code&gt; 를 커스터마이징 할 필요가 있었다.&lt;/p&gt;
&lt;p&gt;내가 원하는 데이터
&lt;img src=&quot;/TIL/images/serialize-many-to-many-relationships/after-customize.png&quot; alt=&quot;after-customize&quot;&gt;&lt;/p&gt;
&lt;h2&gt;1. 새로운 serializer 생성하기&lt;/h2&gt;
&lt;p&gt;기존에 사용하던 serializer 는 &lt;code class=&quot;language-text&quot;&gt;create()&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;list()&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;delete()&lt;/code&gt; 에서 계속 사용하고 &lt;code class=&quot;language-text&quot;&gt;package detail&lt;/code&gt; 을 위해 하나 더 만들기로 했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# serializer.py

class PackageDetailSerializer(serializers.ModelSerializer):
    is_split = serializers.SerializerMethodField()
    business_id = serializers.ReadOnlyField(source=&apos;business.id&apos;)
    business_name = serializers.ReadOnlyField(source=&apos;business.name&apos;)
    package_product_list = PackageProductSerializer(source=&apos;packageproduct_set&apos;, many=True)
    package_supplement_list = PackageSupplementSerializer(source=&apos;packagesupplement_set&apos;, many=True)
    
    class Meta:
        model = Package
        fields = [&apos;id&apos;, &apos;name&apos;, &apos;description&apos;, &apos;serial_code&apos;, &apos;product_code&apos;, &apos;memo&apos;, &apos;is_split&apos;, &apos;business_id&apos;, &apos;business_name&apos;, &apos;package_product_list&apos;, &apos;package_supplement_list&apos;]
    
    def get_is_split(self, obj):
        if obj.is_split:
            return &apos;분할함&apos;
        else:
            return &apos;분할하지 않음&apos;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;serializer 의 field 를 생성할 때 다른 serializer 를 사용했다.&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;PackageProductSerializer&lt;/code&gt; 를 내가 원하는 데이터를 리턴하도록 만들었기 때문에 &lt;code class=&quot;language-text&quot;&gt;PackageDetailSerializer&lt;/code&gt; 에서도 동일하게 원하는 데이터를 확인할 수 있게 되었다.&lt;br&gt;
&lt;a href=&quot;https://hyun-am-coding.tistory.com/entry/9-1-Serializers&quot;&gt;출처1&lt;/a&gt;
&lt;a href=&quot;https://www.django-rest-framework.org/api-guide/serializers/#dealing-with-nested-objects&quot;&gt;출처2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;source&lt;/code&gt; 인수는 필드를 채우는데 사용할 속성의 이름이라고 한다. 이 인수를 사용하지 않으면 필드이름과 동일한 데이터를 찾게된다.&lt;br&gt;
예를들어 business_name 필드를 만들때 &lt;code class=&quot;language-text&quot;&gt;source=&apos;business.name&apos;&lt;/code&gt; 이라고 지정해주지 않았다면 Package 모델에서 business_name 이라는 필드를 찾게 된다는 말이다.
&lt;a href=&quot;https://www.django-rest-framework.org/api-guide/fields/#source&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;_set&lt;/code&gt; 은 Package 모델에서 자신을 foreign key 로 가지고 있는 모델인 PackageProduct 에 접근하기 위한 방법이다.
&lt;a href=&quot;https://freeprog.tistory.com/55&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;many=True&lt;/code&gt; 플래그는 단순한 데이터가 아닌 리스트를 반환해야 할 경우 사용한다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/41976819/django-serialize-a-model-with-a-many-to-many-relationship-with-a-through-argume/41996831#41996831&quot;&gt;처음본 곳&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;2. ViewSet 에서 serializer 분리하기&lt;/h2&gt;
&lt;p&gt;위에서 생성한 serializer 를 &lt;code class=&quot;language-text&quot;&gt;detail()&lt;/code&gt; 메서드에서만 사용해야 했기때문에 메서드 별로 다른 serializer 를 사용하는 방법을 찾아봤다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;ModelViewSet&lt;/code&gt; 을 상속받는 ViewSet 의 경우 &lt;code class=&quot;language-text&quot;&gt;serializer_class&lt;/code&gt; 속성으로 직렬화에 사용할 클래스를 지정할 수 있다.&lt;br&gt;
만약 하나의 ViewSet 에서 메서드마다 사용할 직렬화 클래스를 다르게 설정하고 싶다면 다음과 같이 하면 된다&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# views.py&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PackageModelViewSet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ModelViewSet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Package&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    filter_backends &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;DjangoFilterBackend&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    filterset_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PackageFilter
    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_serializer_class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;action &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;retrieve&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; PackageDetailSerializer
    
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; PackageSerializer&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;serializer_class&lt;/code&gt; 속성을 그대로 사용하고 싶었지만 &lt;code class=&quot;language-text&quot;&gt;get_serializer_class&lt;/code&gt; 메서드를 오버라이딩 하면 적용되지 않는듯 했다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/22616973/django-rest-framework-use-different-serializers-in-the-same-modelviewset&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;99. 끝나고 나서&lt;/h2&gt;
&lt;p&gt;package_product_list 와 package_supplement_list 의 데이터중 &lt;code class=&quot;language-text&quot;&gt;package detail&lt;/code&gt; 컴포넌트에서 사용하지 않는 데이터가 많다.&lt;br&gt;
성능 이슈가 발생할 가능성이 있기때문에 이중에서 필요한 데이터만 가져오는 방법을 찾아야할것같다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[모달에 데이터 전달하기]]></title><description><![CDATA[0. 서론 frontend 와 backend 를 분리하기 이전, django…]]></description><link>https://ohyunkyo.github.io/TIL/vue-js/pass-data-to-modal/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/vue-js/pass-data-to-modal/</guid><pubDate>Thu, 31 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;frontend 와 backend 를 분리하기 이전, django 템플릿으로 리스트 페이지를 만들고 각각의 객체에 수정과 삭제 버튼을 추가한 모델이 있었다.&lt;br&gt;
수정 버튼은 수정페이지로 이동하고 삭제 버튼은 안내메시지를 포함한 모달을 띄운다.&lt;br&gt;
이때 각 안내메시지가 해당 객체에 대한 내용을 포함하도록 하고 싶었기 때문에 객체마다 개별적인 모달을 가지고 있었고
매우 비효율적이라는 생각이 들어 나중에 분리할 방법을 찾아 수정할 예정이였다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;# inventory_process_list.html

{% if inventory_process_list %}
    {% for inventory_process in inventory_process_list %}
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;{{ inventory_process.name }}&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;{% effect_check inventory_process.effect %}&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;a&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;{% url &lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;inventory:inventory_process_update&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt; inventory_process.id %}&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;btn btn-update&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;수정&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;a&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;#modal-inventory-process-delete-{{ inventory_process.id }}&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;btn btn-delete modal-trigger&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;삭제&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- Modal Structure --&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;modal-inventory-process-delete-{{ inventory_process.id }}&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;modal&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;form&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;delete-form-{{ inventory_process.id }}&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;{% url &lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;inventory:inventory_process_delete&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt; inventory_process.id %}&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
                {% csrf_token %}
                &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;modal-content&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
                    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h4&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;red-text accent-4&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;재고처리 방법을 삭제합니다&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
                    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&quot;예&quot; 를 누르면 다음 항목이 삭제됩니다.&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
                        재고처리명 : &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;span&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;black-text font-size-22 bold&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;{{ inventory_process.name }}&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;span&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
                        재고수량처리방법 : &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;span&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;black-text font-size-22 bold&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;{% effect_check inventory_process.effect %}&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;span&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
                        정말로 삭제하시겠습니까?&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
                &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
                &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;modal-footer&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
                    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;a&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;#&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;modal-close waves-effect waves-green btn-flat red-text accent-3&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;아니오&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
                    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;submit&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;modal-close waves-effect waves-green btn-flat&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;예&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
                &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;form&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    {% endfor %}
{% endif %}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이후 vue.js / drf 로 분리하면서 모달 하나에 삭제할 객체의 정보를 전달하여 출력하는 식으로 변경하고자 방법을 찾아보게 되었다.&lt;/p&gt;
&lt;h2&gt;1. 데이터를 전달하는 방법&lt;/h2&gt;
&lt;p&gt;데이터를 전달하는 방법은 아주 간단하다. 반복문 내부에 모달을 배치하는것보다 훨씬 쉽고 편리하다.&lt;br&gt;
모달 내부에 변수를 출력하도록 하고 모달을 띄우는 버튼을 클릭할 때마다 해당 변수에 값을 넣어주면 되는것이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;# 예제 - html 

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;ul&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;li&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;v-for&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;item in items&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      {{ item.first_name }}
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;b-button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;sm&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;v-b-modal&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;myModal&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;sendInfo(item)&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        Saluta {{item.first_name}}
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;b-button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;li&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;ul&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;

  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;b-modal&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;myModal&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    Hello {{selectedUser.first_name}} {{selectedUser.last_name}} !
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;b-modal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;# 예제 &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; javascript

&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Vue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;#app&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;items&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;first_name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Dickerson&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;last_name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Macdonald&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;first_name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Larsen&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;last_name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Shaw&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;first_name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Geneva&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;last_name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Wilson&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;first_name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Jami&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;last_name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Carney&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;selectedUser&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
  &lt;span class=&quot;token literal-property property&quot;&gt;methods&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;sendInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;selectedUser &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/51271337/bootstrap-vue-how-to-pass-data-to-modal&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;2. 모달 분리하기&lt;/h2&gt;
&lt;p&gt;for loop 내부에 있던 모달을 반복문 밖으로 빼내고 안내메시지를 변수화 했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;&amp;lt;!-- Vertically Centered Block Modal --&amp;gt;
&amp;lt;b-modal id=&amp;quot;delete-inventory-process-modal&amp;quot; body-class=&amp;quot;p-0&amp;quot; centered hide-footer hide-header&amp;gt;
  &amp;lt;div class=&amp;quot;block block-rounded block-themed block-transparent mb-0&amp;quot;&amp;gt;
    &amp;lt;div class=&amp;quot;block-header bg-primary-dark&amp;quot;&amp;gt;
      &amp;lt;h3 class=&amp;quot;block-title&amp;quot;&amp;gt;{{ delete_object.modal_title }}&amp;lt;/h3&amp;gt;
      &amp;lt;div class=&amp;quot;block-options&amp;quot;&amp;gt;
        &amp;lt;button type=&amp;quot;button&amp;quot; class=&amp;quot;btn-block-option&amp;quot; @click=&amp;quot;$bvModal.hide(&amp;#39;delete-inventory-process-modal&amp;#39;)&amp;quot;&amp;gt;
          &amp;lt;i class=&amp;quot;fa fa-fw fa-times&amp;quot;&amp;gt;&amp;lt;/i&amp;gt;
        &amp;lt;/button&amp;gt;
      &amp;lt;/div&amp;gt;
    &amp;lt;/div&amp;gt;
    &amp;lt;div class=&amp;quot;block-content font-size-sm&amp;quot;&amp;gt;
      &amp;lt;p&amp;gt;
        &amp;quot;예&amp;quot; 를 누르면 &amp;lt;span class=&amp;quot;lead font-w700 bg-warning text-gray-lighter&amp;quot;&amp;gt;&amp;amp;nbsp;{{ delete_object.object.name }}&amp;amp;nbsp;&amp;lt;/span&amp;gt; {{ delete_object.modal_message }}
      &amp;lt;/p&amp;gt;
      &amp;lt;p&amp;gt;
        정말로 삭제 하시겠습니까?
      &amp;lt;/p&amp;gt;
    &amp;lt;/div&amp;gt;
    &amp;lt;div class=&amp;quot;block-content block-content-full text-right border-top&amp;quot;&amp;gt;
      &amp;lt;b-button variant=&amp;quot;alt-primary&amp;quot; class=&amp;quot;mr-1&amp;quot; @click=&amp;quot;$bvModal.hide(&amp;#39;delete-inventory-process-modal&amp;#39;)&amp;quot;&amp;gt;아니오&amp;lt;/b-button&amp;gt;
      &amp;lt;b-button variant=&amp;quot;alt-danger&amp;quot; @click=&amp;quot;delete_inventory_process(delete_object.model, delete_object.object.id)&amp;quot;&amp;gt;예&amp;lt;/b-button&amp;gt;
    &amp;lt;/div&amp;gt;
  &amp;lt;/div&amp;gt;
&amp;lt;/b-modal&amp;gt;
&amp;lt;!-- END Vertically Centered Block Modal --&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;2. 변수에 데이터 전달하기&lt;/h2&gt;
&lt;p&gt;클릭시 데이터를 전달하기 위한 메서드가 실행되도록 버튼을 수정했다&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;...
&amp;lt;b-button variant=&amp;quot;danger&amp;quot; v-b-modal.delete-inventory-process-modal @click=&amp;quot;setModalData(&amp;#39;inventory_process&amp;#39;, inventory_process)&amp;quot;&amp;gt;삭제&amp;lt;/b-button&amp;gt;
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;안내메시지 설정을 위한 model 이름, 삭제 요청을 위한 id(pk), 삭제 확인을 위한 name 을 modal 에 전달한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token literal-property property&quot;&gt;methods&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setModalData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;model&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;inventory_process&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;delete_object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;modal_title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;재고 처리 방법을 삭제합니다.&apos;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;delete_object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;modal_message &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;재고 처리 방법이 삭제됩니다.&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;delete_object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; model
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;delete_object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;object &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; object
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[django model 의 다대다 관계에서 필드 추가하기]]></title><description><![CDATA[0. 서론 기본적으로 다대다 관계에서는 새로운 테이블이 생성된다. 그리고 column 으로는 관계를 맺게 되는 row 들의 pk 를 저장하게 된다. 아래의 표는 내가 프로젝트를 진행하며 생성된 다대다 관계 테이블이다. id package_id…]]></description><link>https://ohyunkyo.github.io/TIL/django/many-to-many-relationships-custom-field/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django/many-to-many-relationships-custom-field/</guid><pubDate>Wed, 30 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;기본적으로 다대다 관계에서는 새로운 테이블이 생성된다.&lt;br&gt;
그리고 column 으로는 관계를 맺게 되는 row 들의 pk 를 저장하게 된다.&lt;/p&gt;
&lt;p&gt;아래의 표는 내가 프로젝트를 진행하며 생성된 다대다 관계 테이블이다.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;id&lt;/th&gt;
&lt;th&gt;package_id&lt;/th&gt;
&lt;th&gt;product_id&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;이 상황에서 나는 다대다 관계 별 수량을 같이 저장해야 할 필요성을 느꼈다.&lt;/p&gt;
&lt;h2&gt;1. 사용방법&lt;/h2&gt;
&lt;p&gt;나의 경우에는 package/product, package/supplement 이렇게 두개의 다대다 관계를 생성했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 패키지 모델&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Package&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TextField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    serial_code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    product_code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    is_split &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BooleanField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    memo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TextField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    business &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Business&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PROTECT&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    product &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ManyToManyField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Product&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    supplement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ManyToManyField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Supplement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        verbose_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;패키지&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;마이그레이션이 완료되어 테이블이 생성된 상황에서 다음과 같이 변경했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# 패키지 모델 변경사항
    ...
    product = models.ManyToManyField(Product, through=&apos;PackageProduct&apos;)
    supplement = models.ManyToManyField(Supplement, through=&apos;PackageSupplement&apos;)
    ...

# 패키지_상품
class PackageProduct(models.Model):
    package = models.ForeignKey(Package, on_delete=models.PROTECT)
    product = models.ForeignKey(Product, on_delete=models.PROTECT)
    quantity = models.SmallIntegerField()
    
    class Meta:
        db_table = &apos;inventory_package_product&apos;


# 패키지_부자재
class PackageSupplement(models.Model):
    package = models.ForeignKey(Package, on_delete=models.PROTECT)
    supplement = models.ForeignKey(Supplement, on_delete=models.PROTECT)
    quantity = models.SmallIntegerField()
    
    class Meta:
        db_table = &apos;inventory_package_supplement&apos;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.djangoproject.com/en/4.0/ref/models/fields/#django.db.models.ManyToManyField.through&quot;&gt;출처1&lt;/a&gt;
&lt;a href=&quot;https://lee-seul.github.io/django/2019/02/21/django-extend-manytomanyfield.html&quot;&gt;출처2&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Serializer 에 대하여]]></title><description><![CDATA[역할 DRF 에서 데이터를 JSON 형태로 직렬화(Serialize) 한다. queryset 이나 모델 인스턴스 같은 데이터를 JSON 으로 바꿔준다고 생각하면 된다. 특징 Django 의 ModelForm…]]></description><link>https://ohyunkyo.github.io/TIL/django-rest-framework/the-serializer-i-know/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django-rest-framework/the-serializer-i-know/</guid><pubDate>Tue, 29 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;역할&lt;/h2&gt;
&lt;p&gt;DRF 에서 데이터를 JSON 형태로 직렬화(Serialize) 한다.&lt;br&gt;
queryset 이나 모델 인스턴스 같은 데이터를 JSON 으로 바꿔준다고 생각하면 된다.&lt;/p&gt;
&lt;h2&gt;특징&lt;/h2&gt;
&lt;p&gt;Django 의 ModelForm 과 유사하다&lt;br&gt;
전달 받은 데이터의 유효성을 검사하고 형변환 할수 있다.&lt;br&gt;
Form 은 데이터를 HTML 형태로 변환 하지만 Serialize 는 JSON 문자열로 변환 해준다.&lt;/p&gt;
&lt;h2&gt;serializer custom field&lt;/h2&gt;
&lt;p&gt;drf 를 사용한 API 서버에서 데이터를 조회할 때 기본적으로는 model 에 포함된 데이터만 조회가 가능하다.&lt;br&gt;
그런데 조회시에 model 에 포함되지 않은 커스텀 데이터를 보고싶다면 어떻게 해야할까??&lt;br&gt;
Serializer fields 중 &lt;code class=&quot;language-text&quot;&gt;SerializerMethodField&lt;/code&gt; 를 사용하면 된다.&lt;/p&gt;
&lt;p&gt;다음예제 처럼 사용하면 되는데, &lt;code class=&quot;language-text&quot;&gt;fields&lt;/code&gt; 옵션이 &lt;code class=&quot;language-text&quot;&gt;&apos;__all__&apos;&lt;/code&gt; 일 경우 자동으로 포함된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductHistorySerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    business_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SerializerMethodField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    quantity_abs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SerializerMethodField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ProductHistory
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;__all__&apos;&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_business_name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;business&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name
    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_quantity_abs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;quantity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;나처럼 foreignKey 필드를 조회할 때 해당 모델의 id 가 아닌 다른 필드 값을 같이 조회하고 싶다면 아주 좋은 옵션인것 같다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.django-rest-framework.org/api-guide/fields/#serializermethodfield&quot;&gt;출처1&lt;/a&gt;
&lt;a href=&quot;https://ssungkang.tistory.com/entry/Django-Serializer-Custom-Field-SerializerMethodField&quot;&gt;출처2&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;가공된 데이터를 포함하는 DB Row 생성&lt;/h2&gt;
&lt;p&gt;form 에서 받은 데이터 그대로 저장하는것이 아닌 추가적인 데이터 가공이 필요한 경우 해당 데이터를 serializer 에 담아 같이 저장하도록 할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# views.py

class MyViewSet(ModelViewSet):
    queryset = ProductHistory.objects.all().order_by(&apos;-created_at&apos;)
    serializer_class = ProductHistorySerializer
    filter_backends = [DjangoFilterBackend]
    filterset_class = ProductHistoryFilter
    
    def create(self, request, *args, **kwargs):
        serializer = self.get_serializer(data=request.data)
    
        if serializer.is_valid():
            ...
            데이터 가공
            ...
            
            instance_data = {
                &apos;business&apos;: business,
                &apos;quantity&apos;: new_quantity,
                &apos;expiry_at&apos;: new_expiry,
                &apos;admin&apos;: admin
            }
            serializer.save(**instance_data)
            
            return Response(serializer.data, HttpStatus.HTTP_200_OK)
        else:
            return Response(&apos;fail&apos;)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://show-me-the-money.tistory.com/entry/Django-Rest-Framework-Serializer%EC%97%90-Model-Instance%EB%A5%BC-%EC%9D%B8%EC%9E%90%EA%B0%92%EC%9C%BC%EB%A1%9C-%EB%B3%B4%EB%82%B4%EA%B8%B0&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;DB 업데이트 하기&lt;/h2&gt;
&lt;p&gt;기존 &lt;code class=&quot;language-text&quot;&gt;create()&lt;/code&gt; 에서 사용하던 소스에 serializer 를 생성할 때 모델 인스턴스를 추가 하기만 하면 된다&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
        model_instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;queryset&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pk&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;pk&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        serializer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_serializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model_instance&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/37021954/django-update-viewset&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[사용자 가이드 만들기]]></title><description><![CDATA[…]]></description><link>https://ohyunkyo.github.io/TIL/software-development-plan/user-guide/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/software-development-plan/user-guide/</guid><pubDate>Thu, 24 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;회사에서 현재 제작중인 웹 페이지 사용법에 대해 교육 해달라는 요청을 받았다.&lt;/p&gt;
&lt;p&gt;교육을 하려면 정리하고 준비를 해야 한다.&lt;br&gt;
그래서 프로젝트 시작때 만들지 못한 기획서와 산출물 함께 만들면 좋겠다는 생각을 했다.&lt;br&gt;
일단 기획서와 산출물의 틀을 만들고 그것을 기반으로 사용자 가이드 문서를 만들 예정이다.&lt;/p&gt;
&lt;h2&gt;1. 기획 시작하기&lt;/h2&gt;
&lt;p&gt;소프트웨어 개발 기획이라는것이 개발자가 해야 할 일을 정의한것이라고 생각하고 있다.&lt;br&gt;
기획 문서가 없다면 무슨 일을 해야 할지 명확히 알 수 없을것이다.&lt;/p&gt;
&lt;p&gt;그렇다면 어떻게 작성해야 잘 만든 기획서가 될 수 있을까?&lt;br&gt;
일단 앞으로 해야할 일을 정의하기 위한 단계를 크게 두가지로 나눠봤다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;사용자가 무엇을 원하는지 파악하기&lt;/li&gt;
&lt;li&gt;어떻게 만들어야 할지 정하기&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;두가지가 애매하게 중첩되는 부분이 있는것같다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;먼저 첫번째 단계를 해결하기 위해 소프트웨어의 목적을 기준으로 사용자의 요구사항을 정의 했다.&lt;/p&gt;
&lt;h2&gt;2. 목적&lt;/h2&gt;
&lt;p&gt;사용자의 설명을 참고하여 내가 생각한 재고관리 웹 사이트의 목적이다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;물류센터 양식으로 된 발주서 생성 자동화&lt;/li&gt;
&lt;li&gt;발송된 재고 처리 자동화&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;그리고 이 두가지 목적을 이루기 위한 요구사항을 다음과 같은 문서로 만들기로 했다.&lt;/p&gt;
&lt;h2&gt;3. 요구사항 정의서&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;사용자 요구사항 정의서&lt;/li&gt;
&lt;li&gt;기능 요구사항 정의서(페이지 요구사항 포함)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;사용자 요구사항은 목적을 기반으로 한 사용자 중심의 요구사항을 담기로 했고,&lt;br&gt;
기능 요구사항은 사용자 요구사항을 해결할 수 있는 기능을 적기로 했다.&lt;/p&gt;
&lt;h2&gt;4. 구조설계&lt;/h2&gt;
&lt;p&gt;구조는 모델과 페이지 설계 한것을 바탕으로 트리 형태의 구조(IA)를 만들 예정이다.&lt;/p&gt;
&lt;h2&gt;5. 사용자 가이드 제작&lt;/h2&gt;
&lt;p&gt;여기까지 정리한 문서 제작 틀을 기반으로 웹 사이트 사용자 가이드를 제작했다.&lt;/p&gt;
&lt;h2&gt;6. flowchart&lt;/h2&gt;
&lt;h2&gt;7. 화면 설계&lt;/h2&gt;
&lt;h2&gt;8. 리뷰&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://6987.tistory.com/entry/%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4-%EA%B0%9C%EB%B0%9C-%ED%9A%8C%EC%82%AC%EC%97%90%EC%84%9C-%EA%B8%B0%ED%9A%8D%EC%9D%B4%EB%9E%80&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[v-b-modal 변수와 함께 사용하기]]></title><description><![CDATA[0. 서론 리스트 페이지에서 각 항목마다 버튼을 배치하고, 클릭시 항목별로 다른 모달이 팝업되도록 하고싶었다. 1. 적용 방법 처음 사용하던 소스는 다음과 같다.  안에서 같은 의 모달을 여러번 사용했다. 검색 후 다음과 같이 변경했다. 출처 9…]]></description><link>https://ohyunkyo.github.io/TIL/vue-js/dynamic-v-b-modal/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/vue-js/dynamic-v-b-modal/</guid><pubDate>Thu, 24 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;리스트 페이지에서 각 항목마다 버튼을 배치하고, 클릭시 항목별로 다른 모달이 팝업되도록 하고싶었다.&lt;/p&gt;
&lt;h2&gt;1. 적용 방법&lt;/h2&gt;
&lt;p&gt;처음 사용하던 소스는 다음과 같다. &lt;code class=&quot;language-text&quot;&gt;for loop&lt;/code&gt; 안에서 같은 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;의 모달을 여러번 사용했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;&amp;lt;b-tr v-for=&amp;quot;inventory_process in inventory_process_list&amp;quot; :key=&amp;quot;inventory_process.id&amp;quot;&amp;gt;
...
&amp;lt;b-td class=&amp;quot;text-center&amp;quot;&amp;gt;
  &amp;lt;b-button variant=&amp;quot;danger&amp;quot; v-b-modal.modal-block-vcenter&amp;gt;삭제&amp;lt;/b-button&amp;gt;
&amp;lt;/b-td&amp;gt;
&amp;lt;!-- Vertically Centered Block Modal --&amp;gt;
&amp;lt;b-modal id=&amp;quot;modal-block-vcenter&amp;quot; body-class=&amp;quot;p-0&amp;quot; centered hide-footer hide-header&amp;gt;
  &amp;lt;div class=&amp;quot;block block-rounded block-themed block-transparent mb-0&amp;quot;&amp;gt;
    &amp;lt;div class=&amp;quot;block-header bg-primary-dark&amp;quot;&amp;gt;
...
&amp;lt;/b-tr&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;검색 후 다음과 같이 변경했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;기존 : &amp;lt;b-button variant=&amp;quot;danger&amp;quot; v-b-modal.modal-block-vcenter&amp;gt;삭제&amp;lt;/b-button&amp;gt;

변경 : &amp;lt;b-button variant=&amp;quot;danger&amp;quot; v-b-modal=&amp;quot;&amp;#39;modal-block-vcenter-&amp;#39; + inventory_process.id&amp;quot;&amp;gt;삭제&amp;lt;/b-button&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;기존 : &amp;lt;b-modal id=&amp;quot;modal-block-vcenter&amp;quot; body-class=&amp;quot;p-0&amp;quot; centered hide-footer hide-header&amp;gt;

변경 : &amp;lt;b-modal :id=&amp;quot;`modal-block-vcenter-`+inventory_process.id&amp;quot; body-class=&amp;quot;p-0&amp;quot; centered hide-footer hide-header&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/47281857/bind-modal-to-corresponding-button-after-a-v-for&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;99. 끝나고 나서&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;for loop&lt;/code&gt; 내부에 모달을 만들지 말고 하나의 모달에 버튼을 누를때마다 데이터를 전달하는 방식으로 하는것이 더 좋았을것같다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Vue Router 를 사용하여 페이지 새로고침 하기]]></title><description><![CDATA[0. 서론 모달에서  요청이 완료되면  라우트로 이동하도록 하고싶었다. 그런데 이동하고자 하는 라우트와 현재 라우트가 동일했기 때문에 에러가 발생했다.…]]></description><link>https://ohyunkyo.github.io/TIL/vue-js/vue-router-refresh/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/vue-js/vue-router-refresh/</guid><pubDate>Thu, 24 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;모달에서 &lt;code class=&quot;language-text&quot;&gt;DELETE&lt;/code&gt; 요청이 완료되면 &lt;code class=&quot;language-text&quot;&gt;inventory process list&lt;/code&gt; 라우트로 이동하도록 하고싶었다.&lt;br&gt;
그런데 이동하고자 하는 라우트와 현재 라우트가 동일했기 때문에 에러가 발생했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;# 기존 소스

this.$router.push({name: &amp;#39;inventory process list&amp;#39;})&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;1. 해결 방법&lt;/h2&gt;
&lt;p&gt;동일한 라우트로 이동하는것이 문제라면 페이지를 새로고침 하면 되겠다고 생각했다.&lt;br&gt;
그러나 Vue Router 에는 &lt;code class=&quot;language-text&quot;&gt;reload()&lt;/code&gt; 메소드가 없다는것 같아서 다른 방법을 찾아봤다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;# 변경한 소스

this.$router.go(this.$router.currentRoute);&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;go()&lt;/code&gt; 메소드를 사용하여 현재 라우트로 이동하도록 변경했더니 해결되었다.&lt;/p&gt;
&lt;h2&gt;2. Vue Router 의 메소드&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;push()&lt;/code&gt; 와 &lt;code class=&quot;language-text&quot;&gt;go()&lt;/code&gt; 메소드에는 어떤 차이가 있길래 같은 라우트를 인자로 전달했음에도 다른 결과를 보여주는걸까?&lt;/p&gt;
&lt;p&gt;처음 아래의 블로그를 봤을땐 &lt;code class=&quot;language-text&quot;&gt;this.$router.currentRoute&lt;/code&gt; 가 정수를 리턴할것이라고 생각했지만 실제로 콘솔창에 출력해본 결과, 현재 라우트에 대한 객체가 출력되었다.&lt;/p&gt;
&lt;p&gt;내 생각과 좀 다른걸로 봐선 Vue Router 의 메소드가 작동하는 원리는 Vue Router 에 대해서 따로 공부하면서 알아봐야 할것같다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://sunny921.github.io/posts/vuejs-router-03/&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[django-filter 라이브러리 사용법]]></title><description><![CDATA[0. 서론 API 엔드포인트에 쿼리스트링을 추가하여 필터링 된 데이터를 가져오고 싶어서 찾아보게 되었다. django-rest-framework 공식 사이트 를 참고했다…]]></description><link>https://ohyunkyo.github.io/TIL/django-rest-framework/django-filter/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django-rest-framework/django-filter/</guid><pubDate>Wed, 23 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;API 엔드포인트에 쿼리스트링을 추가하여 필터링 된 데이터를 가져오고 싶어서 찾아보게 되었다.&lt;br&gt;
&lt;a href=&quot;https://www.django-rest-framework.org/api-guide/filtering/#api-guide&quot;&gt;django-rest-framework 공식 사이트&lt;/a&gt; 를 참고했다&lt;/p&gt;
&lt;h2&gt;1. 설치 후 설정하기&lt;/h2&gt;
&lt;p&gt;가장먼저 해당 라이브러리를 설치해야 한다&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;pip &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; django-filter&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그 다음 django 에 사용할 수 있도록 설정한다. &lt;code class=&quot;language-text&quot;&gt;settings.py&lt;/code&gt; 파일의 적절한 위치에 아래 설정들을 추가한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;INSTALLED_APPS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token string&quot;&gt;&apos;django_filters&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;REST_FRAMEWORK &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token string&quot;&gt;&apos;DEFAULT_FILTER_BACKENDS&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;django_filters.rest_framework.DjangoFilterBackend&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;2. 적용하기&lt;/h2&gt;
&lt;p&gt;설치와 설정이 끝났다면 ViewSet 클래스에 &lt;code class=&quot;language-text&quot;&gt;filter_backends&lt;/code&gt; 와 &lt;code class=&quot;language-text&quot;&gt;filterset_fields&lt;/code&gt; 를 추가하여 아주 쉽게 적용할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# views.py&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django_filters&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; DjangoFilterBackend
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;viewsets &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ModelViewSet

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Product
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ProductSerializer

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductModelViewSet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ModelViewSet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Product&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    serializer_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ProductSerializer
    filter_backends &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;DjangoFilterBackend&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    filterset_fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;business&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;사용할 때에는 &lt;code class=&quot;language-text&quot;&gt;filterset_fields&lt;/code&gt; 에 포함된 컬럼을 쿼리스트링으로 사용하여 다음과 같이 요청하면 된다.&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;http://localhost:8000/api/product/?business=1&amp;amp;name=샘플&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;3. 키워드를 포함하는 값 검색하기&lt;/h2&gt;
&lt;p&gt;하지만 위와 같이 사용하면 키워드와 정확히 일치하는 데이터만을 반환한다.&lt;br&gt;
django ORM 의 &lt;code class=&quot;language-text&quot;&gt;model.objects.filter=name__icontains=&apos;샘플&apos;&lt;/code&gt; 과 같은 결과를 받고싶다면 다음과 같이 하면 된다.&lt;/p&gt;
&lt;p&gt;먼저 커스텀 필터를 추가해야 한다.&lt;br&gt;
따로 파일을 추가하는것이 관리하기 편할것 같아서 프로젝트 파일 안에 &lt;code class=&quot;language-text&quot;&gt;filter.py&lt;/code&gt; 파일을 추가하고 필터를 생성했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# filters.py&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; django_filters
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django_filters &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; FilterSet

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Product


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductFilter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;FilterSet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; django_filters&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharFilter&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lookup_expr&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;icontains&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Product
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;business&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Meta&lt;/code&gt; 클래스의 &lt;code class=&quot;language-text&quot;&gt;fields&lt;/code&gt; 에는 정의했지만 &lt;code class=&quot;language-text&quot;&gt;ProductFilter&lt;/code&gt; 클래스에선 정의하지 않은 컬럼(business)의 경우 기존과 동일하게 정확히 일치하는 데이터를 가져온다.&lt;/p&gt;
&lt;p&gt;이제 &lt;code class=&quot;language-text&quot;&gt;filterset_fields&lt;/code&gt; 를 &lt;code class=&quot;language-text&quot;&gt;filterset_class&lt;/code&gt; 로 변경 후 생성한 필터 클래스를 참조하도록 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# views.py&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django_filters&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; DjangoFilterBackend
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;viewsets &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ModelViewSet

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;filters &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ProductFilter
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Product
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ProductSerializer

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductModelViewSet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ModelViewSet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Product&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    serializer_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ProductSerializer
    filter_backends &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;DjangoFilterBackend&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    filterset_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ProductFilter&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/65158059/django-filters-icontains-type-of-lookup-expression-doesnt-work-properly&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;99. 끝나고 나서&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;serializer&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;filter_backends&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;filterset_class&lt;/code&gt; 등 &lt;code class=&quot;language-text&quot;&gt;ModelViewSet&lt;/code&gt; 의 파라미터들이 어떻게 작동하는지 정확히 알지 못하고 사용중이다.&lt;br&gt;
일단 front/back 분리가 완료되면 부족했던점에 대해 알아봐야 할것같다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[맥북 단축키]]></title><description><![CDATA[⌘ + H = 어플리케이션 가리기. 화면에서 안보이는 상태가 된다. ⌘ + ⌃ + V = 서식 없이 데이터만 복사하기.]]></description><link>https://ohyunkyo.github.io/TIL/mac-os/shortcuts/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/mac-os/shortcuts/</guid><pubDate>Wed, 23 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;⌘ + H = 어플리케이션 가리기. 화면에서 안보이는 상태가 된다.&lt;/p&gt;
&lt;p&gt;⌘ + ⌃ + V = 서식 없이 데이터만 복사하기.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[레드햇 오픈시프트]]></title><description><![CDATA[0. 서론 레드햇 개발자포럼 웨비나에서 알게된 레드햇 오픈시프트에 대해 간단하게 정리해봤다. 웨비나에서는 오픈시프트의 각 기능을 사용하는 방법에 대해 강의했는데, 나는 CI/CD…]]></description><link>https://ohyunkyo.github.io/TIL/devops/redhat-openshift/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/devops/redhat-openshift/</guid><pubDate>Tue, 22 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;레드햇 개발자포럼 웨비나에서 알게된 레드햇 오픈시프트에 대해 간단하게 정리해봤다.&lt;br&gt;
웨비나에서는 오픈시프트의 각 기능을 사용하는 방법에 대해 강의했는데,&lt;br&gt;
나는 CI/CD 에 대해 잘 알지 못해서 사용 방법 보다는 어떤 역할을 하는지에 대해서만 웨비나 내용을 기반으로 따로 알아보고 정리했다.&lt;/p&gt;
&lt;h2&gt;1. 레드햇은 실습 가능한 환경을 제공한다.&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://developers.redhat.com/&quot;&gt;레드햇 개발자 페이지&lt;/a&gt; 에서 간단하게 테스트 가능한 환경을 제공해준다.&lt;br&gt;
단순히 교육을 듣고 이해하는것을 넘어, 복잡한 환경 구축 없이도 바로 실습 가능한것이 장점이라고 느꼈다.&lt;br&gt;
오픈시프트가 아닌 다른 항목도 실습 가능한 부분이 있다.&lt;/p&gt;
&lt;h2&gt;2. 오픈시프트란 무엇인가&lt;/h2&gt;
&lt;p&gt;오픈시프트는 쿠버네티스 환경을 실행할 수 있도록 쿠버네티스에 추가된 소프트웨어 컬렉션이라고 한다.&lt;br&gt;
쿠버네티스에서 하던 작업을 더 쉽게 수행 가능하도록 도와준다는 것이다.&lt;/p&gt;
&lt;p&gt;개발자는 어플리케이션 수정사항을 깃허브에 푸쉬 하기만 하면 자동으로 어플리케이션이 배포된다.&lt;br&gt;
만약 다른 수정사항을 반영하여 다시 푸쉬 한다면 중단없이 수정된 버전이 다시 배포된다.&lt;/p&gt;
&lt;p&gt;운영 엔지니어는 웹 콘솔을 통해 더욱 편리하게 어플리케이션과 인프라를 관리한다.&lt;br&gt;
또한 호스트를 확장하고 클러스터에 추가하는 과정을 자동화할 수 있다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://youtu.be/xEofcsd6HGg&quot;&gt;출처1&lt;/a&gt;,
&lt;a href=&quot;https://youtu.be/KTN_QBuDplo&quot;&gt;출처2&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;3. 어플리케이션 모니터링 하기&lt;/h2&gt;
&lt;p&gt;쿠버네티스에서 컨테이너가 잘 작동하는지 확인해야 자동화 관리를 할 수 있다고 한다.&lt;/p&gt;
&lt;p&gt;오픈시프트는 컨테이너의 상태를 확인할 수 있도록 API 엔드포인트를 제공한다.&lt;br&gt;
굉장히 많은 종류의 상태를 확인할 수 있는데, 쿠버네티스에서는 전체 상태를 확인하기 힘들었다고 한다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://developers.redhat.com/courses/spring-boot/monitoring-applications&quot;&gt;실습 URL&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;4. 오픈시프트 파이프라인&lt;/h2&gt;
&lt;p&gt;오픈시프트 파이프라인은 쿠버네티스 기반의 클라우드 네이티브 CI/CD 솔루션이다.&lt;br&gt;
Tekton 을 사용하여 여러 플랫폼에서 배포를 자동화 한다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://access.redhat.com/documentation/ko-kr/openshift_container_platform/4.6/html/pipelines/understanding-openshift-pipelines&quot;&gt;출처&lt;/a&gt;,
&lt;a href=&quot;https://developers.redhat.com/courses/gitops/getting-started-openshift-pipelines&quot;&gt;실습 URL&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;5. 오픈시프트 깃옵스&lt;/h2&gt;
&lt;p&gt;ArgoCD 를 기반으로 제작된 오픈시프트 깃옵스는 깃에 저장된 설정을 쿠버네티스 환경에 배포하고 환경을 유지하도록 지원한다.&lt;/p&gt;
&lt;p&gt;한마디로 쿠버네티스의 리소스를 코드를 통해 원하는 상태로 유지한다는것이다.&lt;br&gt;
설정이 담긴 코드를 수정 후 깃에 푸쉬 하면 자동으로 해당 설정이 변화한것을 감지하고 환경을 다시 설정한다고 한다.&lt;/p&gt;
&lt;h2&gt;6. 휴먼에러&lt;/h2&gt;
&lt;p&gt;실행 방법이 코드로 정의되면 휴먼에러를 줄일 수 있다.&lt;/p&gt;
&lt;h2&gt;99. 끝나고 나서&lt;/h2&gt;
&lt;p&gt;CI/CD 에 대한 개념이 잘 잡혀있지 않다보니 웨비나에 참여하면서 각 기능의 특장점에 집중하지 못했고 기본적인 수행 기능만 알게 되는것으로 끝났다.&lt;br&gt;
그리고 각 기능에 대한 이해가 없다보니 설명도 많이 부족하다.&lt;/p&gt;
&lt;p&gt;재고관리 웹 front/back 분리가 완료되고 나면 CI/CD 에 대해서 공부할 예정인데, 그 이후에 다시 이 문서를 더 보완 할 수 있으면 좋을것 같다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[vue.js 기초 사용법]]></title><description><![CDATA[개요 백엔드 개발자로서 구매한 템플릿을 변경하는데 필요한 부분만 간단히 정리. 라우팅 특정 URL 에 특정 컴포넌트를 라우팅 시킨다. URL 의 경로와 이름을 지정한다. 백엔드와 통신하기 HTTP 통신 라이브러리인 axios…]]></description><link>https://ohyunkyo.github.io/TIL/vue-js/base-of-vue/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/vue-js/base-of-vue/</guid><pubDate>Mon, 21 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;개요&lt;/h2&gt;
&lt;p&gt;백엔드 개발자로서 구매한 템플릿을 변경하는데 필요한 부분만 간단히 정리.&lt;/p&gt;
&lt;h2&gt;라우팅&lt;/h2&gt;
&lt;p&gt;특정 URL 에 특정 컴포넌트를 라우팅 시킨다.&lt;br&gt;
URL 의 경로와 이름을 지정한다.&lt;/p&gt;
&lt;h2&gt;백엔드와 통신하기&lt;/h2&gt;
&lt;p&gt;HTTP 통신 라이브러리인 axios 를 사용한다.&lt;br&gt;
백엔드 API 엔드포인트로 요청한 뒤 결과 데이터를 사용 할 수 있다.&lt;/p&gt;
&lt;h2&gt;받아온 데이터 페이지에 전달하기&lt;/h2&gt;
&lt;p&gt;url 의 데이터를 받아 business_list 에 전달했다.&lt;br&gt;
data 에서 return 하는것은 vue 문법인것같다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;&amp;lt;script&amp;gt;
    import axios from &amp;quot;axios&amp;quot;;
    let url = &amp;quot;http://localhost:8000/api/business&amp;quot;;
    export default {
      data () {
        return {
          business_list: []
        }
      },
      mounted() {
        axios({
          method: &amp;quot;GET&amp;quot;,
          url: url
        })
        .then(response =&amp;gt; {
            this.business_list = response.data;
          })
          .catch(response =&amp;gt; {
            console.log(&amp;quot;실패!!&amp;quot;, response);
          });
    
      }
    }
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;유효성 검사하기&lt;/h2&gt;
&lt;p&gt;validation 모듈을 사용하여 유효성검사가 가능하다.&lt;br&gt;
유효성 검사를 통과했을 때 데이터를 전송한다.&lt;br&gt;
front 의 유효성 검사이기 때문에 무조건 믿지 말고 back 에서도 해야할것 같다.&lt;/p&gt;
&lt;h2&gt;태그에서 변수 사용하기&lt;/h2&gt;
&lt;p&gt;다음 예제처럼 &lt;code class=&quot;language-text&quot;&gt;title&lt;/code&gt; 이 아닌 &lt;code class=&quot;language-text&quot;&gt;:title&lt;/code&gt; 을 사용하면 value 에 변수를 사용할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;&amp;lt;base-page-heading :title=&amp;quot;name&amp;quot;&amp;gt;
&amp;lt;/base-page-heading&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;특정 라우터로 이동 가능한 버튼&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;router-link&lt;/code&gt; 태그를 사용하면 특정 라우터에 인자를 전달하여 이동시킬 수 있다.&lt;br&gt;
공식 문서를 참고했는데도 warning 이 발생하여 더 알아봐야 할것같다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;&amp;lt;b-button variant=&amp;quot;info&amp;quot; size=&amp;quot;lg&amp;quot; router-link :to=&amp;quot;{name: &amp;#39;business update&amp;#39;, params: {id: id}}&amp;quot;&amp;gt;수정하기&amp;lt;/b-button&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;수정시 form 에 기존 데이터 넣기&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;&amp;lt;script&amp;gt;
    ...
    mounted() {
    axios({
    method: &amp;quot;GET&amp;quot;,
    url: url+this.$route.params.id
    })
    .then(response =&amp;gt; {
    console.log(response.data);
    this.form.id = response.data.id;
    this.form.name = response.data.name;
    this.form.description = response.data.description;
    })
    .catch(response =&amp;gt; {
    console.log(&amp;quot;실패!!&amp;quot;, response);
    });
    },
    ...
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;PATCH 요청시 유의할점&lt;/h2&gt;
&lt;p&gt;URL 의 가장 뒤에 &lt;code class=&quot;language-text&quot;&gt;/&lt;/code&gt; 를 넣어줘야한다. 모든 요청시 이런식으로 해야하는지는 잘 모르겠다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;vue&quot;&gt;&lt;pre class=&quot;language-vue&quot;&gt;&lt;code class=&quot;language-vue&quot;&gt;&amp;lt;script&amp;gt;
    ...
    url: url+this.$route.params.id+&amp;quot;/&amp;quot;,
    ...
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[내가 사용하는 pycharm]]></title><description><![CDATA[Run Django Server pycharm 에서 run configurations 을 통해 테스트 서버를 실행하는 방법 정리 프로젝트 파이썬 인터프리터 설정 PyCharm - Preferences - Project: {project_name…]]></description><link>https://ohyunkyo.github.io/TIL/ide/the-pycharm-i-know/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/ide/the-pycharm-i-know/</guid><pubDate>Fri, 18 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Run Django Server&lt;/h2&gt;
&lt;p&gt;pycharm 에서 run configurations 을 통해 테스트 서버를 실행하는 방법 정리&lt;/p&gt;
&lt;h3&gt;프로젝트 파이썬 인터프리터 설정&lt;/h3&gt;
&lt;p&gt;PyCharm - Preferences - Project: {project_name} - Python Interpreter 항목에서 적절한 인터프리터 버전을 선택한다&lt;/p&gt;
&lt;h3&gt;실행 환경 설정&lt;/h3&gt;
&lt;p&gt;Run - Edit Configurations 에서 새로운 실행 환경을 생성한다.&lt;br&gt;
settings 를 분리했다면 Environment variables 옵션에 DJANGO_SETTINGS_MODULE 을 추가한다.&lt;br&gt;
Python Interpreter 옵션도 적절히 선택한다.&lt;/p&gt;
&lt;h2&gt;Bookmark&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;F3 = 해당 라인 북마크 지정&lt;/li&gt;
&lt;li&gt;⌥ + F3 = 해당 라인 기억북마크(Mnemonic Bookmark) 지정&lt;/li&gt;
&lt;li&gt;북마크, 기억북마크 라인에서 + F3 = 지정 해제&lt;/li&gt;
&lt;li&gt;⌃ + 숫자 = 기억북마크에 저장된 숫자로 이동&lt;/li&gt;
&lt;li&gt;⌘ + F3 = 전체 북마크 목록을 본다&lt;/li&gt;
&lt;li&gt;전체 북마크 목록 + 알파벳 = 알파벳에 설정된 기억북마크로 이동&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.jetbrains.com/ko/2020/03/11/top-15-intellij-idea-shortcuts_ko/&quot;&gt;추가 단축키&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[내가 이해한 vue.js]]></title><description><![CDATA[vue.js 를 선택한 이유 지금 내가 프론트엔드 프레임워크를 사용하려면 비교적 배우기 쉽고 복잡하지 않은 것을 선택하여 시작 하는것이 유리하다고 생각했다. vue.js…]]></description><link>https://ohyunkyo.github.io/TIL/vue-js/the-vue-js-i-know/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/vue-js/the-vue-js-i-know/</guid><pubDate>Fri, 18 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;vue.js 를 선택한 이유&lt;/h2&gt;
&lt;p&gt;지금 내가 프론트엔드 프레임워크를 사용하려면 비교적 배우기 쉽고 복잡하지 않은 것을 선택하여 시작 하는것이 유리하다고 생각했다.&lt;br&gt;
vue.js 는 &lt;a href=&quot;https://velog.io/@leehaeun0/React-vs-Vue-%EC%9E%A5%EB%8B%A8%EC%A0%90-%EB%B9%84%EA%B5%90&quot;&gt;작은 프로젝트를 빠르게 만들기 쉽고, 자바스크립트 문법에 대해 잘 몰라도 된단다.&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;vue.js 란 무엇일까&lt;/h2&gt;
&lt;p&gt;이름에서 보이는것처럼 js 기반의 웹 프레임워크이다.&lt;br&gt;
다른 프레임워크와는 다르게 html 에 vue 문법을 조합하여 사용하는 방식이다.&lt;/p&gt;
&lt;h2&gt;이걸 왜 쓰나요?&lt;/h2&gt;
&lt;p&gt;간단히 말하면 이게 더 편리하다는거다.&lt;/p&gt;
&lt;h3&gt;Virtual DOM&lt;/h3&gt;
&lt;p&gt;DOM 이라는건 HTML 문서를 트리 구조로 표현한것 이라고 생각하면 된다.&lt;br&gt;
이 DOM 을 통해 HTML 과 CSS 를 조작할 수 있는것이다.&lt;/p&gt;
&lt;p&gt;하나의 페이지만 봐도 수많은 HTML 태그가 있고 그만큼 DOM 요소들도 많다.&lt;br&gt;
그런데 만약 사용자 요청에 따라 HTML 을 변경해야 할 일이 많다면 관리 해야 할 DOM 요소들이 많아지고,
그만큼 개발자가 신경써야 할 사항도 점점 많아지게 된다.&lt;/p&gt;
&lt;p&gt;이때 기존 방식보다 더 단순하고 편리하게 관리 가능한 V-DOM 을 사용 한다는것이다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[requirements 파일 생성하기]]></title><description><![CDATA[역할 현재 프로젝트에서 필요로 하는 파이썬 패키지들 목록과 버전을 정의한 파일. 새로운 환경에서 해당 파일을 사용하여 한번에 패키지들을 설치할 수 있다. 파일 생성 방법  파일 사용 방법  유의사항 보통 프로젝트 디렉토리 내부에 생성하는듯 하다.]]></description><link>https://ohyunkyo.github.io/TIL/django/generate-requirement-file/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django/generate-requirement-file/</guid><pubDate>Thu, 17 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;역할&lt;/h2&gt;
&lt;p&gt;현재 프로젝트에서 필요로 하는 파이썬 패키지들 목록과 버전을 정의한 파일.&lt;br&gt;
새로운 환경에서 해당 파일을 사용하여 한번에 패키지들을 설치할 수 있다.&lt;/p&gt;
&lt;h2&gt;파일 생성 방법&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;$ pip freeze &gt; requirements.txt&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;파일 사용 방법&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;$ pip install -r requirements.txt&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;유의사항&lt;/h2&gt;
&lt;p&gt;보통 프로젝트 디렉토리 내부에 생성하는듯 하다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[vue.js 설치해보기]]></title><description><![CDATA[0. 서론 앞으로 개발할 예정인 재고관리 API 서버와 연동하기 위해 프론트엔드 프레임워크를 사용하여 간단히 화면을 구성해보기로 했다. 1. 설치 일단 vue.js 를 먼저 설치 한 뒤 프로젝트를 생성해줬다.…]]></description><link>https://ohyunkyo.github.io/TIL/vue-js/install-vue/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/vue-js/install-vue/</guid><pubDate>Thu, 17 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;앞으로 개발할 예정인 재고관리 API 서버와 연동하기 위해 프론트엔드 프레임워크를 사용하여 간단히 화면을 구성해보기로 했다.&lt;/p&gt;
&lt;h2&gt;1. 설치&lt;/h2&gt;
&lt;p&gt;일단 vue.js 를 먼저 설치 한 뒤 프로젝트를 생성해줬다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -g @vue/cli
vue create project_name&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;2. 실행&lt;/h2&gt;
&lt;p&gt;서버를 실행시킨다. 실행 전 의존성 모듈들을 설치한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; run serve&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;내부망 IP 로도 접근 가능하도록 설정된다. django 에서 &lt;code class=&quot;language-text&quot;&gt;runserver&lt;/code&gt; 를 실행했을땐 안되던것이다.&lt;/p&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[npm 과 yarn. 정의하고 선택해보기.]]></title><description><![CDATA[npm 이란? npm(node package manager)은 node.js 의 기본 패키지 관리 툴이다. node.js 로 만들어진 모듈을 다운로드 하고 설치해준다. npm…]]></description><link>https://ohyunkyo.github.io/TIL/front-end/npm-and-yarn/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/front-end/npm-and-yarn/</guid><pubDate>Thu, 17 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;npm 이란?&lt;/h2&gt;
&lt;p&gt;npm(node package manager)은 node.js 의 기본 패키지 관리 툴이다.&lt;br&gt;
node.js 로 만들어진 모듈을 다운로드 하고 설치해준다.&lt;br&gt;
npm 을 사용하지 않으면 필요한 모듈을 개별적으로 다운로드 하고 프로젝트 파일로 옮겨야 한다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;redhat 계열 리눅스의 rpm 과 비슷한 기능을 하는것처럼 느껴진다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;몇가지 사용 방법&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;npm init&lt;/code&gt; : package.json 파일을 생성한다.&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;npm install&lt;/code&gt; : package.json 파일에 정의된 의존성 모듈을 설치한다.&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;npm cache clean --force&lt;/code&gt; : npm 의 캐시를 모두 삭제한다.&lt;/p&gt;
&lt;h3&gt;package.json&lt;/h3&gt;
&lt;p&gt;프로젝트에 대한 정보와 의존성을 정의한 파일이다.&lt;br&gt;
해당 프로젝트가 어느곳에서든지 원활히 실행될 수 있도록 개발 환경을 구축할 수 있도록 도와준다.&lt;/p&gt;
&lt;h2&gt;yarn 이란?&lt;/h2&gt;
&lt;p&gt;yarn 은 npm 의 단점을 보완하기 위해 만들어진 툴이다.
더 빠르고 안정적이라고 한다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;캐시를 통해 한번 다운로드한 파일은 다시 다운로드 하지 않는다는데 동일한 패키지에서만 캐시를 사용하는지 궁금하다&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;어떤것을 선택해야 할까&lt;/h2&gt;
&lt;p&gt;일단 npm 을 사용해보고 yarn 의 필요성을 느끼게 되었을때 넘어가는게 자연스러운 흐름이라는 생각이 든다.&lt;br&gt;
써보지도 않은것의 단점을 느낄순 없으니 앞으로 프로젝트 진행하면서 알아가봐야겠다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[장고에서 drf 로 마이그레이션 시도]]></title><description><![CDATA[0. 서론 재고관리 프로젝트 코드 리팩토링 과정중 가장 먼저 drf 로 마이그레이션 하는것을 선택했다. 효율성을 위해 프론트와 백엔드를 구분하고 코드 재사용을 위한 선택이였다. 1. 시작하기 전 API 에서는 Json…]]></description><link>https://ohyunkyo.github.io/TIL/django-rest-framework/django-to-drf/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django-rest-framework/django-to-drf/</guid><pubDate>Wed, 16 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;재고관리 프로젝트 코드 리팩토링 과정중 가장 먼저 drf 로 마이그레이션 하는것을 선택했다.&lt;br&gt;
효율성을 위해 프론트와 백엔드를 구분하고 코드 재사용을 위한 선택이였다.&lt;/p&gt;
&lt;h2&gt;1. 시작하기 전&lt;/h2&gt;
&lt;p&gt;API 에서는 Json 데이터를 리턴하고 프론트엔드 프레임워크에서 리턴받은 데이터를 보여주면 되겠다고 생각했다.&lt;br&gt;
당장 프론트엔드 프레임워크를 배우긴 힘들어서 방법에 대해 고민을 하던중 drf 공식문서에서 html 을 리턴하는것에도 적합하다는 내용을 보고 바로 시작했다.&lt;/p&gt;
&lt;h2&gt;2. 첫 시도&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;drf 공식 문서를 참고하여 데이터와 함께 &lt;code class=&quot;language-text&quot;&gt;business_list.html&lt;/code&gt; 을 리턴했다. 간단했지만 페이징이 불가능했다.&lt;/li&gt;
&lt;li&gt;페이징 방법을 찾다가 &lt;code class=&quot;language-text&quot;&gt;ViewSet&lt;/code&gt; 과 &lt;code class=&quot;language-text&quot;&gt;Serializer&lt;/code&gt; 를 알게되어 사용해보았지만 잘 되지 않았다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;routers&lt;/code&gt; 도 사용했는데 URL name 이 &lt;code class=&quot;language-text&quot;&gt;{basename}-list&lt;/code&gt; 형식으로 생성되지 않는것 같았다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;어느 하나 내가 원하는 대로 되지 않아서 커밋되지 않은 변경 사항을 모두 버리고 다시 생각해보기로 했다.&lt;br&gt;
그리고 프론트, 백엔드가 구분되어야 하기 때문에 drf 를 사용하지 않을수 없다는 결론을 내렸다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[프로젝트 내부의 API를 호출하면 안되는 이유]]></title><description><![CDATA[0. 서론 월별 재고 확인을 위해 각 상품의 재고를 가져와 월별로 출력하는 기능이 필요했다. 이 월별 재고를 다른곳에서도 확인 가능할 수 있도록 drf 를 사용해 RESTful API 로 데이터를 제공하기로 결정했다. 1. REST API…]]></description><link>https://ohyunkyo.github.io/TIL/django/request-to-internal-drf-api/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/django/request-to-internal-drf-api/</guid><pubDate>Mon, 14 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;월별 재고 확인을 위해 각 상품의 재고를 가져와 월별로 출력하는 기능이 필요했다.&lt;br&gt;
이 월별 재고를 다른곳에서도 확인 가능할 수 있도록 drf 를 사용해 RESTful API 로 데이터를 제공하기로 결정했다.&lt;/p&gt;
&lt;h2&gt;1. REST API 제작&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;year/month/product_id&lt;/code&gt; 형태의 url 로 요청하면 해당 상품의 월별 최종 재고 데이터를 &lt;code class=&quot;language-text&quot;&gt;JsonResponse&lt;/code&gt; 로 반환 하도록 제작했다.&lt;/p&gt;
&lt;h2&gt;2. 월별 재고 페이지 제작&lt;/h2&gt;
&lt;p&gt;앞서 제작한 API 를 호출하여 특정연도에 상품의 월별 재고를 출력하는 페이지를 제작하려고 했다.&lt;br&gt;
이때 해당 API 의 endpoint 로 요청하여 데이터를 받는 방법과 API View 를 호출하는 방식을 생각했었는데 첫번째 방법은 문제가 있을것 같아서 두번째 방법으로 해결했다.&lt;/p&gt;
&lt;h2&gt;3. 어떤 문제가 있을까?&lt;/h2&gt;
&lt;p&gt;같은 앱에 있는 API endpoint 로 요청하는것은 좋은 예제라고 볼 수 없다고 한다. &lt;a href=&quot;https://stackoverflow.com/questions/60529072/django-correct-method-of-consuming-my-own-rest-api-internally-in-the-views-py&quot;&gt;(출처1)&lt;/a&gt;&lt;br&gt;
최대한 이런 방법을 피하고 해당 클래스에 직접 액세스해야 한다고 하는데 아마도 속도 문제인것 같다.  &lt;a href=&quot;https://www.reddit.com/r/django/comments/7sxiqn/internal_api_requests_does_it_make_sense_for_a/&quot;&gt;(출처2)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;기본적으로 이 방법은 nginx 와 uwsgi 를 통해 새로운 HTTP 요청을 전달하기 때문에 더 많은 시간이 소요된다고 한다.&lt;br&gt;
더 많은 시간이 소요 된다는것은 더 많은 자원을 사용 한다는뜻이고, 서버와 어플리케이션 제공자에게 부담이 될 수밖에 없다.&lt;/p&gt;
&lt;h2&gt;99. 끝나고 나서&lt;/h2&gt;
&lt;p&gt;내가 원하던 형태로 작동한다. 그러나 이것이 정답인것 같지는 않다.&lt;br&gt;
&lt;a href=&quot;https://github.com/ohyunkyo/inventory-manage/commit/f2b6c40806074f10650c0e6e64b4b806bc538b91#r68620070&quot;&gt;지금 사용한 방법&lt;/a&gt; 보다 더 좋은 방법이 있을것같다는 생각이 든다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://groups.google.com/g/django-rest-framework/c/26tIiJB7vQw&quot;&gt;drf 구글 그룹&lt;/a&gt; 에서는 믹스인 사용을 권장한다.&lt;br&gt;
기능 개발이 모두 끝나면 코드 리팩토링할 예정인데, 믹스인에 대해 알아보고 필요한 부분에 적용해야겠다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[객체지향 개념 기초]]></title><description><![CDATA[0. 서론 장고를 공부하면서도 파이썬에 대해 너무 모르는게 많았다. 객체지향의 개념중 대충 감으로만 알고 넘기던 것들의 정의에 대해서 정리해봤다. 클래스(Class…]]></description><link>https://ohyunkyo.github.io/TIL/oop/oop-essential/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/oop/oop-essential/</guid><pubDate>Mon, 14 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;0. 서론&lt;/h2&gt;
&lt;p&gt;장고를 공부하면서도 파이썬에 대해 너무 모르는게 많았다.&lt;br&gt;
객체지향의 개념중 대충 감으로만 알고 넘기던 것들의 정의에 대해서 정리해봤다.&lt;/p&gt;
&lt;h3&gt;클래스(Class)&lt;/h3&gt;
&lt;p&gt;데이터와 기능을 함께 묶는 수단을 제공한다.&lt;br&gt;
클래스를 생성하면 새로운 객체 유형이 생성되고 해당 유형의 인스턴스를 생성할 수 있다.&lt;/p&gt;
&lt;h3&gt;변수(Variables)&lt;/h3&gt;
&lt;p&gt;파이썬에서 변수는 객체에 대한 참조다.&lt;br&gt;
변수를 객체를 저장하는것으로 생각하는 경향이 있으나 이는 잘못된 생각이다.&lt;br&gt;
변수는 메모리의 다른 곳에 있는 객체에 대한 포인터(참조)로 생각해야 한다.&lt;/p&gt;
&lt;h4&gt;클래스 변수&lt;/h4&gt;
&lt;p&gt;클래스의 모든 인스턴스가 공유하는 변수이다.&lt;/p&gt;
&lt;h4&gt;인스턴스 변수&lt;/h4&gt;
&lt;p&gt;각 인스턴스가 다른 값을 가질 수 있다.&lt;/p&gt;
&lt;h3&gt;객체(Object)&lt;/h3&gt;
&lt;p&gt;객체는 속성의 집합에 이름을 달아놓은것이다.&lt;br&gt;
각 속성은 다른 객체를 참조한다.&lt;br&gt;
클래스를 정의하는것이 객체를 생성하는것이다.&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;class MyObject&lt;/code&gt; 구문이 &lt;code class=&quot;language-text&quot;&gt;MyObject&lt;/code&gt; 라는 이름의 객체를 생성하는것 처럼 보이지만 실제로는 &lt;code class=&quot;language-text&quot;&gt;MyObject&lt;/code&gt; 이라는 이름의 변수가 방금 생성된 객체를 참조하는것이다.&lt;br&gt;
객체는 익명이지만 &lt;code class=&quot;language-text&quot;&gt;__name__&lt;/code&gt; 속성을 사용하면 객체에 이름을 지정할 수 있다.&lt;/p&gt;
&lt;h3&gt;속성(Attribute)&lt;/h3&gt;
&lt;p&gt;객체가 있으면 해당 객체의 속성에 액세스 할 수 있다.&lt;br&gt;
객체는 특정 타입으로 선언하지 않고도 모듣 객체를 참조할 수 있다는 점에서 변수같이 작동한다고 할 수 있다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;인스턴스화 하지 않아도 객체의 속성에 액세스 할 수 있다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;메서드&lt;/h3&gt;
&lt;p&gt;클래스에 포함되어 있는 함수라고 할 수 있다.&lt;/p&gt;
&lt;h4&gt;기본 메서드(인스턴스 메서드)&lt;/h4&gt;
&lt;p&gt;아무 데코레이터 없이 메서드를 선언했을 경우.&lt;br&gt;
첫번째 매개변수(parameter) 로 클래스의 인스턴스(&lt;code class=&quot;language-text&quot;&gt;self&lt;/code&gt;)를 전달받는다&lt;/p&gt;
&lt;h4&gt;클래스 메서드&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;@classmethod&lt;/code&gt; 데코레이터를 사용하여 선언했을 경우.&lt;br&gt;
첫번째 매개변수로 클래스 자체(&lt;code class=&quot;language-text&quot;&gt;cls&lt;/code&gt;)를 전달받는다.&lt;br&gt;
다른 클래스 속성이나 클래스 메서드에 접근 가능하다.&lt;br&gt;
인스턴스에서도 실행 가능하지만 그렇게 하지 않는것을 권장한다.&lt;/p&gt;
&lt;h4&gt;스태틱 메서드&lt;/h4&gt;
&lt;p&gt;첫번째 매개변수가 자동으로 전달되지 않는다.&lt;br&gt;
속성이나 메서드에 액세스 할 수 없다.&lt;br&gt;
함수 그 자체의 기능을 하는 메서드라고 할 수 있다.&lt;br&gt;
매개변수를 받아 단순히 연산하거나 값을 수정하여 리턴하는 방식으로 사용 가능.&lt;/p&gt;
&lt;h3&gt;self 에 대하여&lt;/h3&gt;
&lt;p&gt;메서드의 첫번째 인수로, 메서드가 호출된 인스턴스를 의미한다.&lt;br&gt;
인스턴스의 메서드를 호출할 때 인스턴스 자신이 인자로 전달된다.&lt;br&gt;
관례적으로 &lt;code class=&quot;language-text&quot;&gt;self&lt;/code&gt; 라고 사용한다.&lt;br&gt;
이것을 통해 속성에 접근하거나 다른 메서드를 호출할 수 있다.&lt;/p&gt;
&lt;h2&gt;99. 끝나고 나서&lt;/h2&gt;
&lt;p&gt;잘 몰랐던 기본 개념에 대해서 정리했지만 틀린 부분도 있을것이고 더 알아야 하는 것도 한참 남았을 것이다.&lt;br&gt;
앞으로는 새로운 개념에 대해 배우거나 정리할 때마다 이 문서를 조금씩 업데이트 할 예정이다.&lt;/p&gt;
&lt;p&gt;출처 :&lt;br&gt;
&lt;a href=&quot;https://docs.python.org/3/tutorial/classes.html&quot;&gt;클래스&lt;/a&gt;
&lt;a href=&quot;https://www.i-programmer.info/programming/python/11683-programmers-python-variables-objects-and-attributes.html&quot;&gt;변수/객체/속성&lt;/a&gt;
&lt;a href=&quot;https://youtu.be/BJ-VvGyQxho&quot;&gt;클래스변수/인스턴스변수&lt;/a&gt;
&lt;a href=&quot;https://youtu.be/rq8cL2XMM5M&quot;&gt;클래스메서드/스태틱메서드&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[secret 파일 포함하여 컨테이너 생성하기]]></title><description><![CDATA[https://yongho1037.tistory.com/808]]></description><link>https://ohyunkyo.github.io/TIL/tmp/create-container-with-secret/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/tmp/create-container-with-secret/</guid><pubDate>Invalid Date</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://yongho1037.tistory.com/808&quot;&gt;https://yongho1037.tistory.com/808&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[data 속성과 methods]]></title><description><![CDATA[https://v3.ko.vuejs.org/guide/data-methods.html]]></description><link>https://ohyunkyo.github.io/TIL/tmp/base-of-data-and-methods/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/tmp/base-of-data-and-methods/</guid><pubDate>Invalid Date</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://v3.ko.vuejs.org/guide/data-methods.html&quot;&gt;https://v3.ko.vuejs.org/guide/data-methods.html&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[annotation 과 aggregation]]></title><description><![CDATA[http://raccoonyy.github.io/django-annotate-and-aggregate-like-as-excel/]]></description><link>https://ohyunkyo.github.io/TIL/tmp/django-annotation-aggregation/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/tmp/django-annotation-aggregation/</guid><pubDate>Invalid Date</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;http://raccoonyy.github.io/django-annotate-and-aggregate-like-as-excel/&quot;&gt;http://raccoonyy.github.io/django-annotate-and-aggregate-like-as-excel/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[뷰 리팩토링]]></title><description><![CDATA[https://jess2.xyz/vue/vue-tip/]]></description><link>https://ohyunkyo.github.io/TIL/tmp/vue-refactoring/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/tmp/vue-refactoring/</guid><pubDate>Invalid Date</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://jess2.xyz/vue/vue-tip/&quot;&gt;https://jess2.xyz/vue/vue-tip/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[이미지 상대경로 사용하기]]></title><description><![CDATA[https://www.gatsbyjs.com/docs/working-with-images-in-markdown/]]></description><link>https://ohyunkyo.github.io/TIL/tmp/relative-path-markdown-image/</link><guid isPermaLink="false">https://ohyunkyo.github.io/TIL/tmp/relative-path-markdown-image/</guid><pubDate>Invalid Date</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://www.gatsbyjs.com/docs/working-with-images-in-markdown/&quot;&gt;https://www.gatsbyjs.com/docs/working-with-images-in-markdown/&lt;/a&gt;&lt;/p&gt;</content:encoded></item></channel></rss>